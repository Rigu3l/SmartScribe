# public/.htaccess
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /SmartScribe-main/public/

  # CORS headers
  Header set Access-Control-Allow-Origin "*"
  Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
  Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-User-ID, X-Requested-With"
  Header set Access-Control-Allow-Credentials "true"

  # Handle API requests - Fix the rewrite rule to properly match the full path
  RewriteCond %{REQUEST_URI} ^/SmartScribe-main/public/api/(.*)$
  RewriteRule ^api/(.*)$ index.php?resource=$1 [QSA,L]

  # Allow direct access to uploaded files
  RewriteCond %{REQUEST_URI} ^/SmartScribe-main/public/uploads/.*$
  RewriteRule . - [L]

  # Handle Vue Router (for SPA)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . index.html [L]
</IfModule>