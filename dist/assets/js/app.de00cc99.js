(function(){"use strict";var e={3364:function(e,t,s){var a=s(3751),o=s(641),r=s(33);function l(e,t,s,a,l,n){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(a.globalThemeClasses)},[(0,o.bF)(i)],2)}var n=s(6278),i={name:"App",setup(){const e=(0,n.Pj)(),t=(0,o.EW)((()=>{try{if(!e||!e.getters)return"bg-gray-900 text-white";const t=e.getters["app/getThemeClasses"];return t?.main||"bg-gray-900 text-white"}catch(t){return"bg-gray-900 text-white"}}));return(0,o.sV)((()=>{console.log("🎨 App mounted - theme should already be applied from initialization")})),{globalThemeClasses:t}}},c=s(6262);const d=(0,c.A)(i,[["render",l]]);var u=d,g=(s(8111),s(3579),s(5220));const m={class:"min-h-screen flex flex-col bg-gray-900 text-white overflow-x-hidden"},p={class:"p-6 flex justify-between items-center"},b={class:"space-x-2"},f={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8",style:{"min-height":"calc(100vh - 200px)"}},y={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-6xl border border-gray-700"},h={class:"grid md:grid-cols-2 gap-6 sm:gap-8 mb-12"},x={class:"bg-gray-700/50 rounded-2xl p-6 sm:p-8 border border-gray-600 hover:border-gray-500 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/20"},v={class:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-6 shadow-lg"},k={class:"bg-gray-700/50 rounded-2xl p-6 sm:p-8 border border-gray-600 hover:border-gray-500 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/20"},w={class:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mb-6 shadow-lg"},C={class:"bg-gray-700/50 rounded-2xl p-6 sm:p-8 border border-gray-600 hover:border-gray-500 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/20"},L={class:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center mb-6 shadow-lg"},S={class:"bg-gray-700/50 rounded-2xl p-6 sm:p-8 border border-gray-600 hover:border-gray-500 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/20"},T={class:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center mb-6 shadow-lg"},E={class:"text-center"};function N(e,t,s,a,r,l){const n=(0,o.g2)("router-link"),i=(0,o.g2)("font-awesome-icon"),c=(0,o.g2)("AppFooter");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("header",p,[t[2]||(t[2]=(0,o.Lk)("div",{class:"text-xl font-bold"},"SmartScribe",-1)),(0,o.Lk)("div",b,[(0,o.bF)(n,{to:"/login",class:"px-4 py-2 border border-white rounded-md hover:bg-gray-800 transition"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Sign In")]))),_:1,__:[0]}),(0,o.bF)(n,{to:"/signup",class:"px-4 py-2 bg-white text-gray-900 rounded-md hover:bg-gray-200 transition"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Get Started")]))),_:1,__:[1]})])]),(0,o.Lk)("main",f,[(0,o.Lk)("div",y,[t[12]||(t[12]=(0,o.Lk)("div",{class:"text-center mb-12"},[(0,o.Lk)("h1",{class:"text-3xl sm:text-4xl font-bold mb-4 text-white"},"SmartScribe: AI Study Helper"),(0,o.Lk)("p",{class:"text-lg sm:text-xl text-gray-400"},"Transform your study notes into digital content with OCR and AI")],-1)),(0,o.Lk)("div",h,[(0,o.Lk)("div",x,[(0,o.Lk)("div",v,[(0,o.bF)(i,{icon:["fas","camera"],class:"text-white text-xl sm:text-2xl"})]),t[3]||(t[3]=(0,o.Lk)("h2",{class:"text-xl sm:text-2xl font-semibold mb-3 text-white"},"OCR-based Note Scanning",-1)),t[4]||(t[4]=(0,o.Lk)("p",{class:"text-gray-300 leading-relaxed"},"Take pictures of your handwritten or printed study notes and convert them to digital text instantly.",-1))]),(0,o.Lk)("div",k,[(0,o.Lk)("div",w,[(0,o.bF)(i,{icon:["fas","robot"],class:"text-white text-xl sm:text-2xl"})]),t[5]||(t[5]=(0,o.Lk)("h2",{class:"text-xl sm:text-2xl font-semibold mb-3 text-white"},"AI Summarization",-1)),t[6]||(t[6]=(0,o.Lk)("p",{class:"text-gray-300 leading-relaxed"},"Generate concise summaries of your notes using advanced AI technology.",-1))]),(0,o.Lk)("div",C,[(0,o.Lk)("div",L,[(0,o.bF)(i,{icon:["fas","chart-line"],class:"text-white text-xl sm:text-2xl"})]),t[7]||(t[7]=(0,o.Lk)("h2",{class:"text-xl sm:text-2xl font-semibold mb-3 text-white"},"Study Progress Tracker",-1)),t[8]||(t[8]=(0,o.Lk)("p",{class:"text-gray-300 leading-relaxed"},"Track how many notes you've scanned and reviewed to stay on top of your studies.",-1))]),(0,o.Lk)("div",S,[(0,o.Lk)("div",T,[(0,o.bF)(i,{icon:["fas","highlighter"],class:"text-white text-xl sm:text-2xl"})]),t[9]||(t[9]=(0,o.Lk)("h2",{class:"text-xl sm:text-2xl font-semibold mb-3 text-white"},"Keyword Highlighting",-1)),t[10]||(t[10]=(0,o.Lk)("p",{class:"text-gray-300 leading-relaxed"},"Automatically highlight important terms and concepts in your notes.",-1))])]),(0,o.Lk)("div",E,[(0,o.bF)(n,{to:"/signup",class:"inline-flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl text-lg font-semibold hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-lg"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{icon:["fas","rocket"]}),t[11]||(t[11]=(0,o.Lk)("span",null,"Get Started",-1))])),_:1,__:[11]})])])]),(0,o.bF)(c,{links:a.footerLinks,copyright:a.copyrightText},null,8,["links","copyright"])])}const _={class:"p-4 bg-gray-800 text-gray-400 flex justify-between items-center text-sm"},A={class:"flex space-x-4"},z=["href"];function I(e,t,s,a,l,n){return(0,o.uX)(),(0,o.CE)("footer",_,[(0,o.Lk)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.links,(e=>((0,o.uX)(),(0,o.CE)("a",{key:e.text,href:e.href,class:"hover:text-white transition-colors"},(0,r.v_)(e.text),9,z)))),128))]),(0,o.Lk)("div",null,(0,r.v_)(s.copyright),1)])}var F={name:"AppFooter",props:{links:{type:Array,default:()=>[{text:"Docs",href:"#"},{text:"Guides",href:"#"},{text:"Help",href:"#"},{text:"Contact",href:"#"}]},copyright:{type:String,default:"© 2025 SmartScribe Inc."}}};const R=(0,c.A)(F,[["render",I]]);var P=R,D={name:"HomeView",components:{AppFooter:P},setup(){const e=[{text:"Privacy Policy",href:"#"},{text:"Terms of Service",href:"#"},{text:"Help Center",href:"#"}],t="© 2025 SmartScribe. All rights reserved.";return{footerLinks:e,copyrightText:t}},mounted(){document.body.classList.add("loaded")}};const Q=(0,c.A)(D,[["render",N],["__scopeId","data-v-1c473c56"]]);var U=Q;const O={class:"min-h-screen flex flex-col bg-gray-900 text-white overflow-x-hidden"},G={class:"p-6 flex justify-between items-center"},$={class:"space-x-2"},q={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8",style:{"min-height":"calc(100vh - 200px)"}},M={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-md border border-gray-700"},j={class:"flex justify-center mb-8"},K={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full overflow-hidden flex items-center justify-center shadow-xl"},W=["src"],X={key:0,class:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6"},V={class:"flex items-center"},B={class:"space-y-2"},H={class:"relative"},Z={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},J={class:"space-y-2"},Y={class:"relative"},ee={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},te=["type"],se={class:"flex justify-end"},ae=["disabled"],oe={key:0,class:"flex items-center justify-center"},re={key:1,class:"flex items-center justify-center"},le={class:"grid grid-cols-3 gap-3 mb-8"},ne=["disabled"],ie=["disabled"],ce={class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200"},de={class:"text-center"},ue={class:"text-gray-400 text-sm"};function ge(e,t,s,l,n,i){const c=(0,o.g2)("router-link"),d=(0,o.g2)("font-awesome-icon"),u=(0,o.g2)("AppFooter");return(0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("header",G,[t[8]||(t[8]=(0,o.Lk)("div",{class:"text-xl font-bold"},"SmartScribe",-1)),(0,o.Lk)("div",$,[(0,o.bF)(c,{to:"/signup",class:"px-4 py-2 border border-white rounded-md hover:bg-gray-800 transition"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Sign Up")]))),_:1,__:[6]}),(0,o.bF)(c,{to:"/contact",class:"px-4 py-2 bg-white text-gray-900 rounded-md hover:bg-gray-200 transition"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("Contact")]))),_:1,__:[7]})])]),(0,o.Lk)("main",q,[(0,o.Lk)("div",M,[(0,o.Lk)("div",j,[(0,o.Lk)("div",K,[(0,o.Lk)("img",{src:l.logo,alt:"SmartScribe Logo",class:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-full"},null,8,W)])]),t[16]||(t[16]=(0,o.Lk)("div",{class:"text-center mb-8"},[(0,o.Lk)("h1",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Welcome Back"),(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base"},"Sign in to your SmartScribe account")],-1)),l.errorMessage?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.Lk)("div",V,[(0,o.bF)(d,{icon:["fas","exclamation-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"])),class:"space-y-6"},[(0,o.Lk)("div",B,[t[9]||(t[9]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-300"}," Email Address ",-1)),(0,o.Lk)("div",H,[(0,o.Lk)("div",Z,[(0,o.bF)(d,{icon:["fas","envelope"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),placeholder:"Enter your email",class:"w-full pl-10 pr-4 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,512),[[a.Jo,l.email]])])]),(0,o.Lk)("div",J,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-300"}," Password ",-1)),(0,o.Lk)("div",Y,[(0,o.Lk)("div",ee,[(0,o.bF)(d,{icon:["fas","lock"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"password",type:l.passwordVisible?"text":"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),placeholder:"Enter your password",class:"w-full pl-10 pr-12 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,8,te),[[a.hp,l.password]]),(0,o.Lk)("button",{type:"button",onClick:t[2]||(t[2]=e=>l.passwordVisible=!l.passwordVisible),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300 transition-colors"},[(0,o.bF)(d,{icon:["fas",l.passwordVisible?"eye-slash":"eye"],class:"text-sm"},null,8,["icon"])])])]),(0,o.Lk)("div",se,[(0,o.bF)(c,{to:"/forgot-password",class:"text-sm text-blue-400 hover:text-blue-300 hover:underline transition-colors"},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)(" Forgot your password? ")]))),_:1,__:[11]})]),(0,o.Lk)("button",{type:"submit",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:l.isLoading},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",oe,[(0,o.bF)(d,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[12]||(t[12]=(0,o.eW)(" Signing in... "))])):((0,o.uX)(),(0,o.CE)("span",re,[(0,o.bF)(d,{icon:["fas","sign-in-alt"],class:"mr-2"}),t[13]||(t[13]=(0,o.eW)(" Sign In "))]))],8,ae)],32),t[17]||(t[17]=(0,o.Fv)('<div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-gray-800 text-gray-400">Or continue with</span></div></div>',1)),(0,o.Lk)("div",le,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.handleGoogleLogin&&l.handleGoogleLogin(...e)),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200",disabled:l.isLoading},[(0,o.bF)(d,{icon:["fab","google"],class:"text-red-400 text-lg"})],8,ne),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.handleFacebookLogin&&l.handleFacebookLogin(...e)),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200",disabled:l.isLoading},[(0,o.bF)(d,{icon:["fab","facebook-f"],class:"text-blue-400 text-lg"})],8,ie),(0,o.Lk)("button",ce,[(0,o.bF)(d,{icon:["fab","apple"],class:"text-gray-300 text-lg"})])]),(0,o.Lk)("div",de,[(0,o.Lk)("p",ue,[t[15]||(t[15]=(0,o.eW)(" Don't have an account? ")),(0,o.bF)(c,{to:"/signup",class:"text-blue-400 hover:text-blue-300 font-medium hover:underline transition-colors"},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)(" Sign up for free ")]))),_:1,__:[14]})])])])]),(0,o.bF)(u,{links:l.footerLinks,copyright:l.copyrightText},null,8,["links","copyright"])])}s(4114);var me=s.p+"assets/img/logo.9fa07118.jpg",pe=s(953),be={name:"LoginView",components:{AppFooter:P},setup(){const e=(0,g.rd)(),t=(0,n.Pj)(),s=(0,pe.KR)(""),a=(0,pe.KR)(""),o=(0,pe.KR)(!1),r=(0,pe.KR)(""),l=(0,pe.KR)(!1),i=[{text:"Privacy Policy",href:"#"},{text:"Terms of Service",href:"#"},{text:"Help Center",href:"#"}],c="© 2025 SmartScribe. All rights reserved.",d=async()=>{try{o.value=!0,r.value="",console.log("🔐 LoginView handleLogin called with:",{email:s.value,passwordLength:a.value?a.value.length:0,emailValid:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value),hasCredentials:!(!s.value||!a.value)}),await t.dispatch("auth/login",{email:s.value,password:a.value}),console.log("🔐 Login successful - Redirecting to dashboard"),e.push("/dashboard")}catch(l){console.error("❌ LoginView login failed:",{message:l.message,stack:l.stack,name:l.name}),r.value=l.message||"Failed to login. Please try again."}finally{o.value=!1}},u=async()=>{try{if(console.log("🔐 Attempting Google login with Google Identity Services"),o.value=!0,r.value="",!window.google||!window.google.accounts)return r.value="Google Sign-In is not available. Please refresh the page and try again.",void(o.value=!1);const s="your_vue_app_google_oauth_client_id";if("your_production_google_oauth_client_id"===s)return r.value="Google OAuth client ID not configured. Please check your environment variables.",void(o.value=!1);const a=window.google.accounts.oauth2.initTokenClient({client_id:s,scope:"openid email profile",callback:async s=>{if(s.error)return console.error("❌ Google OAuth error:",s),r.value="Google login failed. Please try again.",void(o.value=!1);try{console.log("🔐 Google OAuth successful, sending to backend"),await t.dispatch("auth/googleLogin",s.access_token),console.log("🔐 Google login successful - Redirecting to dashboard"),e.push("/dashboard")}catch(a){console.error("❌ Backend Google login failed:",a),r.value=a.message||"Failed to authenticate with Google. Please try again."}finally{o.value=!1}}});a.requestAccessToken()}catch(s){console.error("❌ Google login failed:",s),r.value=s.message||"Google login failed. Please try again.",o.value=!1}},m=async()=>{try{console.log("🔐 Attempting Facebook login"),o.value=!0,r.value="",alert("Facebook login is not currently supported. Please use email/password login.")}catch(e){console.error("❌ Facebook login failed:",e),r.value=e.message||"Facebook login failed. Please try again.",o.value=!1}};return{email:s,password:a,isLoading:o,errorMessage:r,handleLogin:d,handleGoogleLogin:u,handleFacebookLogin:m,passwordVisible:l,logo:me,footerLinks:i,copyrightText:c}}};const fe=(0,c.A)(be,[["render",ge]]);var ye=fe;const he={key:0,class:"fixed top-5 right-5 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-opacity duration-300"},xe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"mb-4"},ke={class:"mb-4"},we={key:0,class:"flex items-center space-x-2"},Ce={key:1},Le={key:2},Se={class:"flex justify-end space-x-3"},Te=["disabled"],Ee=["disabled"],Ne={key:0,class:"flex items-center space-x-2"},_e={key:1},Ae={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ze={class:"flex items-center mb-4"},Ie={class:"flex justify-end space-x-3"},Fe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Re={class:"flex items-center mb-4"},Pe={class:"flex flex-col items-center mb-6"},De=["src"],Qe={class:"space-y-4"},Ue={class:"flex justify-end space-x-3 mt-6"},Oe={class:"flex justify-between items-center mb-6"},Ge={class:"mb-4"},$e={class:"space-y-4"},qe={class:"flex justify-between items-center mt-1"},Me={class:"flex items-center"},je={class:"flex justify-center space-x-2"},Ke=["disabled"],We={class:"flex justify-center pt-2"},Xe=["disabled"],Ve={class:"flex justify-between items-center mb-6"},Be={class:"flex items-center space-x-3"},He={class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},Ze={key:0,class:"text-center py-12"},Je={class:"inline-flex items-center space-x-3"},Ye={key:1,class:"space-y-4"},et={class:"flex items-start justify-between mb-3"},tt=["onClick"],st={class:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200"},at={class:"flex-grow min-w-0"},ot={class:"flex items-center space-x-3 mt-1"},rt={class:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},lt=["onClick"],nt=["onClick"],it={class:"ml-14"},ct={class:"flex items-center justify-between mt-4"},dt={class:"flex flex-wrap gap-2"},ut={class:"max-w-md mx-auto"},gt={class:"flex flex-col sm:flex-row gap-3 justify-center"};function mt(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("StatisticsCard"),u=(0,o.g2)("router-link"),g=(0,o.g2)("CameraModal"),m=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(m,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[l.showSaveConfirmation?((0,o.uX)(),(0,o.CE)("div",he," ✅ Summary saved successfully! ")):(0,o.Q3)("",!0),l.showTitleModal?((0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-md mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-slate-200"])},[(0,o.Lk)("h3",{class:(0,r.C4)(["text-xl font-semibold mb-4","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(l.pendingImageData&&"quick_note"===l.pendingImageData.type?"Save Quick Note":"Add Note Title"),3),(0,o.Lk)("div",ve,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Title",2),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.noteTitle=e),type:"text",placeholder:"Enter a title for your note...",class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white placeholder-gray-400":"bg-white border border-gray-300 text-gray-900 placeholder-gray-500"]),onKeyup:t[1]||(t[1]=(0,a.jR)(((...e)=>l.saveNoteWithTitle&&l.saveNoteWithTitle(...e)),["enter"]))},null,34),[[a.Jo,l.noteTitle]])]),(0,o.Lk)("div",ke,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Preview",2),(0,o.Lk)("div",{class:(0,r.C4)(["p-3 rounded-md max-h-32 overflow-y-auto text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"])},[l.isProcessingFile?((0,o.uX)(),(0,o.CE)("div",we,[(0,o.bF)(c,{icon:["fas","spinner"],class:"animate-spin"}),t[16]||(t[16]=(0,o.Lk)("span",null,"Processing file...",-1))])):l.pendingImageData&&"quick_note"===l.pendingImageData.type?((0,o.uX)(),(0,o.CE)("div",Ce,(0,r.v_)(l.pendingImageData.content.substring(0,200))+(0,r.v_)(l.pendingImageData.content.length>200?"...":""),1)):((0,o.uX)(),(0,o.CE)("div",Le,(0,r.v_)(l.ocrText?l.ocrText.substring(0,200):"No text extracted")+(0,r.v_)(l.ocrText&&l.ocrText.length>200?"...":""),1))],2)]),(0,o.Lk)("div",Se,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.cancelTitleInput&&l.cancelTitleInput(...e)),class:"px-4 py-2 bg-gray-600 rounded-md hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.isProcessingFile}," Cancel ",8,Te),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.saveNoteWithTitle&&l.saveNoteWithTitle(...e)),class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:!l.noteTitle.trim()||l.isProcessingFile||l.isSavingNote},[l.isProcessingFile||l.isSavingNote?((0,o.uX)(),(0,o.CE)("span",Ne,[(0,o.bF)(c,{icon:["fas","spinner"],class:"animate-spin"}),(0,o.Lk)("span",null,(0,r.v_)(l.isProcessingFile?"Processing...":"Saving..."),1)])):((0,o.uX)(),(0,o.CE)("span",_e,(0,r.v_)(l.pendingImageData&&"quick_note"===l.pendingImageData.type?"Save Quick Note":"Save Note"),1))],8,Ee)])],2)])):(0,o.Q3)("",!0),l.showDeleteModal?((0,o.uX)(),(0,o.CE)("div",Ae,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-sm mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-slate-200"])},[(0,o.Lk)("div",ze,[(0,o.bF)(c,{icon:["fas","times"],class:"text-red-400 text-xl mr-3"}),(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-medium","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Delete Note",2)]),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},[t[17]||(t[17]=(0,o.eW)(' Are you sure you want to delete "')),(0,o.Lk)("strong",null,(0,r.v_)(l.noteToDelete.title),1),t[18]||(t[18]=(0,o.eW)('"? This action cannot be undone. '))],2),(0,o.Lk)("div",Ie,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.deleteNote&&l.deleteNote(...e)),class:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 transition"}," Delete ")])],2)])):(0,o.Q3)("",!0),l.showProfileModal?((0,o.uX)(),(0,o.CE)("div",Fe,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-sm mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-slate-200"])},[(0,o.Lk)("div",Re,[(0,o.bF)(c,{icon:["fas","user"],class:"text-blue-400 text-xl mr-3"}),(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-medium","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"User Profile",2)]),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",{class:(0,r.C4)(["w-24 h-24 rounded-full overflow-hidden mb-3",l.themeClasses.input])},[l.user&&l.user.profilePicture?((0,o.uX)(),(0,o.CE)("img",{key:l.user.profilePicture,src:l.getProfilePictureUrl(l.user.profilePicture),alt:"Profile",class:"w-full h-full object-cover",onError:t[6]||(t[6]=(...e)=>l.handleImageError&&l.handleImageError(...e)),onLoad:t[7]||(t[7]=(...e)=>l.handleImageLoad&&l.handleImageLoad(...e))},null,40,De)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["w-full h-full flex items-center justify-center",l.themeClasses.input])},[(0,o.bF)(c,{icon:["fas","user"],class:(0,r.C4)([l.themeClasses.text,"text-2xl"])},null,8,["class"])],2))],2),(0,o.Lk)("p",{class:(0,r.C4)(["text-sm mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-700"])},"Profile picture can be changed in Settings",2)]),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Full Name",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.firstName&&l.user?.lastName?`${l.user.firstName} ${l.user.lastName}`:l.user?.name||"User"),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Email",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.email||"user@example.com"),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Member Since",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.memberSince||(new Date).toLocaleDateString()),3)])]),(0,o.Lk)("div",Ue,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.closeProfileModal&&l.closeProfileModal(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Close ",2)])],2)])):(0,o.Q3)("",!0),(0,o.Lk)("main",{class:(0,r.C4)([l.themeClasses.mainContent,"flex-1 p-4 md:p-6 transition-all duration-300 ease-in-out min-h-screen"]),style:(0,r.Tr)({backgroundColor:"dark"===l.store.getters["app/getCurrentTheme"]?"#111827":"#ffffff"})},[(0,o.Lk)("div",Oe,[(0,o.Lk)("h1",{class:(0,r.C4)(["font-bold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Dashboard",2),t[19]||(t[19]=(0,o.Lk)("div",{class:"flex items-center space-x-4"},null,-1))]),(0,o.bF)(d,{stats:l.stats,loading:l.loadingDashboard,"theme-classes":l.themeClasses},null,8,["stats","loading","theme-classes"]),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-4 mb-4"])},[(0,o.Lk)("div",Ge,[(0,o.Lk)("h2",{class:(0,r.C4)([l.fontSizeClasses.body,"font-medium",l.themeClasses.text])},"Create New Note",2)]),(0,o.Lk)("div",$e,[(0,o.Lk)("div",null,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.quickNoteContent=e),placeholder:"Type your notes here...",class:(0,r.C4)(["w-full h-24 px-3 py-2 border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent resize-none text-sm transition-colors",l.themeClasses.input])},null,2),[[a.Jo,l.quickNoteContent]]),(0,o.Lk)("div",qe,[(0,o.Lk)("span",{class:(0,r.C4)(["text-sm",l.themeClasses.secondaryText])},(0,r.v_)(l.quickNoteContent.length),3),l.quickNoteContent.trim()?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>l.clearQuickNote&&l.clearQuickNote(...e)),class:(0,r.C4)(["text-sm",l.themeClasses.secondaryText])}," Clear ",2)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Me,[(0,o.Lk)("div",{class:(0,r.C4)(["flex-1 border-t","dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600":"border-gray-300"])},null,2),(0,o.Lk)("span",{class:(0,r.C4)(["px-2 text-sm",l.themeClasses.secondaryText])},"or",2),(0,o.Lk)("div",{class:(0,r.C4)(["flex-1 border-t","dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600":"border-gray-300"])},null,2)]),(0,o.Lk)("div",je,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.openCamera&&l.openCamera(...e)),class:(0,r.C4)(["px-3 py-2 border rounded text-sm transition-colors",["dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]])},[(0,o.bF)(c,{icon:["fas","camera"],class:"mr-1"}),t[20]||(t[20]=(0,o.eW)(" Photo "))],2),(0,o.Lk)("label",{class:(0,r.C4)(["px-3 py-2 border rounded text-sm transition-colors cursor-pointer",["dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]])},[l.isProcessingFile?((0,o.uX)(),(0,o.Wv)(c,{key:0,icon:["fas","spinner"],class:"animate-spin mr-1"})):((0,o.uX)(),(0,o.Wv)(c,{key:1,icon:["fas","upload"],class:"mr-1"})),(0,o.Lk)("span",null,(0,r.v_)(l.isProcessingFile?"Processing...":"Upload"),1),(0,o.Lk)("input",{type:"file",class:"hidden",onChange:t[12]||(t[12]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",disabled:l.isProcessingFile},null,40,Ke)],2)]),(0,o.Lk)("div",We,[(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>l.createQuickNote&&l.createQuickNote(...e)),disabled:!l.canCreateNote,class:(0,r.C4)(["px-4 py-2 rounded font-medium transition-colors text-sm",l.canCreateNote?"bg-blue-600 text-white hover:bg-blue-700":"dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed"])},[l.isProcessingFile?((0,o.uX)(),(0,o.Wv)(c,{key:0,icon:["fas","spinner"],class:"animate-spin mr-2"})):((0,o.uX)(),(0,o.Wv)(c,{key:1,icon:["fas","plus"],class:"mr-2"})),(0,o.Lk)("span",null,(0,r.v_)(l.isProcessingFile?"Processing...":"Create"),1)],10,Xe)])])],2),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Ve,[(0,o.Lk)("div",Be,[(0,o.Lk)("div",He,[(0,o.bF)(c,{icon:["fas","clock"],class:"text-white text-base"})]),(0,o.Lk)("h2",{class:(0,r.C4)([l.fontSizeClasses.heading,"font-semibold",l.themeClasses.text])},"Recent Notes",2)]),(0,o.bF)(u,{to:"/notes",class:"flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors duration-200"},{default:(0,o.k6)((()=>[t[21]||(t[21]=(0,o.Lk)("span",{class:"text-sm font-medium"},"View All",-1)),(0,o.bF)(c,{icon:["fas","arrow-right"],class:"text-sm"})])),_:1,__:[21]})]),l.loadingNotes?((0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.Lk)("div",Je,[(0,o.bF)(c,{icon:["fas","spinner"],class:"animate-spin text-2xl text-blue-400"}),(0,o.Lk)("p",{class:(0,r.C4)("dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-700")},"Loading your recent notes...",2)])])):l.recentNotes.length>0?((0,o.uX)(),(0,o.CE)("div",Ye,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.recentNotes,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:e.id||s,class:(0,r.C4)(["group relative rounded-xl p-5 transition-all duration-300 hover:shadow-lg transform hover:-translate-y-0.5","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gradient-to-r from-gray-800 to-gray-750 border border-gray-700 hover:border-gray-600 hover:shadow-gray-900/20":"bg-white border border-gray-200 shadow-sm hover:shadow-md hover:bg-gray-50"])},[(0,o.Lk)("div",et,[(0,o.Lk)("div",{class:"flex items-start space-x-4 flex-grow cursor-pointer",onClick:t=>l.viewNote(e.id)},[(0,o.Lk)("div",st,[(0,o.bF)(c,{icon:["fas","file-alt"],class:"text-white text-sm"})]),(0,o.Lk)("div",at,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold group-hover:text-blue-400 transition-colors duration-200 truncate","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(e.title),3),(0,o.Lk)("div",ot,[(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center space-x-1 text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-700"])},[(0,o.bF)(c,{icon:["fas","clock"]}),(0,o.Lk)("span",null,(0,r.v_)(l.getTimeAgo(e.createdAt)),1)],2),(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center space-x-1 text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-700"])},[(0,o.bF)(c,{icon:["fas","align-left"]}),(0,o.Lk)("span",null,(0,r.v_)(e.wordCount)+" words",1)],2)])])],8,tt),(0,o.Lk)("div",rt,[(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.editNote(e.id)),["stop"]),class:"p-2 text-gray-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-all duration-200",title:"Edit note"},[(0,o.bF)(c,{icon:["fas","edit"],class:"text-sm"})],8,lt),(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.confirmDelete(e.id,e.title)),["stop"]),class:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all duration-200",title:"Delete note"},[(0,o.bF)(c,{icon:["fas","trash"],class:"text-sm"})],8,nt)])]),(0,o.Lk)("div",it,[(0,o.Lk)("p",{class:(0,r.C4)(["text-sm line-clamp-2 leading-relaxed","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},(0,r.v_)(e.summary),3),(0,o.Lk)("div",ct,[(0,o.Lk)("div",dt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tags,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:(0,r.C4)(["px-3 py-1 rounded-full text-sm font-medium border","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gradient-to-r from-gray-700 to-gray-600 text-gray-300 border-gray-600":"bg-gray-100 text-gray-800 border-gray-300"])},(0,r.v_)(e),3)))),128)),0===e.tags.length?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,r.C4)(["px-3 py-1 rounded-full text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700/50 text-gray-500":"bg-gray-200 text-gray-600"])}," No tags ",2)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center space-x-1 text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-500":"text-gray-700"])},[(0,o.bF)(c,{icon:["fas","eye"]}),(0,o.Lk)("span",null,(0,r.v_)(e.readingTime)+" min read",1)],2)])]),t[22]||(t[22]=(0,o.Lk)("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))],2)))),128))])):((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,r.C4)(["text-center py-12","dark"===l.store.getters["app/getCurrentTheme"]?"":"text-gray-900"])},[(0,o.Lk)("div",ut,[(0,o.Lk)("div",{class:(0,r.C4)(["w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gradient-to-br from-gray-700 to-gray-600":"bg-gray-100"])},[(0,o.bF)(c,{icon:["fas","book-open"],class:(0,r.C4)(["text-3xl","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},null,8,["class"])],2),(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-semibold mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"No notes yet",2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6 leading-relaxed","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-700"])}," Start building your knowledge base by scanning your first note, uploading images with OCR text extraction, or creating one from scratch. ",2),(0,o.Lk)("div",gt,[(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>l.openCamera&&l.openCamera(...e)),class:"inline-flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 transform hover:scale-105"},[(0,o.bF)(c,{icon:["fas","camera"]}),t[23]||(t[23]=(0,o.Lk)("span",null,"Scan Note",-1))]),(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>l.createNewNote&&l.createNewNote(...e)),class:(0,r.C4)(["inline-flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])},[(0,o.bF)(c,{icon:["fas","plus"]}),t[24]||(t[24]=(0,o.Lk)("span",null,"Create Note",-1))],2)])])],2))],2)],6),(0,o.bF)(g,{show:l.showCameraModal,onClose:l.closeCameraModal,onPhotoCaptured:l.handlePhotoCaptured},null,8,["show","onClose","onPhotoCaptured"])])),_:1},8,["onOpenProfileModal"])}s(2489),s(1701);var pt=s(4848),bt=s.n(pt);s(7588);function ft(){const e=(0,pe.KR)(!1),t=(0,pe.KR)([]),s=(0,pe.KR)(!1),a=(0,pe.KR)(null),r={SUCCESS:{icon:["fas","check-circle"],color:"text-green-400",bgColor:"bg-green-500"},ERROR:{icon:["fas","triangle-exclamation"],color:"text-red-400",bgColor:"bg-red-500"},WARNING:{icon:["fas","exclamation-circle"],color:"text-yellow-400",bgColor:"bg-yellow-500"},INFO:{icon:["fas","info-circle"],color:"text-blue-400",bgColor:"bg-blue-500"},NOTE_CREATED:{icon:["fas","file-alt"],color:"text-purple-400",bgColor:"bg-purple-500"},NOTE_UPDATED:{icon:["fas","edit"],color:"text-indigo-400",bgColor:"bg-indigo-500"},GOAL_ACHIEVED:{icon:["fas","trophy"],color:"text-yellow-500",bgColor:"bg-yellow-600"},SYSTEM:{icon:["fas","cog"],color:"text-gray-400",bgColor:"bg-gray-500"}},l=(0,o.EW)((()=>t.value.filter((e=>!e.read)).length)),n=()=>{try{const e=localStorage.getItem("smartscribe_notifications");if(e){const s=JSON.parse(e);t.value=s.map((e=>({...e,timestamp:new Date(e.timestamp)})))}else d({type:"INFO",title:"Welcome to SmartScribe!",message:"Start by scanning your first note or creating a new one.",actions:[{label:"Get Started",action:"navigate",data:"/dashboard"}]})}catch(e){console.error("Error loading notifications:",e)}},i=()=>{try{localStorage.setItem("smartscribe_notifications",JSON.stringify(t.value))}catch(e){console.error("Error saving notifications:",e)}},c=e=>{const t=new Date,s=t-e,a=Math.floor(s/6e4),o=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<1?"Just now":a<60?`${a}m ago`:o<24?`${o}h ago`:r<7?`${r}d ago`:e.toLocaleDateString()},d=e=>{const s=r[e.type]||r.INFO,a={id:Date.now()+Math.random(),timestamp:new Date,read:!1,priority:e.priority||"normal",category:e.category||"general",actions:e.actions||[],persistent:e.persistent||!1,...s,...e};return a.time=c(a.timestamp),t.value.unshift(a),t.value.length>50&&(t.value=t.value.slice(0,50)),i(),"low"===a.priority&&setTimeout((()=>{C(a)}),3e4),a},u=(e,t,s={})=>d({type:"SUCCESS",title:e,message:t,...s}),g=(e,t,s={})=>d({type:"ERROR",title:e,message:t,priority:"high",...s}),m=(e,t,s={})=>d({type:"WARNING",title:e,message:t,...s}),p=(e,t,s={})=>d({type:"INFO",title:e,message:t,...s}),b=e=>d({type:"NOTE_CREATED",title:"Note Created",message:`"${e}" has been created successfully.`,actions:[{label:"View Note",action:"navigate",data:`/notes/${e}`}]}),f=e=>d({type:"NOTE_UPDATED",title:"Note Updated",message:`"${e}" has been updated.`,priority:"low"}),y=e=>d({type:"GOAL_ACHIEVED",title:"Goal Achieved! 🎉",message:`Congratulations! You've completed "${e}".`,persistent:!0,actions:[{label:"Set New Goal",action:"navigate",data:"/goals"}]}),h=e=>d({type:"SYSTEM",title:"System Update",message:e,priority:"low"}),x=()=>{s.value||(s.value=!0,a.value=setInterval((async()=>{try{const e=Math.random()<.1;if(e&&t.value.length<10){const e=[{type:"INFO",title:"System Status",message:"All systems are running smoothly.",priority:"low"},{type:"SUCCESS",title:"Backup Complete",message:"Your data has been backed up successfully.",priority:"low"},{type:"WARNING",title:"Storage Update",message:`You have used ${Math.floor(20*Math.random()+60)}% of your storage.`,priority:"normal",actions:[{label:"Manage Storage",action:"navigate",data:"/settings"}]}],t=e[Math.floor(Math.random()*e.length)];d({...t,silent:!0})}}catch(e){console.debug("Notification polling failed:",e.message)}}),3e4))},v=()=>{a.value&&(clearInterval(a.value),a.value=!1),s.value=!1},k=()=>{e.value=!e.value},w=()=>{e.value=!1},C=e=>{e.read=!0,i()},L=()=>{t.value.forEach((e=>{e.read=!0})),i()},S=e=>{const s=t.value.findIndex((t=>t.id===e));s>-1&&(t.value.splice(s,1),i())},T=()=>{t.value=[],i()},E=(e,t)=>{switch(t.action){case"navigate":t.data.startsWith("/")?window.location.href=t.data:window.open(t.data,"_blank");break;case"dismiss":S(e.id);break;case"callback":"function"===typeof t.callback&&t.callback(e);break;case"markAsRead":C(e);break}},N=()=>{t.value.forEach((e=>{e.time=c(e.timestamp)}))};return(0,o.sV)((()=>{n(),x(),N();const e=setInterval(N,6e4);(0,o.hi)((()=>{v(),clearInterval(e)}))})),{showNotifications:e,notifications:t,unreadNotifications:l,toggleNotifications:k,closeNotifications:w,markAsRead:C,markAllAsRead:L,removeNotification:S,clearAllNotifications:T,addNotification:d,showSuccess:u,showError:g,showWarning:m,showInfo:p,notifyNoteCreated:b,notifyNoteUpdated:f,notifyGoalAchieved:y,notifySystemUpdate:h,executeAction:E,startPolling:x,stopPolling:v}}var yt=s(4335);s(4979);function ht(e){if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),s=1e3*t.exp;return Date.now()>s}catch(t){return console.warn("Invalid token detected, clearing from localStorage"),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}const xt=yt.A.create({baseURL:"/",timeout:1e4,headers:{"Content-Type":"application/json"}});xt.interceptors.request.use((e=>{const t=localStorage.getItem("token");t&&!ht(t)&&(e.headers.Authorization=`Bearer ${t}`);const s=localStorage.getItem("user");if(s)try{const t=JSON.parse(s);t&&t.id&&(e.headers["X-User-ID"]=t.id)}catch(a){}return e.data instanceof FormData?delete e.headers["Content-Type"]:e.data&&"object"===typeof e.data&&(e.headers["Content-Type"]="application/json"),console.log("API Request URL:",e.baseURL+e.url),console.log("API Request Method:",e.method),console.log("API Request Headers:",e.headers),e})),xt.interceptors.response.use((e=>(console.log("✅ API Response:",e.config.method?.toUpperCase(),e.config.url,"- Status:",e.status),e)),(e=>(console.error("❌ API Error:",e.config?.method?.toUpperCase(),e.config?.url),e.response?(console.error("❌ Response status:",e.response.status),console.error("❌ Response data:",e.response.data)):e.request?console.error("❌ No response received:",e.request):console.error("❌ Request setup error:",e.message),Promise.reject(e))));var vt={login(e){return xt.post("?resource=auth&action=login",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})},googleLogin(e){return xt.post("?resource=auth&action=google",JSON.stringify({access_token:e}),{headers:{"Content-Type":"application/json"}})},requestPasswordReset(e){const t=new FormData;return t.append("email",e),xt.post("?resource=auth&action=request-password-reset",t)},resetPassword(e,t){const s=new FormData;return s.append("token",e),s.append("password",t),xt.post("?resource=auth&action=reset-password",s)},validateResetToken(e){return xt.get(`?resource=auth&action=validate-reset-token&token=${encodeURIComponent(e)}`)},register(e){return xt.post("?resource=auth&action=register",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})},logout(){return xt.post("?resource=auth&action=logout")},updatePassword(e){return xt.put("?resource=auth&action=update-password",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})},getUser(){return xt.get("?resource=auth&action=profile")},updateProfile(e){return xt.put("?resource=auth&action=profile",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})},uploadProfilePicture(e){return xt.post("?resource=auth&action=upload-profile-picture",e)},deleteAccount(){return xt.delete("?resource=auth&action=delete-account")},getNotes(){const e=Date.now();return xt.get(`?resource=notes&_t=${e}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})},getNote(e){return xt.get(`?resource=notes&id=${e}`)},createNote(e){if(e.image&&e.image instanceof File){const t=new FormData;return t.append("title",e.title),t.append("text",e.text),t.append("image",e.image),xt.post("?resource=notes",t)}return xt.post("?resource=notes",{title:e.title,text:e.text})},updateNote(e,t){const s=new FormData;if(void 0!==t.title&&s.append("title",t.title),void 0!==t.text&&s.append("text",t.text),void 0!==t.is_favorite){const e=t.is_favorite?"1":"0";console.log("🔄 API: Setting is_favorite to:",e,"(from boolean:",t.is_favorite,")"),s.append("is_favorite",e)}return t.summary&&s.append("summary",t.summary),t.keywords&&s.append("keywords",t.keywords),xt.post(`?resource=notes&id=${e}`,s,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})},deleteNote(e){return xt.delete(`?resource=notes&id=${e}`)},ocr:{processImage(e){return xt.post("?resource=ocr&action=processImage",e)}},generateSummary(e,t){return xt.post(`?resource=summaries&action=generate&note_id=${e}`,t)},getSummaries(){return xt.get("?resource=summaries")},getSummary(e){return xt.get(`?resource=summaries&id=${e}`)},createSummary(e,t){return xt.post("?resource=summaries",{note_id:e,format:"paragraph",...t})},getProgressStats(){return xt.get("?resource=progress&action=stats")},progress:{startStudySession(e){return xt.post("?resource=progress&action=startStudySession",e)},endStudySession(e){return xt.post("?resource=progress&action=endStudySession",e)},getStats(){return xt.get("?resource=progress&action=stats")}},getDashboardStats(){return xt.get("?resource=dashboard&action=stats")},getSettings(){return xt.get("?resource=settings")},updateSettings(e){return xt.put("?resource=settings",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})},gpt:{generateSummary(e,t={length:"medium"}){return xt.post("?resource=gpt&action=generateSummary",{text:e,...t})},generateQuiz(e,t={difficulty:"medium",questionCount:5}){return xt.post("?resource=gpt&action=generateQuiz",{text:e,...t})},extractKeywords(e,t=5){return xt.post("?resource=gpt&action=extractKeywords",{text:e,count:t})}},getQuizzes(){return xt.get("?resource=quizzes")},getQuiz(e){console.log("🔄 API getQuiz: Starting with quizId:",e);const t=xt.get(`?resource=quizzes&id=${e}`);return console.log("🔄 API getQuiz: Request promise created"),t},createQuiz(e,t){console.log("🔄 API createQuiz: Starting with noteId:",e),console.log("🔄 API createQuiz: Options:",t);const s={note_id:e,...t};console.log("🔄 API createQuiz: Full request data:",s);const a=xt.post("?resource=quizzes",s);return console.log("🔄 API createQuiz: Request promise created"),a},updateQuiz(e,t){return xt.put(`?resource=quizzes&id=${e}`,t)},deleteQuiz(e){return xt.delete(`?resource=quizzes&id=${e}`)},generateQuiz(e,t){return xt.post(`?resource=quizzes&action=generate&note_id=${e}`,t)},saveQuiz(e){return xt.post("?resource=quizzes",e)},exportNote(e,t){return xt.get(`?resource=export&id=${e}&format=${t}`,{responseType:"blob"})},startStudySession(e){return xt.post("?resource=study-sessions&action=start",e)},endStudySession(e){return xt.post("?resource=study-sessions&action=end",e)},updateStudySessionActivity(e){return xt.post("?resource=study-sessions&action=update-activity",e)},getActiveStudySession(){return xt.get("?resource=study-sessions&action=active")},getStudySessionStats(e=null,t=null){let s="?resource=study-sessions&action=stats";return e&&(s+=`&start_date=${e}`),t&&(s+=`&end_date=${t}`),xt.get(s)},getDailyStudyStats(e,t){return xt.get(`?resource=study-sessions&action=daily-stats&start_date=${e}&end_date=${t}`)},getStudyStreak(){return xt.get("?resource=study-sessions&action=streak")},get(e,t={}){return xt.get(e,t)},post(e,t={},s={}){return xt.post(e,t,s)},put(e,t={},s={}){return xt.put(e,t,s)},delete(e,t={}){return xt.delete(e,t)}};const kt=(0,pe.KR)(null),wt=(0,pe.KR)(!1),Ct=(0,pe.KR)(null);function Lt(){const e=kt,t=wt,s=Ct,a=e=>{if(!e)return null;if(console.log("🔍 getProfilePictureUrl called with:",e),e.includes("googleusercontent.com")||e.startsWith("https://lh3.googleusercontent.com")||e.startsWith("https://"))return console.log("✅ GOOGLE URL DETECTED - RETURNING UNCHANGED:",e),e;const t=Date.now(),s=e.startsWith("/")?e:`/${e}`,a=`${s}?t=${t}`;return console.log("📁 LOCAL PATH PROCESSED:",a),a},r=async()=>{try{t.value=!0,s.value=null;const r=localStorage.getItem("user");if(r)try{const t=JSON.parse(r);e.value={id:t.id,name:t.name||"User",email:t.email||"user@example.com",firstName:t.first_name||t.firstName||"",lastName:t.last_name||t.lastName||"",profilePicture:t.profile_picture||t.profilePicture||null,memberSince:t.created_at?new Date(t.created_at).toLocaleDateString():(new Date).toLocaleDateString()}}catch(a){console.error("Error parsing user data from localStorage:",a),localStorage.removeItem("user")}try{const t=await vt.getUser();if(t.data&&t.data.success&&t.data.data&&t.data.data.user){const s=t.data.data.user;e.value={id:s.id,name:s.name||"User",email:s.email||"user@example.com",firstName:s.first_name||"",lastName:s.last_name||"",profilePicture:s.profile_picture||null,memberSince:s.created_at?new Date(s.created_at).toLocaleDateString():(new Date).toLocaleDateString()},localStorage.setItem("user",JSON.stringify(s))}}catch(o){console.warn("Could not fetch user profile from API, using localStorage data:",o.message)}}catch(r){s.value=r.message,console.error("Error loading user profile:",r)}finally{t.value=!1}},l=async e=>{try{t.value=!0,s.value=null;const a=await vt.updateProfile(e);if(a.data&&a.data.success)return await r(),{success:!0};{const e=a.data?.error||"Failed to update profile";throw new Error(e)}}catch(a){const e=a.message||"Network error occurred";return s.value=e,console.error("Error updating user profile:",a),{success:!1,error:e}}finally{t.value=!1}},n=(0,o.EW)((()=>a(e.value?.profilePicture))),i=(0,o.EW)((()=>e.value?.name||"User")),c=(0,o.EW)((()=>!!e.value?.id)),d=()=>{kt.value=null,Ct.value=null,localStorage.removeItem("user"),localStorage.removeItem("token")},u=(0,o.EW)((()=>!!e.value?.profilePicture)),g=(0,o.EW)((()=>{if(!e.value?.name)return"U";const t=e.value.name.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.value.name[0].toUpperCase()}));return(0,o.wB)(kt,(e=>{e&&e.id&&localStorage.setItem("user",JSON.stringify({id:e.id,name:e.name,email:e.email,first_name:e.firstName,last_name:e.lastName,profile_picture:e.profilePicture,created_at:e.created_at}))}),{deep:!0}),{user:e,loading:t,error:s,profilePictureUrl:n,displayName:i,isAuthenticated:c,hasProfilePicture:u,getUserInitials:g,loadUserProfile:r,updateUserProfile:l,logout:d,getProfilePictureUrl:a}}const St={key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},Tt={class:"bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden"},Et={class:"flex justify-between items-center p-4 border-b border-gray-700"},Nt={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},_t={key:0,class:"space-y-6"},At={class:"relative"},zt={ref:"video",autoplay:"",playsinline:"",class:"w-full rounded-lg border-2 border-gray-600",style:{"max-height":"50vh"}},It={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-700 rounded-lg"},Ft={class:"text-center"},Rt={class:"flex justify-center space-x-4"},Pt=["disabled"],Dt={key:1,class:"space-y-6"},Qt={class:"text-center"},Ut=["src"],Ot={class:"flex justify-center space-x-4"},Gt=["disabled"],$t={key:0,class:"flex items-center space-x-2"},qt={key:1,class:"flex items-center space-x-2"},Mt=["disabled"],jt=["disabled"],Kt={key:2,class:"mt-6 p-4 bg-blue-900/20 rounded-lg border border-blue-500/30"},Wt={key:3,class:"mt-6 p-4 bg-red-900/20 rounded-lg border border-red-500/30"},Xt={class:"flex items-center space-x-2"},Vt={class:"text-sm text-red-400"};function Bt(e,t,s,a,l,n){const i=(0,o.g2)("font-awesome-icon");return s.show?((0,o.uX)(),(0,o.CE)("div",St,[(0,o.Lk)("div",Tt,[(0,o.Lk)("div",Et,[t[6]||(t[6]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-white"},"Take Photo",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.closeModal&&a.closeModal(...e)),class:"text-gray-400 hover:text-white transition-colors"},[(0,o.bF)(i,{icon:["fas","times"],class:"text-lg"})])]),(0,o.Lk)("div",Nt,[a.capturedImage?((0,o.uX)(),(0,o.CE)("div",Dt,[(0,o.Lk)("div",Qt,[t[10]||(t[10]=(0,o.Lk)("h3",{class:"text-lg font-semibold mb-4 text-white"},"Photo Captured!",-1)),(0,o.Lk)("img",{src:a.capturedImage,alt:"Captured photo",class:"max-w-full max-h-96 mx-auto rounded-lg border-2 border-gray-600"},null,8,Ut)]),(0,o.Lk)("div",Ot,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.processCapturedImage&&a.processCapturedImage(...e)),disabled:a.isProcessing,class:"px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center space-x-2"},[a.isProcessing?((0,o.uX)(),(0,o.CE)("span",$t,[(0,o.bF)(i,{icon:["fas","spinner"],class:"animate-spin"}),t[11]||(t[11]=(0,o.Lk)("span",null,"Processing...",-1))])):((0,o.uX)(),(0,o.CE)("span",qt,[(0,o.bF)(i,{icon:["fas","magic"]}),t[12]||(t[12]=(0,o.Lk)("span",null,"Extract Text",-1))]))],8,Gt),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>a.retakePhoto&&a.retakePhoto(...e)),disabled:a.isProcessing,class:"px-6 py-3 bg-gray-600 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center space-x-2"},[(0,o.bF)(i,{icon:["fas","redo"]}),t[13]||(t[13]=(0,o.Lk)("span",null,"Retake",-1))],8,Mt),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>a.closeModal&&a.closeModal(...e)),disabled:a.isProcessing,class:"px-6 py-3 bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center space-x-2"},[(0,o.bF)(i,{icon:["fas","times"]}),t[14]||(t[14]=(0,o.Lk)("span",null,"Cancel",-1))],8,jt)])])):((0,o.uX)(),(0,o.CE)("div",_t,[(0,o.Lk)("div",At,[(0,o.Lk)("video",zt,null,512),a.streamActive?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",It,[(0,o.Lk)("div",Ft,[(0,o.bF)(i,{icon:["fas","camera"],class:"text-4xl text-gray-400 mb-4"}),t[7]||(t[7]=(0,o.Lk)("p",{class:"text-gray-400"},"Initializing camera...",-1))])]))]),(0,o.Lk)("div",Rt,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.capturePhoto&&a.capturePhoto(...e)),disabled:!a.streamActive,class:"px-6 py-3 bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center space-x-2"},[(0,o.bF)(i,{icon:["fas","camera-retro"]}),t[8]||(t[8]=(0,o.Lk)("span",null,"Capture Photo",-1))],8,Pt),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.closeModal&&a.closeModal(...e)),class:"px-6 py-3 bg-gray-600 rounded-lg hover:bg-gray-700 transition flex items-center space-x-2"},[(0,o.bF)(i,{icon:["fas","times"]}),t[9]||(t[9]=(0,o.Lk)("span",null,"Cancel",-1))])])])),a.isProcessing?((0,o.uX)(),(0,o.CE)("div",Kt,t[15]||(t[15]=[(0,o.Lk)("div",{class:"flex items-center space-x-2"},[(0,o.Lk)("div",{class:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,o.Lk)("span",{class:"text-sm text-blue-400"},"Extracting text from image...")],-1)]))):(0,o.Q3)("",!0),a.error?((0,o.uX)(),(0,o.CE)("div",Wt,[(0,o.Lk)("div",Xt,[(0,o.bF)(i,{icon:["fas","triangle-exclamation"],class:"text-red-500"}),(0,o.Lk)("span",Vt,(0,r.v_)(a.error),1)])])):(0,o.Q3)("",!0)])])])):(0,o.Q3)("",!0)}var Ht={name:"CameraModal",props:{show:{type:Boolean,default:!1}},emits:["close","photo-captured"],setup(e,{emit:t}){const s=(0,pe.KR)(null),a=(0,pe.KR)(!1),r=(0,pe.KR)(null),l=(0,pe.KR)(!1),n=(0,pe.KR)(null);let i=null;const c=async()=>{try{i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),s.value&&(s.value.srcObject=i,a.value=!0)}catch(e){console.error("Error accessing camera:",e),n.value="Unable to access camera. Please check permissions and try again."}},d=()=>{i&&(i.getTracks().forEach((e=>e.stop())),i=null),a.value=!1},u=()=>{if(!s.value||!a.value)return;const e=document.createElement("canvas");e.width=s.value.videoWidth,e.height=s.value.videoHeight;const t=e.getContext("2d");t.drawImage(s.value,0,0),r.value=e.toDataURL("image/jpeg",.8),d()},g=()=>{r.value=null,n.value=null,c()},m=async()=>{if(r.value){l.value=!0,n.value=null;try{const e=await fetch(r.value),s=await e.blob(),{data:{text:a}}=await bt().recognize(s,"eng",{logger:()=>{}});a&&a.trim()?(t("photo-captured",{type:"camera",originalText:a.trim(),imageData:r.value}),p()):n.value="No text was found in the image. Please try taking a clearer photo."}catch(e){console.error("Error processing image:",e),n.value="Failed to process the image. Please try again."}finally{l.value=!1}}},p=()=>{d(),r.value=null,n.value=null,t("close")};return(0,o.wB)((()=>e.show),(e=>{e?(r.value=null,n.value=null,l.value=!1,c()):d()})),(0,o.sV)((()=>{e.show&&c()})),(0,o.hi)((()=>{d()})),{video:s,streamActive:a,capturedImage:r,isProcessing:l,error:n,capturePhoto:u,retakePhoto:g,processCapturedImage:m,closeModal:p}}};const Zt=(0,c.A)(Ht,[["render",Bt]]);var Jt=Zt;const Yt={class:"flex items-center space-x-3"},es=["title"],ts={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap border border-gray-700"},ss={class:"flex items-center space-x-2 md:space-x-4"},as={class:"relative"},os={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},rs={key:0,class:"absolute right-0 mt-2 w-80 bg-gray-800 rounded-md shadow-lg z-50 max-h-96 overflow-y-auto"},ls={key:0},ns=["onClick"],is={class:"flex items-start space-x-3"},cs={class:"flex-shrink-0 mt-1"},ds={class:"flex-grow"},us={class:"flex items-start justify-between"},gs={class:"flex-grow"},ms={class:"text-sm font-medium text-white"},ps={class:"text-xs text-gray-300 mt-1"},bs={class:"text-xs text-gray-500 mt-2"},fs={class:"flex items-center space-x-2 ml-2"},ys={key:0,class:"flex-shrink-0"},hs=["onClick"],xs={key:0,class:"mt-3 flex space-x-2"},vs=["onClick"],ks={key:1,class:"mt-2 flex items-center"},ws={key:2,class:"mt-2 flex items-center"},Cs={key:1,class:"p-4 text-center text-gray-400"},Ls={key:2,class:"p-3 border-t border-gray-700"},Ss={class:"relative"},Ts=["src"],Es={class:"flex flex-grow transition-all duration-300"},Ns={class:"space-y-2"};function _s(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)([l.themeClasses.main,"min-h-screen flex flex-col"])},[(0,o.Lk)("header",{class:(0,r.C4)([l.themeClasses.header,"p-4 flex justify-between items-center"])},[(0,o.Lk)("div",Yt,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.toggleSidebar&&l.toggleSidebar(...e)),class:(0,r.C4)(["group relative flex flex-col items-center justify-center w-12 h-12 rounded-xl transition-all duration-300 ease-out transform hover:scale-105 active:scale-95 overflow-hidden shadow-lg hover:shadow-xl","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gradient-to-br from-slate-800 to-gray-900 hover:from-blue-600 hover:to-blue-700 text-gray-300 hover:text-white hover:shadow-blue-500/25":"bg-gradient-to-br from-slate-200 to-slate-300 hover:from-blue-600 hover:to-blue-700 text-slate-700 hover:text-white hover:shadow-blue-500/25"]),title:l.sidebarVisible?"Hide sidebar":"Show sidebar"},[t[10]||(t[10]=(0,o.Fv)('<div class="flex flex-col space-y-1 relative z-10" data-v-87529b86><div class="w-6 h-0.5 bg-current transition-all duration-300 ease-out group-hover:w-7 group-hover:bg-white rounded-full" data-v-87529b86></div><div class="w-5 h-0.5 bg-current transition-all duration-300 ease-out group-hover:w-6 group-hover:bg-white rounded-full" data-v-87529b86></div><div class="w-4 h-0.5 bg-current transition-all duration-300 ease-out group-hover:w-5 group-hover:bg-white rounded-full" data-v-87529b86></div></div><div class="absolute inset-0 rounded-xl bg-gradient-to-br from-blue-500/0 to-blue-600/0 group-hover:from-blue-500/10 group-hover:to-blue-600/10 transition-all duration-300" data-v-87529b86></div>',2)),(0,o.Lk)("div",ts,[(0,o.eW)((0,r.v_)(l.sidebarVisible?"Hide Menu":"Show Menu")+" ",1),t[9]||(t[9]=(0,o.Lk)("div",{class:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 border-l border-t border-gray-700 rotate-45"},null,-1))])],10,es),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.text,"text-lg md:text-xl font-bold"])},"SmartScribe",2)]),(0,o.Lk)("div",ss,[(0,o.Lk)("div",as,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.toggleNotifications&&l.toggleNotifications(...e)),class:(0,r.C4)(["relative transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400 hover:text-white":"text-slate-500 hover:text-slate-900"])},[(0,o.bF)(c,{icon:["fas","bell"]}),l.unreadNotifications>0?((0,o.uX)(),(0,o.CE)("span",os,(0,r.v_)(l.unreadNotifications),1)):(0,o.Q3)("",!0)],2),l.showNotifications?((0,o.uX)(),(0,o.CE)("div",rs,[t[15]||(t[15]=(0,o.Lk)("div",{class:"p-4 border-b border-gray-700"},[(0,o.Lk)("h3",{class:"text-lg font-semibold"},"Notifications")],-1)),l.notifications.length>0?((0,o.uX)(),(0,o.CE)("div",ls,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.notifications,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:e.id||s,class:(0,r.C4)(["p-4 border-b border-gray-700 hover:bg-gray-700 transition-colors",{"bg-gray-700":!e.read,"cursor-pointer":!e.read}]),onClick:t=>l.markAsRead(e)},[(0,o.Lk)("div",is,[(0,o.Lk)("div",cs,[(0,o.Lk)("div",{class:(0,r.C4)(["w-8 h-8 rounded-full flex items-center justify-center",e.bgColor])},[(0,o.bF)(c,{icon:e.icon,class:"text-white text-sm"},null,8,["icon"])],2)]),(0,o.Lk)("div",ds,[(0,o.Lk)("div",us,[(0,o.Lk)("div",gs,[(0,o.Lk)("p",ms,(0,r.v_)(e.title),1),(0,o.Lk)("p",ps,(0,r.v_)(e.message),1),(0,o.Lk)("p",bs,(0,r.v_)(e.time),1)]),(0,o.Lk)("div",fs,[e.read?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ys,t[11]||(t[11]=[(0,o.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)]))),e.persistent?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:(0,a.D$)((t=>l.removeNotification(e.id)),["stop"]),class:"text-gray-400 hover:text-red-400 text-xs"},[(0,o.bF)(c,{icon:["fas","times"]})],8,hs)):(0,o.Q3)("",!0)])]),e.actions&&e.actions.length>0?((0,o.uX)(),(0,o.CE)("div",xs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.actions,((t,s)=>((0,o.uX)(),(0,o.CE)("button",{key:s,onClick:(0,a.D$)((s=>l.executeAction(e,t)),["stop"]),class:(0,r.C4)(["px-2 py-1 text-xs rounded transition-colors",{"bg-blue-600 text-white hover:bg-blue-700":"navigate"===t.action,"bg-gray-600 text-white hover:bg-gray-700":"dismiss"===t.action,"bg-green-600 text-white hover:bg-green-700":"callback"===t.action}])},(0,r.v_)(t.label),11,vs)))),128))])):(0,o.Q3)("",!0),"urgent"===e.priority?((0,o.uX)(),(0,o.CE)("div",ks,t[12]||(t[12]=[(0,o.Lk)("div",{class:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"},null,-1),(0,o.Lk)("span",{class:"text-xs text-red-400 font-medium"},"URGENT",-1)]))):"high"===e.priority?((0,o.uX)(),(0,o.CE)("div",ws,t[13]||(t[13]=[(0,o.Lk)("div",{class:"w-2 h-2 bg-orange-500 rounded-full mr-2"},null,-1),(0,o.Lk)("span",{class:"text-xs text-orange-400 font-medium"},"HIGH PRIORITY",-1)]))):(0,o.Q3)("",!0)])])],10,ns)))),128))])):((0,o.uX)(),(0,o.CE)("div",Cs,[(0,o.bF)(c,{icon:["fas","bell-slash"],class:"text-2xl mb-2"}),t[14]||(t[14]=(0,o.Lk)("p",null,"No notifications yet",-1))])),l.notifications.length>0?((0,o.uX)(),(0,o.CE)("div",Ls,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.markAllAsRead&&l.markAllAsRead(...e)),class:"text-sm text-blue-400 hover:text-blue-300"}," Mark all as read ")])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),l.showNotifications?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"fixed inset-0 z-0",onClick:t[3]||(t[3]=(...e)=>l.closeNotifications&&l.closeNotifications(...e))})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ss,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.toggleUserMenu&&l.toggleUserMenu(...e)),class:"flex items-center space-x-2 transition-colors duration-300"},[(0,o.Lk)("div",{class:(0,r.C4)(["w-8 h-8 rounded-full overflow-hidden","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-slate-300"])},[l.user&&l.user.profilePicture?((0,o.uX)(),(0,o.CE)("img",{key:l.user.profilePicture,src:l.getProfilePictureUrl(l.user.profilePicture),alt:"Profile",class:"w-full h-full object-cover",onError:t[4]||(t[4]=(...e)=>l.handleImageError&&l.handleImageError(...e)),onLoad:t[5]||(t[5]=(...e)=>l.handleImageLoad&&l.handleImageLoad(...e))},null,40,Ts)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["w-full h-full flex items-center justify-center","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-slate-300"])},[(0,o.bF)(c,{icon:["fas","user"],class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-slate-700","text-sm"])},null,8,["class"])],2))],2),(0,o.Lk)("span",{class:(0,r.C4)(["text-sm transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-slate-700"])},(0,r.v_)(l.user?.name||"User"),3),(0,o.bF)(c,{icon:["fas","chevron-down"],class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-slate-700","text-xs"])},null,8,["class"])]),l.showUserMenu?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(["absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 z-10 transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-slate-200"])},[(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.openProfileModal&&l.openProfileModal(...e)),class:(0,r.C4)(["w-full text-left block px-4 py-2 transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700":"hover:bg-slate-100"])}," Profile ",2),(0,o.bF)(d,{to:"/settings",onClick:l.closeUserMenu,class:(0,r.C4)(["block px-4 py-2 transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700":"hover:bg-slate-100"])},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)(" Settings ")]))),_:1,__:[16]},8,["onClick","class"]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.logout&&l.logout(...e)),class:(0,r.C4)(["w-full text-left block px-4 py-2 transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-red-400 hover:text-red-300":"hover:bg-slate-100 text-red-600 hover:text-red-700"])}," Logout ",2)],2)):(0,o.Q3)("",!0)])])],2),(0,o.Lk)("div",Es,[(0,o.bo)((0,o.Lk)("aside",{style:(0,r.Tr)({display:l.sidebarVisible?"block":"none"}),class:(0,r.C4)(["w-48 p-4",l.themeClasses.sidebar])},[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",Ns,[(0,o.Lk)("li",null,[(0,o.bF)(d,{to:"/dashboard",class:(0,r.C4)(["flex items-center space-x-2 p-2 rounded-md transition-colors duration-300",[l.isDashboardActive?"dark"===l.store.getters["app/getCurrentTheme"]?"bg-blue-500 text-white":"bg-blue-600 text-white":"dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-white":"hover:bg-slate-200 text-gray-900","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"]])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","home"]}),t[17]||(t[17]=(0,o.Lk)("span",null,"Dashboard",-1))])),_:1,__:[17]},8,["class"])]),(0,o.Lk)("li",null,[(0,o.bF)(d,{to:"/notes",class:(0,r.C4)(["flex items-center space-x-2 p-2 rounded-md transition-colors duration-300",[l.isNotesActive?"dark"===l.store.getters["app/getCurrentTheme"]?"bg-blue-500 text-white":"bg-blue-600 text-white":"dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-white":"hover:bg-slate-200 text-gray-900","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"]])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","book"]}),t[18]||(t[18]=(0,o.Lk)("span",null,"My Notes",-1))])),_:1,__:[18]},8,["class"])]),(0,o.Lk)("li",null,[(0,o.bF)(d,{to:"/quizzes",class:(0,r.C4)(["flex items-center space-x-2 p-2 rounded-md transition-colors duration-300",[l.isQuizzesActive?"dark"===l.store.getters["app/getCurrentTheme"]?"bg-blue-500 text-white":"bg-blue-600 text-white":"dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-white":"hover:bg-slate-200 text-gray-900","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"]])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","book"]}),t[19]||(t[19]=(0,o.Lk)("span",null,"Quizzes",-1))])),_:1,__:[19]},8,["class"])]),(0,o.Lk)("li",null,[(0,o.bF)(d,{to:"/goals",class:(0,r.C4)(["flex items-center space-x-2 p-2 rounded-md transition-colors duration-300",[l.isGoalsActive?"dark"===l.store.getters["app/getCurrentTheme"]?"bg-blue-500 text-white":"bg-blue-600 text-white":"dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-white":"hover:bg-slate-200 text-gray-900","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"]])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","bullseye"]}),t[20]||(t[20]=(0,o.Lk)("span",null,"Goal",-1))])),_:1,__:[20]},8,["class"])]),(0,o.Lk)("li",null,[(0,o.bF)(d,{to:"/settings",class:(0,r.C4)(["flex items-center space-x-2 p-2 rounded-md transition-colors duration-300",[l.isSettingsActive?"dark"===l.store.getters["app/getCurrentTheme"]?"bg-blue-500 text-white":"bg-blue-600 text-white":"dark"===l.store.getters["app/getCurrentTheme"]?"hover:bg-gray-700 text-white":"hover:bg-slate-200 text-gray-900","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"]])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","cog"]}),t[21]||(t[21]=(0,o.Lk)("span",null,"Settings",-1))])),_:1,__:[21]},8,["class"])])])])],6),[[a.aG,l.sidebarVisible]]),(0,o.RG)(e.$slots,"default",{},void 0,!0)])],2)}var As={name:"AppHeader",emits:["open-profile-modal"],setup(e,{emit:t}){const s=(0,g.rd)(),a=(0,g.lq)(),r=(0,n.Pj)(),{showNotifications:l,notifications:i,unreadNotifications:c,toggleNotifications:d,closeNotifications:u,markAsRead:m,markAllAsRead:p,showSuccess:b,showInfo:f,showWarning:y}=ft(),{user:h,getProfilePictureUrl:x}=Lt(),v=h,k=(0,o.EW)((()=>r.getters["app/getSidebarVisible"])),w=(0,o.EW)((()=>"/dashboard"===a.path||"/"===a.path)),C=(0,o.EW)((()=>a.path.startsWith("/notes"))),L=(0,o.EW)((()=>a.path.startsWith("/quizzes"))),S=(0,o.EW)((()=>a.path.startsWith("/goals"))),T=(0,o.EW)((()=>a.path.startsWith("/settings"))),E=(0,o.EW)((()=>{try{if(!r||!r.getters)return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"};const e=r.getters["app/getThemeClasses"];return e&&"object"===typeof e?e:{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}catch(e){return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}})),N=(0,pe.KR)(!1),_=()=>{r.dispatch("app/toggleSidebar")},A=()=>{N.value=!N.value},z=()=>{N.value=!1},I=()=>{t("open-profile-modal"),N.value=!1},F=async()=>{try{r.dispatch("auth/logout"),localStorage.removeItem("user"),localStorage.removeItem("token"),N.value=!1,s.push("/login")}catch(e){y("Error logging out","Please try again")}},R=(e,t)=>{"navigate"===t.action&&t.route?s.push(t.route):"callback"===t.action&&t.callback&&t.callback(e),m(e)},P=e=>{m({id:e})},D=()=>{},Q=()=>{};return{showUserMenu:N,user:v,sidebarVisible:k,isDashboardActive:w,isNotesActive:C,isQuizzesActive:L,isGoalsActive:S,isSettingsActive:T,showNotifications:l,notifications:i,unreadNotifications:c,toggleNotifications:d,markAsRead:m,markAllAsRead:p,closeNotifications:u,showSuccess:b,showInfo:f,showWarning:y,toggleSidebar:_,getProfilePictureUrl:x,handleImageError:D,handleImageLoad:Q,toggleUserMenu:A,closeUserMenu:z,openProfileModal:I,logout:F,executeAction:R,removeNotification:P,themeClasses:E,store:r}}};const zs=(0,c.A)(As,[["render",_s],["__scopeId","data-v-87529b86"]]);var Is=zs;const Fs={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6"},Rs={class:"flex justify-between items-center mb-2"},Ps={key:0,class:"animate-pulse"},Ds={key:1},Qs={class:"flex justify-between items-center mb-2"},Us={key:0,class:"animate-pulse"},Os={key:1},Gs={class:"flex justify-between items-center mb-2"},$s={key:0,class:"animate-pulse"},qs={key:1},Ms={class:"flex justify-between items-center mb-2"},js={key:0,class:"animate-pulse"},Ks={key:1};function Ws(e,t,s,a,l,n){const i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",Fs,[(0,o.Lk)("div",{class:(0,r.C4)([s.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Rs,[(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-semibold",s.themeClasses.text])},"Total Notes",2),(0,o.bF)(i,{icon:["fas","book"],class:"text-blue-500 text-xl"})]),s.loading?((0,o.uX)(),(0,o.CE)("div",Ps,[(0,o.Lk)("div",{class:(0,r.C4)(["h-8 rounded mb-2",s.themeClasses.card])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["h-4 rounded w-3/4",s.themeClasses.card])},null,2)])):((0,o.uX)(),(0,o.CE)("div",Ds,[(0,o.Lk)("p",{class:(0,r.C4)(["text-3xl font-bold",s.themeClasses.text])},(0,r.v_)(s.stats.totalNotes),3),(0,o.Lk)("p",{class:(0,r.C4)(["text-sm font-medium",s.themeClasses.secondaryText])},(0,r.v_)(s.stats.notesThisWeek)+" new this week",3)]))],2),(0,o.Lk)("div",{class:(0,r.C4)([s.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Qs,[(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-semibold",s.themeClasses.text])},"Study Time",2),(0,o.bF)(i,{icon:["fas","clock"],class:"text-green-500 text-xl"})]),s.loading?((0,o.uX)(),(0,o.CE)("div",Us,[(0,o.Lk)("div",{class:(0,r.C4)(["h-8 rounded mb-2",s.themeClasses.card])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["h-4 rounded w-3/4",s.themeClasses.card])},null,2)])):((0,o.uX)(),(0,o.CE)("div",Os,[(0,o.Lk)("p",{class:(0,r.C4)(["text-3xl font-bold",s.themeClasses.text])},(0,r.v_)(s.stats.studyHours)+"h",3),(0,o.Lk)("p",{class:(0,r.C4)([s.themeClasses.secondaryText,"text-sm font-medium"])},(0,r.v_)(s.stats.studyHoursThisWeek)+"h this week",3),(0,o.Lk)("p",{class:(0,r.C4)([s.themeClasses.secondaryText,"text-sm font-medium mt-1"])},(0,r.v_)(s.stats.totalNotesStudied)+" notes studied",3)]))],2),(0,o.Lk)("div",{class:(0,r.C4)([s.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Gs,[(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-semibold",s.themeClasses.text])},"Goals",2),(0,o.bF)(i,{icon:["fas","bullseye"],class:"text-purple-500 text-xl"})]),s.loading?((0,o.uX)(),(0,o.CE)("div",$s,[(0,o.Lk)("div",{class:(0,r.C4)(["h-8 rounded mb-2",s.themeClasses.card])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["h-4 rounded w-3/4",s.themeClasses.card])},null,2)])):((0,o.uX)(),(0,o.CE)("div",qs,[(0,o.Lk)("p",{class:(0,r.C4)(["text-3xl font-bold",s.themeClasses.text])},(0,r.v_)(s.stats.activeGoals),3),(0,o.Lk)("p",{class:(0,r.C4)([s.themeClasses.secondaryText,"text-sm font-medium"])},(0,r.v_)(s.stats.completedGoals)+" completed this month",3)]))],2),(0,o.Lk)("div",{class:(0,r.C4)([s.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Ms,[(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-semibold",s.themeClasses.text])},"Study Streak",2),(0,o.bF)(i,{icon:["fas","fire"],class:"text-orange-500 text-xl"})]),s.loading?((0,o.uX)(),(0,o.CE)("div",js,[(0,o.Lk)("div",{class:(0,r.C4)(["h-8 rounded mb-2",s.themeClasses.card])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["h-4 rounded w-3/4",s.themeClasses.card])},null,2)])):((0,o.uX)(),(0,o.CE)("div",Ks,[(0,o.Lk)("p",{class:(0,r.C4)(["text-3xl font-bold",s.themeClasses.text])},(0,r.v_)(s.stats.studyStreak),3),(0,o.Lk)("p",{class:(0,r.C4)([s.themeClasses.secondaryText,"text-sm font-medium"])},"days in a row",2)]))],2)])}var Xs={name:"StatisticsCard",props:{stats:{type:Object,required:!0},loading:{type:Boolean,default:!1},themeClasses:{type:Object,required:!0}},mounted(){console.log("🔍 DEBUG: Statistics component mounted"),console.log("🔍 DEBUG: Statistics props.stats:",this.stats),console.log("🔍 DEBUG: Statistics goals - activeGoals:",this.stats.activeGoals,"completedGoals:",this.stats.completedGoals)},watch:{stats:{handler(e){console.log("🔍 DEBUG: Statistics stats changed:",e),console.log("🔍 DEBUG: Statistics goals updated - activeGoals:",e.activeGoals,"completedGoals:",e.completedGoals)},deep:!0}}};const Vs=(0,c.A)(Xs,[["render",Ws]]);var Bs=Vs,Hs={name:"DashboardView",components:{CameraModal:Jt,Header:Is,StatisticsCard:Bs},setup(){const e=(0,g.rd)(),t=(0,n.Pj)(),s=(0,pe.KR)(null),a=(0,pe.KR)(null),r=(0,pe.KR)(!1),l=(0,pe.KR)(!1),i=(0,pe.KR)(!1),c=(0,pe.KR)(!0),d=(0,pe.KR)("connected"),u=(0,pe.KR)(new Date),{showSuccess:m,showInfo:p,showWarning:b}=ft(),{user:f,loading:y,loadUserProfile:h,getProfilePictureUrl:x}=Lt(),v=(0,o.EW)((()=>s.value?.data?s.value.data.slice(0,3).map((e=>{const t=new Date(e.created_at),s=e.original_text?e.original_text.substring(0,100)+(e.original_text.length>100?"...":""):"No content";return{id:e.id,title:e.title||"Untitled Note",summary:s,date:t.toLocaleDateString(),createdAt:t,timestamp:t.getTime(),tags:[],wordCount:Y(s),readingTime:ee(s)}})):[])),k=(0,o.EW)((()=>R.value.trim().length>0||N.value)),w=(0,o.EW)((()=>{if(!a.value?.data)return{totalNotes:0,notesThisWeek:0,studyHours:0,studyHoursThisWeek:0,quizAverage:0,quizzesCompleted:0,activeGoals:0,completedGoals:0,studyStreak:0,avgSessionDuration:0,longestSession:0,totalNotesStudied:0,totalQuizzesTaken:0};const e=a.value.data,t={totalNotes:e.totalNotes||0,notesThisWeek:e.notesThisWeek||0,studyHours:e.studyHours||0,studyHoursThisWeek:e.studyHoursThisWeek||0,quizAverage:e.quizAverage||0,quizzesCompleted:e.quizzesCompleted||0,activeGoals:e.activeGoals||0,completedGoals:e.completedGoals||0,studyStreak:e.studyStreak||0,avgSessionDuration:e.avgSessionDuration||0,longestSession:e.longestSession||0,totalNotesStudied:e.totalNotesStudied||0,totalQuizzesTaken:e.totalQuizzesTaken||0};return t})),C=f,L=(0,o.EW)((()=>{try{if(!t||!t.getters)return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"};const e=t.getters["app/getThemeClasses"];return e&&"object"===typeof e?e:{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}catch(e){return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}})),S=(0,o.EW)((()=>{try{return t.getters["app/getFontSizeClasses"]}catch(e){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}})),T=(0,pe.KR)(!1),E=(0,pe.KR)(""),N=(0,pe.KR)(!1),_=(0,pe.KR)(!1),A=(0,pe.KR)(!1),z=(0,pe.KR)(!1),I=(0,pe.KR)(""),F=(0,pe.KR)(null),R=(0,pe.KR)(""),P=(0,pe.KR)(!1),D=(0,pe.KR)(!1),Q=(0,pe.KR)(null),U=(0,pe.KR)(!1),O=async e=>{try{const t=new FormData;t.append("profile_picture",e);const s=await vt.uploadProfilePicture(t);return s.data.success?(await B(),{success:!0,message:s.data.message}):{success:!1,message:s.data.error}}catch(t){return{success:!1,message:"Network error"}}},G=async e=>{const t=e.target.files[0];if(!t)return;const s=["image/jpeg","image/png","image/gif","image/webp"];if(!s.includes(t.type))return void b("Invalid file type","Please select a valid image file (JPEG, PNG, GIF, or WebP)");const a=5242880;if(t.size>a)b("File too large","File size must be less than 5MB");else{try{const e=await O(t);e.success?m("Profile picture updated",e.message):b("Upload failed",e.message)}catch(o){b("Upload error","Network error occurred")}e.target.value=""}},$=()=>{e.push("/notes/edit")},q=()=>{e.push("/settings")},M=()=>{R.value.trim()&&(F.value={type:"quick_note",content:R.value.trim()},z.value=!0,I.value="")},j=()=>{R.value=""},K=async()=>{try{r.value=!0;const e=await vt.getNotes();s.value=e.data}catch(e){}finally{r.value=!1}},W=async()=>{try{console.log("🔍 DEBUG: Starting fetchStats..."),i.value=!0;const e=await vt.getDashboardStats();console.log("🔍 DEBUG: fetchStats response:",e),console.log("🔍 DEBUG: fetchStats response.data:",e.data),e.data&&e.data.data&&console.log("🔍 DEBUG: Goals stats - activeGoals:",e.data.data.activeGoals,"completedGoals:",e.data.data.completedGoals),a.value=e.data,console.log("🔍 DEBUG: statsResponse.value set to:",a.value)}catch(e){console.error("❌ DEBUG: Error fetching dashboard stats:",e),console.error("❌ DEBUG: Error details:",e.response?.data||e.message)}finally{i.value=!1,console.log("🔍 DEBUG: fetchStats completed")}},X=async()=>{await K()},V=async()=>{await W()},B=async()=>{await h()},H=()=>{},Z=()=>{},J=e=>{try{const t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return"Invalid date";const s=new Date,a=Math.floor((s-t)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)} minutes ago`:a<86400?`${Math.floor(a/3600)} hours ago`:a<604800?`${Math.floor(a/86400)} days ago`:t.toLocaleDateString()}catch(t){return"Date error"}},Y=e=>e&&"string"===typeof e?e.trim().split(/\s+/).filter((e=>e.length>0)).length:0,ee=e=>{const t=200,s=Y(e),a=Math.ceil(s/t);return Math.max(1,a)};(0,o.sV)((async()=>{await Promise.all([K(),W(),h()]),setTimeout((()=>{m("Welcome to SmartScribe!","Your dashboard is ready.")}),1e3)}));const te=()=>{T.value=!0},se=()=>{T.value=!1},ae=()=>{U.value=!0},oe=()=>{U.value=!1},re=e=>{F.value=e,z.value=!0,I.value=""},le=async e=>{const t=e.target.files[0];if(!t)return;const s=5242880;if(t.size>s)return void alert("File is too large!");const a=["image/jpeg","image/png","image/gif","image/webp"];if(a.includes(t.type)){N.value=!0;try{const{data:{text:e}}=await bt().recognize(t,"eng",{logger:()=>{}});E.value=e,F.value={type:"upload",file:t,text:e},z.value=!0,I.value=""}catch(o){alert("Error processing file. Please try again.")}finally{N.value=!1}e.target.value=""}else alert("Only JPG, PNG, GIF, and WebP images are allowed!")},ne=async()=>{if(I.value.trim())if(_.value)console.log("⚠️ Save already in progress, ignoring duplicate save request");else try{let t;if("quick_note"===F.value.type)t={title:I.value.trim(),text:F.value.content};else if(t={title:I.value.trim(),text:"upload"===F.value.type?F.value.text:F.value.data,..."upload"===F.value.type&&F.value.file&&{image:F.value.file}},t.image&&!(t.image instanceof File))return void b("File upload error","Invalid file object");_.value=!0;try{const e=await vt.createNote(t);if(!e.data.success)throw new Error(e.data.error||"Failed to save note");m("Note saved","Your note has been created successfully."),await Promise.all([X(),V()]),"quick_note"===F.value.type&&(R.value="")}catch(e){console.error("Error saving note:",e),b("Save failed","Failed to save the note. Please try again.")}z.value=!1,I.value="",F.value=null,E.value=""}catch(e){b("Save error","An error occurred while saving the note.")}finally{_.value=!1}},ie=()=>{z.value=!1,I.value="",F.value=null,E.value=""},ce=()=>{A.value=!0,setTimeout((()=>{A.value=!1}),3e3)},de=t=>{e.push(`/notes/${t}`)},ue=t=>{e.push(`/notes/edit?id=${t}`)},ge=(e,t)=>{Q.value={id:e,title:t},D.value=!0},me=()=>{D.value=!1,Q.value=null},be=async()=>{if(Q.value){try{await vt.deleteNote(Q.value.id),v.value=v.value.filter((e=>e.id!==Q.value.id)),await X()}catch(e){}me()}};return{showProfileModal:T,showSaveConfirmation:A,showTitleModal:z,noteTitle:I,pendingImageData:F,showDeleteModal:D,noteToDelete:Q,isProcessingFile:N,isSavingNote:_,showCameraModal:U,quickNoteContent:R,isCreatingQuickNote:P,user:C,recentNotes:v,stats:w,canCreateNote:k,loadingNotes:r,loadingStats:l,loadingDashboard:i,loadingUser:y,isConnected:c,connectionStatus:d,lastSync:u,openProfileModal:te,closeProfileModal:se,openCamera:ae,closeCameraModal:oe,handlePhotoCaptured:re,handleFileUpload:le,handleProfilePictureUpload:G,saveNoteWithTitle:ne,cancelTitleInput:ie,showConfirmation:ce,viewNote:de,editNote:ue,confirmDelete:ge,closeDeleteModal:me,deleteNote:be,createNewNote:$,openSettings:q,createQuickNote:M,clearQuickNote:j,getProfilePictureUrl:x,handleImageError:H,handleImageLoad:Z,showSuccess:m,showInfo:p,showWarning:b,refreshNotes:X,refreshStats:V,refreshUser:B,loadUserProfile:h,getTimeAgo:J,getWordCount:Y,getReadingTime:ee,ocrText:E,themeClasses:L,fontSizeClasses:S,store:t}}};const Zs=(0,c.A)(Hs,[["render",mt]]);var Js=Zs;const Ys={class:"min-h-screen flex flex-col"},ea={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8"},ta={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-md border border-gray-700"},sa={class:"flex justify-center mb-8"},aa={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full overflow-hidden flex items-center justify-center shadow-xl"},oa=["src"],ra={key:0,class:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6"},la={class:"flex items-center"},na={class:"space-y-2"},ia={class:"space-y-2"},ca={class:"space-y-2"},da={class:"relative"},ua={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ga={class:"space-y-2"},ma={class:"relative"},pa={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ba=["type"],fa={class:"space-y-2"},ya={class:"relative"},ha={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},xa=["type"],va=["disabled"],ka={key:0,class:"flex items-center justify-center"},wa={key:1,class:"flex items-center justify-center"},Ca={class:"grid grid-cols-3 gap-3 mb-8"},La=["disabled"],Sa={class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200"},Ta={class:"text-center"},Ea={class:"text-gray-400 text-sm"},Na={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},_a={class:"bg-white text-gray-800 rounded-xl p-6 w-full max-w-sm shadow-xl transform transition-all scale-100"},Aa={class:"flex justify-center mb-4"},za={class:"bg-green-100 text-green-600 w-16 h-16 flex items-center justify-center rounded-full"};function Ia(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link"),u=(0,o.g2)("AppFooter");return(0,o.uX)(),(0,o.CE)("div",Ys,[(0,o.Lk)("main",ea,[(0,o.Lk)("div",ta,[(0,o.Lk)("div",sa,[(0,o.Lk)("div",aa,[(0,o.Lk)("img",{src:l.logo,alt:"SmartScribe Logo",class:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-full"},null,8,oa)])]),t[21]||(t[21]=(0,o.Lk)("div",{class:"text-center mb-8"},[(0,o.Lk)("h1",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Create Your Account"),(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base"},"Sign up for SmartScribe to start digitizing your notes")],-1)),l.errorMessage?((0,o.uX)(),(0,o.CE)("div",ra,[(0,o.Lk)("div",la,[(0,o.bF)(c,{icon:["fas","exclamation-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>l.handleSignup&&l.handleSignup(...e)),["prevent"])),class:"space-y-6"},[(0,o.Lk)("div",na,[t[10]||(t[10]=(0,o.Lk)("label",{for:"firstName",class:"block text-sm font-medium text-gray-300"}," First Name ",-1)),(0,o.bo)((0,o.Lk)("input",{id:"firstName",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),placeholder:"Enter your first name",class:"w-full px-4 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,512),[[a.Jo,l.firstName]])]),(0,o.Lk)("div",ia,[t[11]||(t[11]=(0,o.Lk)("label",{for:"lastName",class:"block text-sm font-medium text-gray-300"}," Last Name ",-1)),(0,o.bo)((0,o.Lk)("input",{id:"lastName",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),placeholder:"Enter your last name",class:"w-full px-4 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,512),[[a.Jo,l.lastName]])]),(0,o.Lk)("div",ca,[t[12]||(t[12]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-300"}," Email Address ",-1)),(0,o.Lk)("div",da,[(0,o.Lk)("div",ua,[(0,o.bF)(c,{icon:["fas","envelope"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>l.email=e),placeholder:"Enter your email",class:"w-full pl-10 pr-4 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,512),[[a.Jo,l.email]])])]),(0,o.Lk)("div",ga,[t[13]||(t[13]=(0,o.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-300"}," Password ",-1)),(0,o.Lk)("div",ma,[(0,o.Lk)("div",pa,[(0,o.bF)(c,{icon:["fas","lock"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"password",ref:"passwordInput",type:l.passwordVisible?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>l.password=e),placeholder:"Enter your password",class:"w-full pl-10 pr-12 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,8,ba),[[a.hp,l.password]]),(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>l.passwordVisible=!l.passwordVisible),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300 transition-colors"},[(0,o.bF)(c,{icon:["fas",l.passwordVisible?"eye-slash":"eye"],class:"text-sm"},null,8,["icon"])])])]),(0,o.Lk)("div",fa,[t[14]||(t[14]=(0,o.Lk)("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-300"}," Confirm Password ",-1)),(0,o.Lk)("div",ya,[(0,o.Lk)("div",ha,[(0,o.bF)(c,{icon:["fas","lock"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"confirmPassword",ref:"confirmPasswordInput",type:l.confirmPasswordVisible?"text":"password","onUpdate:modelValue":t[5]||(t[5]=e=>l.confirmPassword=e),placeholder:"Confirm your password",class:"w-full pl-10 pr-12 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,8,xa),[[a.hp,l.confirmPassword]]),(0,o.Lk)("button",{type:"button",onClick:t[6]||(t[6]=e=>l.confirmPasswordVisible=!l.confirmPasswordVisible),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300 transition-colors"},[(0,o.bF)(c,{icon:["fas",l.confirmPasswordVisible?"eye-slash":"eye"],class:"text-sm"},null,8,["icon"])])])]),(0,o.Lk)("button",{type:"submit",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:l.isLoading},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",ka,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[15]||(t[15]=(0,o.eW)(" Creating account... "))])):((0,o.uX)(),(0,o.CE)("span",wa,[(0,o.bF)(c,{icon:["fas","user-plus"],class:"mr-2"}),t[16]||(t[16]=(0,o.eW)(" Create Account "))]))],8,va)],32),t[22]||(t[22]=(0,o.Fv)('<div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-gray-800 text-gray-400">Or continue with</span></div></div>',1)),(0,o.Lk)("div",Ca,[(0,o.Lk)("button",{id:"google-signup-btn",onClick:t[8]||(t[8]=(...e)=>l.handleGoogleSignup&&l.handleGoogleSignup(...e)),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200"},[(0,o.bF)(c,{icon:["fab","google"],class:"text-red-400 text-lg"})]),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.handleFacebookSignup&&l.handleFacebookSignup(...e)),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors duration-200",disabled:l.isLoading},[(0,o.bF)(c,{icon:["fab","facebook-f"],class:"text-blue-400 text-lg"})],8,La),(0,o.Lk)("button",Sa,[(0,o.bF)(c,{icon:["fab","apple"],class:"text-gray-300 text-lg"})])]),(0,o.Lk)("div",Ta,[(0,o.Lk)("p",Ea,[t[18]||(t[18]=(0,o.eW)(" Already have an account? ")),(0,o.bF)(d,{to:"/login",class:"text-blue-400 hover:text-blue-300 font-medium hover:underline transition-colors"},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)(" Sign in here ")]))),_:1,__:[17]})])]),(0,o.bF)(a.eB,{name:"fade"},{default:(0,o.k6)((()=>[l.showSuccessModal?((0,o.uX)(),(0,o.CE)("div",Na,[(0,o.Lk)("div",_a,[(0,o.Lk)("div",Aa,[(0,o.Lk)("div",za,[(0,o.bF)(c,{icon:["fas","check-circle"],class:"text-3xl"})])]),t[19]||(t[19]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-center mb-2"},"Account Created!",-1)),t[20]||(t[20]=(0,o.Lk)("p",{class:"text-center mb-4"},"Your account was created successfully. You can now log in.",-1))])])):(0,o.Q3)("",!0)])),_:1})])]),(0,o.bF)(u,{links:l.footerLinks,copyright:l.copyrightText},null,8,["links","copyright"])])}var Fa={name:"SignupView",components:{AppFooter:P},setup(){const e=(0,g.rd)(),t=(0,n.Pj)(),s=(0,pe.KR)(""),a=(0,pe.KR)(""),o=(0,pe.KR)(""),r=(0,pe.KR)(""),l=(0,pe.KR)(""),i=(0,pe.KR)(!1),c=(0,pe.KR)(""),d=(0,pe.KR)(!1),u=(0,pe.KR)(!1),m=(0,pe.KR)(!1),p=(0,pe.KR)(null),b=(0,pe.KR)(null),f=[{text:"Privacy Policy",href:"#"},{text:"Terms of Service",href:"#"},{text:"Help Center",href:"#"}],y="© 2025 SmartScribe. All rights reserved.",h=()=>{d.value=!1,e.push("/login")},x=e=>{"passwordInput"===e?u.value=!u.value:"confirmPasswordInput"===e&&(m.value=!m.value)},v=async()=>{try{if(console.log("🔐 Attempting Google signup with Google Identity Services"),i.value=!0,c.value="",!window.google||!window.google.accounts)return c.value="Google Sign-In is not available. Please refresh the page and try again.",void(i.value=!1);const s="your_vue_app_google_oauth_client_id";if("your_production_google_oauth_client_id"===s)return c.value="Google OAuth client ID not configured. Please check your environment variables.",void(i.value=!1);const a=window.google.accounts.oauth2.initTokenClient({client_id:s,scope:"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",callback:async s=>{if(s.error)return console.error("❌ Google OAuth error:",s),c.value="Google signup failed. Please try again.",void(i.value=!1);try{console.log("🔐 Google OAuth successful, sending to backend"),console.log("🔐 Access token length:",s.access_token.length),await t.dispatch("auth/googleLogin",s.access_token),console.log("🔐 Google signup successful - Redirecting to dashboard"),e.push("/dashboard")}catch(a){console.error("❌ Backend Google signup failed:",a),c.value=a.message||"Failed to create account with Google. Please try again."}finally{i.value=!1}}});a.requestAccessToken()}catch(s){console.error("❌ Google signup failed:",s),c.value=s.message||"Google signup failed. Please try again.",i.value=!1}},k=async()=>{try{console.log("🔐 Attempting Facebook signup"),i.value=!0,c.value="",alert("Facebook signup is not currently supported. Please use email/password registration.")}catch(e){console.error("❌ Facebook signup failed:",e),c.value=e.message||"Facebook signup failed. Please try again.",i.value=!1}},w=async()=>{try{if(r.value!==l.value)return void(c.value="Passwords do not match");i.value=!0,c.value="",await t.dispatch("auth/register",{first_name:s.value,last_name:a.value,name:`${s.value} ${a.value}`,email:o.value,password:r.value}),console.log("✅ Registration successful - Showing success modal"),d.value=!0,setTimeout((()=>{h()}),2500)}catch(e){console.error("❌ Registration failed:",e.message),c.value=e.message||"Failed to create account. Please try again."}finally{i.value=!1}};return{firstName:s,lastName:a,email:o,password:r,confirmPassword:l,isLoading:i,errorMessage:c,handleSignup:w,passwordInput:p,confirmPasswordInput:b,togglePasswordField:x,showSuccessModal:d,redirectToLogin:h,logo:me,passwordVisible:u,confirmPasswordVisible:m,handleGoogleSignup:v,handleFacebookSignup:k,footerLinks:f,copyrightText:y}}};const Ra=(0,c.A)(Fa,[["render",Ia]]);var Pa=Ra;const Da={class:"min-h-screen flex flex-col bg-gray-900 text-white overflow-x-hidden"},Qa={class:"p-6 flex justify-between items-center"},Ua={class:"flex space-x-3"},Oa={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8",style:{"min-height":"calc(100vh - 200px)"}},Ga={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-md border border-gray-700"},$a={class:"flex justify-center mb-8"},qa={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full overflow-hidden flex items-center justify-center shadow-xl"},Ma=["src"],ja={key:0,class:"bg-green-900 border border-green-700 text-green-200 px-4 py-3 rounded-lg mb-6"},Ka={class:"flex items-center"},Wa={key:1,class:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6"},Xa={class:"flex items-center"},Va={class:"space-y-2"},Ba={class:"relative"},Ha={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Za=["disabled"],Ja={key:0,class:"flex items-center justify-center"},Ya={key:1,class:"flex items-center justify-center"},eo={key:3,class:"text-center space-y-6"},to={class:"bg-green-900/20 border border-green-700/50 rounded-lg p-6"},so={class:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4"},ao={class:"text-gray-400 text-sm mb-4"},oo={key:0,class:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4 mb-4"},ro=["href"],lo=["disabled"],no={key:0,class:"flex items-center justify-center"},io={key:1,class:"flex items-center justify-center"},co={class:"text-center mt-8"};function uo(e,t,s,l,n,i){const c=(0,o.g2)("router-link"),d=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",Da,[(0,o.Lk)("header",Qa,[(0,o.bF)(c,{to:"/",class:"text-xl sm:text-2xl font-bold text-white hover:text-blue-400 transition-colors"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)(" SmartScribe ")]))),_:1,__:[3]}),(0,o.Lk)("div",Ua,[(0,o.bF)(c,{to:"/contact",class:"px-4 py-2 text-sm sm:text-base text-gray-400 hover:text-white transition-colors"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)(" Contact ")]))),_:1,__:[4]}),(0,o.bF)(c,{to:"/login",class:"px-4 py-2 text-sm sm:text-base bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)(" Sign In ")]))),_:1,__:[5]})])]),(0,o.Lk)("main",Oa,[(0,o.Lk)("div",Ga,[(0,o.Lk)("div",$a,[(0,o.Lk)("div",qa,[(0,o.Lk)("img",{src:l.logo,alt:"SmartScribe Logo",class:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-full"},null,8,Ma)])]),t[16]||(t[16]=(0,o.Lk)("div",{class:"text-center mb-8"},[(0,o.Lk)("h1",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Reset Your Password"),(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base"},"Enter your email address and we'll send you a link to reset your password")],-1)),l.successMessage?((0,o.uX)(),(0,o.CE)("div",ja,[(0,o.Lk)("div",Ka,[(0,o.bF)(d,{icon:["fas","check-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.successMessage),1)])])):(0,o.Q3)("",!0),l.errorMessage?((0,o.uX)(),(0,o.CE)("div",Wa,[(0,o.Lk)("div",Xa,[(0,o.bF)(d,{icon:["fas","exclamation-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.errorMessage),1)])])):(0,o.Q3)("",!0),l.emailSent?((0,o.uX)(),(0,o.CE)("div",eo,[(0,o.Lk)("div",to,[(0,o.Lk)("div",so,[(0,o.bF)(d,{icon:["fas","check-circle"],class:"text-white text-2xl"})]),t[11]||(t[11]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-white mb-2"},"Check Your Email",-1)),(0,o.Lk)("p",ao,[t[9]||(t[9]=(0,o.eW)(" We've sent a password reset link to ")),(0,o.Lk)("strong",null,(0,r.v_)(l.email),1)]),l.resetLink?((0,o.uX)(),(0,o.CE)("div",oo,[t[10]||(t[10]=(0,o.Lk)("p",{class:"text-blue-300 text-sm mb-2"},"Development Mode - Click the link below:",-1)),(0,o.Lk)("a",{href:l.resetLink,target:"_blank",class:"text-blue-400 hover:text-blue-300 underline text-sm break-all"},(0,r.v_)(l.resetLink),9,ro)])):(0,o.Q3)("",!0),t[12]||(t[12]=(0,o.Lk)("p",{class:"text-gray-500 text-xs"}," The link will expire in 1 hour. If you don't see it, check your spam folder. ",-1))]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.handlePasswordReset&&l.handlePasswordReset(...e)),class:"w-full bg-gray-700 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200",disabled:l.isLoading},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",no,[(0,o.bF)(d,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[13]||(t[13]=(0,o.eW)(" Resending... "))])):((0,o.uX)(),(0,o.CE)("span",io,[(0,o.bF)(d,{icon:["fas","redo"],class:"mr-2"}),t[14]||(t[14]=(0,o.eW)(" Resend Reset Link "))]))],8,lo)])):((0,o.uX)(),(0,o.CE)("form",{key:2,onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>l.handlePasswordReset&&l.handlePasswordReset(...e)),["prevent"])),class:"space-y-6"},[(0,o.Lk)("div",Va,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-300"}," Email Address ",-1)),(0,o.Lk)("div",Ba,[(0,o.Lk)("div",Ha,[(0,o.bF)(d,{icon:["fas","envelope"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),placeholder:"Enter your email",class:"w-full pl-10 pr-4 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:""},null,512),[[a.Jo,l.email]])])]),(0,o.Lk)("button",{type:"submit",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:l.isLoading},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",Ja,[(0,o.bF)(d,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[7]||(t[7]=(0,o.eW)(" Sending Reset Link... "))])):((0,o.uX)(),(0,o.CE)("span",Ya,[(0,o.bF)(d,{icon:["fas","paper-plane"],class:"mr-2"}),t[8]||(t[8]=(0,o.eW)(" Send Reset Link "))]))],8,Za)],32)),(0,o.Lk)("div",co,[(0,o.bF)(c,{to:"/login",class:"text-blue-400 hover:text-blue-300 font-medium hover:underline transition-colors"},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" ← Back to Sign In ")]))),_:1,__:[15]})])])]),t[17]||(t[17]=(0,o.Fv)('<footer class="p-6 text-center text-gray-400 text-sm"><div class="flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-6"><a href="#" class="hover:text-gray-300 transition-colors">Privacy Policy</a><a href="#" class="hover:text-gray-300 transition-colors">Terms of Service</a><a href="#" class="hover:text-gray-300 transition-colors">Help Center</a></div><div class="mt-4 text-gray-500"> © 2025 SmartScribe. All rights reserved. </div></footer>',1))])}var go={name:"ForgotPasswordView",setup(){const e=(0,pe.KR)(""),t=(0,pe.KR)(!1),s=(0,pe.KR)(""),a=(0,pe.KR)(""),o=(0,pe.KR)(!1),r=(0,pe.KR)(""),l=async()=>{try{t.value=!0,s.value="",a.value="";const l=await vt.requestPasswordReset(e.value);a.value=l.data.message,o.value=!0,l.data.reset_link&&(r.value=l.data.reset_link,console.log("🔗 Password Reset Link (Development):",l.data.reset_link))}catch(l){console.error("❌ Password reset request failed:",l),s.value=l.response?.data?.error||l.response?.data?.message||"Failed to send reset link. Please try again."}finally{t.value=!1}};return{email:e,isLoading:t,errorMessage:s,successMessage:a,emailSent:o,resetLink:r,handlePasswordReset:l,logo:me}}};const mo=(0,c.A)(go,[["render",uo]]);var po=mo;const bo={class:"min-h-screen flex flex-col bg-gray-900 text-white overflow-x-hidden"},fo={class:"p-6 flex justify-between items-center"},yo={class:"flex space-x-3"},ho={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8",style:{"min-height":"calc(100vh - 200px)"}},xo={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-md border border-gray-700"},vo={class:"flex justify-center mb-8"},ko={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full overflow-hidden flex items-center justify-center shadow-xl"},wo=["src"],Co={key:0,class:"text-center"},Lo={key:1,class:"text-center"},So={class:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4"},To={key:2},Eo={key:0,class:"bg-green-900 border border-green-700 text-green-200 px-4 py-3 rounded-lg mb-6"},No={class:"flex items-center"},_o={key:1,class:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6"},Ao={class:"flex items-center"},zo={class:"bg-gray-700/50 rounded-lg p-4 mb-6"},Io={class:"flex items-center space-x-3"},Fo={class:"text-white font-medium"},Ro={class:"space-y-2"},Po={class:"relative"},Do={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Qo=["type"],Uo={class:"space-y-2"},Oo={class:"relative"},Go={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},$o=["type"],qo={class:"text-xs text-gray-400 space-y-1"},Mo={class:"list-disc list-inside space-y-1 ml-2"},jo=["disabled"],Ko={key:0,class:"flex items-center justify-center"},Wo={key:1,class:"flex items-center justify-center"},Xo={key:2,class:"text-center mt-8"},Vo={class:"bg-green-900/20 border border-green-700/50 rounded-lg p-6"},Bo={class:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4"};function Ho(e,t,s,l,n,i){const c=(0,o.g2)("router-link"),d=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",bo,[(0,o.Lk)("header",fo,[(0,o.bF)(c,{to:"/",class:"text-xl sm:text-2xl font-bold text-white hover:text-blue-400 transition-colors"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)(" SmartScribe ")]))),_:1,__:[5]}),(0,o.Lk)("div",yo,[(0,o.bF)(c,{to:"/contact",class:"px-4 py-2 text-sm sm:text-base text-gray-400 hover:text-white transition-colors"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)(" Contact ")]))),_:1,__:[6]}),(0,o.bF)(c,{to:"/login",class:"px-4 py-2 text-sm sm:text-base bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" Sign In ")]))),_:1,__:[7]})])]),(0,o.Lk)("main",ho,[(0,o.Lk)("div",xo,[(0,o.Lk)("div",vo,[(0,o.Lk)("div",ko,[(0,o.Lk)("img",{src:l.logo,alt:"SmartScribe Logo",class:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-full"},null,8,wo)])]),l.isValidating?((0,o.uX)(),(0,o.CE)("div",Co,t[8]||(t[8]=[(0,o.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"},null,-1),(0,o.Lk)("p",{class:"text-gray-400"},"Validating reset token...",-1)]))):l.isValidToken?((0,o.uX)(),(0,o.CE)("div",To,[t[21]||(t[21]=(0,o.Lk)("div",{class:"text-center mb-8"},[(0,o.Lk)("h1",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Set New Password"),(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base"},"Enter your new password below")],-1)),l.successMessage?((0,o.uX)(),(0,o.CE)("div",Eo,[(0,o.Lk)("div",No,[(0,o.bF)(d,{icon:["fas","check-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.successMessage),1)])])):(0,o.Q3)("",!0),l.errorMessage?((0,o.uX)(),(0,o.CE)("div",_o,[(0,o.Lk)("div",Ao,[(0,o.bF)(d,{icon:["fas","exclamation-circle"],class:"mr-2"}),(0,o.Lk)("span",null,(0,r.v_)(l.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.handlePasswordReset&&l.handlePasswordReset(...e)),["prevent"])),class:"space-y-6"},[(0,o.Lk)("div",zo,[(0,o.Lk)("div",Io,[(0,o.bF)(d,{icon:["fas","envelope"],class:"text-gray-400"}),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("p",{class:"text-sm text-gray-400"},"Resetting password for:",-1)),(0,o.Lk)("p",Fo,(0,r.v_)(l.userEmail),1)])])]),(0,o.Lk)("div",Ro,[t[13]||(t[13]=(0,o.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-300"}," New Password ",-1)),(0,o.Lk)("div",Po,[(0,o.Lk)("div",Do,[(0,o.bF)(d,{icon:["fas","lock"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"password",ref:"passwordInput",type:l.passwordVisible?"text":"password","onUpdate:modelValue":t[0]||(t[0]=e=>l.password=e),placeholder:"Enter new password",class:"w-full pl-10 pr-12 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:"",minlength:"6"},null,8,Qo),[[a.hp,l.password]]),(0,o.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>l.passwordVisible=!l.passwordVisible),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300 transition-colors"},[(0,o.bF)(d,{icon:["fas",l.passwordVisible?"eye-slash":"eye"],class:"text-sm"},null,8,["icon"])])])]),(0,o.Lk)("div",Uo,[t[14]||(t[14]=(0,o.Lk)("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-300"}," Confirm New Password ",-1)),(0,o.Lk)("div",Oo,[(0,o.Lk)("div",Go,[(0,o.bF)(d,{icon:["fas","lock"],class:"text-gray-500 text-sm"})]),(0,o.bo)((0,o.Lk)("input",{id:"confirmPassword",ref:"confirmPasswordInput",type:l.confirmPasswordVisible?"text":"password","onUpdate:modelValue":t[2]||(t[2]=e=>l.confirmPassword=e),placeholder:"Confirm new password",class:"w-full pl-10 pr-12 py-3 text-sm sm:text-base border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-700 text-white placeholder-gray-400 focus:bg-gray-600",required:"",minlength:"6"},null,8,$o),[[a.hp,l.confirmPassword]]),(0,o.Lk)("button",{type:"button",onClick:t[3]||(t[3]=e=>l.confirmPasswordVisible=!l.confirmPasswordVisible),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300 transition-colors"},[(0,o.bF)(d,{icon:["fas",l.confirmPasswordVisible?"eye-slash":"eye"],class:"text-sm"},null,8,["icon"])])])]),(0,o.Lk)("div",qo,[t[15]||(t[15]=(0,o.Lk)("p",null,"Password requirements:",-1)),(0,o.Lk)("ul",Mo,[(0,o.Lk)("li",{class:(0,r.C4)(l.password.length>=6?"text-green-400":"")},"At least 6 characters",2),(0,o.Lk)("li",{class:(0,r.C4)(l.password===l.confirmPassword&&l.password.length>0?"text-green-400":"")},"Passwords must match",2)])]),(0,o.Lk)("button",{type:"submit",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:l.isLoading||!l.isFormValid},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",Ko,[(0,o.bF)(d,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[16]||(t[16]=(0,o.eW)(" Resetting Password... "))])):((0,o.uX)(),(0,o.CE)("span",Wo,[(0,o.bF)(d,{icon:["fas","key"],class:"mr-2"}),t[17]||(t[17]=(0,o.eW)(" Reset Password "))]))],8,jo)],32),l.passwordReset?((0,o.uX)(),(0,o.CE)("div",Xo,[(0,o.Lk)("div",Vo,[(0,o.Lk)("div",Bo,[(0,o.bF)(d,{icon:["fas","check-circle"],class:"text-white text-2xl"})]),t[19]||(t[19]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-white mb-2"},"Password Reset Successful!",-1)),t[20]||(t[20]=(0,o.Lk)("p",{class:"text-gray-400 text-sm mb-6"}," Your password has been successfully reset. You can now sign in with your new password. ",-1)),(0,o.bF)(c,{to:"/login",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 inline-block text-center"},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(" Sign In Now ")]))),_:1,__:[18]})])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Lo,[(0,o.Lk)("div",So,[(0,o.bF)(d,{icon:["fas","times-circle"],class:"text-white text-2xl"})]),t[10]||(t[10]=(0,o.Lk)("h1",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Invalid Reset Link",-1)),t[11]||(t[11]=(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base mb-6"}," This password reset link is invalid or has expired. Please request a new one. ",-1)),(0,o.bF)(c,{to:"/forgot-password",class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold text-sm sm:text-base hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 inline-block text-center"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)(" Request New Reset Link ")]))),_:1,__:[9]})]))])]),t[22]||(t[22]=(0,o.Fv)('<footer class="p-6 text-center text-gray-400 text-sm"><div class="flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-6"><a href="#" class="hover:text-gray-300 transition-colors">Privacy Policy</a><a href="#" class="hover:text-gray-300 transition-colors">Terms of Service</a><a href="#" class="hover:text-gray-300 transition-colors">Help Center</a></div><div class="mt-4 text-gray-500"> © 2025 SmartScribe. All rights reserved. </div></footer>',1))])}var Zo={name:"ResetPasswordView",setup(){const e=(0,g.rd)(),t=(0,g.lq)(),s=(0,pe.KR)(t.query.token||""),a=(0,pe.KR)(""),r=(0,pe.KR)(""),l=(0,pe.KR)(""),n=(0,pe.KR)(!1),i=(0,pe.KR)(!0),c=(0,pe.KR)(!1),d=(0,pe.KR)(""),u=(0,pe.KR)(""),m=(0,pe.KR)(!1),p=(0,pe.KR)(!1),b=(0,pe.KR)(!1),f=(0,pe.KR)(null),y=(0,pe.KR)(null),h=(0,o.EW)((()=>r.value.length>=6&&r.value===l.value&&!n.value)),x=async()=>{if(!s.value)return i.value=!1,void(c.value=!1);try{const e=await vt.validateResetToken(s.value);a.value=e.data.email,c.value=!0}catch(e){console.error("❌ Token validation failed:",e),c.value=!1}finally{i.value=!1}},v=async()=>{if(h.value)try{n.value=!0,d.value="",u.value="",await vt.resetPassword(s.value,r.value),u.value="Password reset successful! You can now sign in with your new password.",m.value=!0,setTimeout((()=>{e.push("/login")}),3e3)}catch(t){console.error("❌ Password reset failed:",t),d.value=t.response?.data?.error||t.response?.data?.message||"Failed to reset password. Please try again."}finally{n.value=!1}};return(0,o.sV)((()=>{x()})),{token:s,userEmail:a,password:r,confirmPassword:l,isLoading:n,isValidating:i,isValidToken:c,errorMessage:d,successMessage:u,passwordReset:m,passwordVisible:p,confirmPasswordVisible:b,passwordInput:f,confirmPasswordInput:y,isFormValid:h,handlePasswordReset:v,logo:me}}};const Jo=(0,c.A)(Zo,[["render",Ho]]);var Yo=Jo;const er={class:"flex justify-between items-center mb-6"},tr={class:"flex items-center space-x-4"},sr={class:"flex space-x-3"},ar={class:"relative"},or=["disabled"],rr={class:"flex mb-6 space-x-2"},lr={class:"mb-4"},nr={class:"flex justify-center space-x-3"},ir={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},cr=["onClick"],dr={class:"p-4"},ur={class:"flex justify-between items-start mb-2"},gr={class:"flex space-x-2"},mr=["onClick"],pr={class:"relative"},br=["onClick"],fr=["onClick"],yr=["onClick"],hr=["onClick"],xr={class:"flex flex-wrap gap-2"},vr={class:"mb-4"},kr={class:"flex justify-center space-x-4"},wr={class:"flex items-center mb-4"},Cr={class:"flex justify-end space-x-3"},Lr={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Sr={class:"flex items-center mb-4"},Tr={class:"flex flex-col items-center mb-6"},Er=["src"],Nr={class:"space-y-4"},_r={class:"flex justify-end space-x-3 mt-6"};function Ar(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(d,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("main",{class:"flex-1 p-4 md:p-6 transition-all duration-300 ease-in-out min-h-screen",style:(0,r.Tr)({backgroundColor:"dark"===l.store.getters["app/getCurrentTheme"]?"#111827":"#ffffff"})},[(0,o.Lk)("div",er,[(0,o.Lk)("div",tr,[(0,o.Lk)("h1",{class:(0,r.C4)(["font-bold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"My Notes",2)]),(0,o.Lk)("div",sr,[(0,o.Lk)("div",ar,[(0,o.Lk)("input",{type:"text",placeholder:"Search notes...",class:(0,r.C4)([l.themeClasses.input,"pl-10 pr-4 py-2 rounded-md focus:outline-none"])},null,2),(0,o.bF)(c,{icon:["fas","search"],class:(0,r.C4)([l.themeClasses.secondaryText,"absolute left-3 top-3"])},null,8,["class"])]),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.refreshNotes()),disabled:l.loadingNotes,class:(0,r.C4)([l.themeClasses.button,"flex items-center space-x-1 px-3 py-1 rounded-md transition disabled:opacity-50"])},[(0,o.bF)(c,{icon:["fas",l.loadingNotes?"spinner":"sync-alt"],class:(0,r.C4)([l.loadingNotes?"animate-spin":"","text-sm"])},null,8,["icon","class"])],10,or),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.openCamera&&l.openCamera(...e)),class:(0,r.C4)([l.themeClasses.buttonPrimary,"px-4 py-2 rounded-md transition"])},[(0,o.bF)(c,{icon:["fas","camera"],class:"mr-2"}),t[18]||(t[18]=(0,o.eW)(" Scan New "))],2)])]),(0,o.Lk)("div",rr,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>l.activeFilter="all"),class:(0,r.C4)(["px-3 py-1 rounded-md transition-colors","all"===l.activeFilter?l.themeClasses.buttonPrimary:l.themeClasses.button])}," All Notes ",2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>l.activeFilter="recent"),class:(0,r.C4)(["px-3 py-1 rounded-md transition-colors flex items-center space-x-1","recent"===l.activeFilter?l.themeClasses.buttonPrimary:l.themeClasses.button])},[(0,o.bF)(c,{icon:["fas","clock"],class:"text-xs"}),t[19]||(t[19]=(0,o.Lk)("span",null,"Recent",-1))],2),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>l.activeFilter="favorites"),class:(0,r.C4)(["px-3 py-1 rounded-md transition-colors flex items-center space-x-1","favorites"===l.activeFilter?l.themeClasses.buttonPrimary:l.themeClasses.button])},[(0,o.bF)(c,{icon:["fas","star"],class:"text-xs text-yellow-500"}),t[20]||(t[20]=(0,o.Lk)("span",null,"Favorites",-1))],2)]),l.notesError?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(["rounded-lg p-6 text-center","dark"===l.store.getters["app/getCurrentTheme"]?"bg-red-800":"bg-red-50 border border-red-200"])},[(0,o.Lk)("div",lr,[(0,o.bF)(c,{icon:["fas","times"],class:"text-4xl text-red-400"})]),(0,o.Lk)("h3",{class:(0,r.C4)(["text-xl font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Unable to Load Notes",2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-4","dark"===l.store.getters["app/getCurrentTheme"]?"text-red-300":"text-red-700"])},(0,r.v_)(l.notesError||"An error occurred while loading your notes."),3),(0,o.Lk)("div",nr,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>l.refreshNotes()),class:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 transition"},[(0,o.bF)(c,{icon:["fas","redo"],class:"mr-2"}),t[21]||(t[21]=(0,o.eW)(" Try Again "))]),(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>l.clearError()),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Dismiss ",2)])],2)):l.loadingNotes&&0===l.notes.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["text-center py-8","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},[(0,o.bF)(c,{icon:["fas","spinner"],class:"animate-spin text-3xl mb-3"}),t[22]||(t[22]=(0,o.Lk)("p",{class:"text-lg"},"Loading your notes...",-1))],2)):l.notes.length>0?((0,o.uX)(),(0,o.CE)("div",ir,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredNotes,(e=>((0,o.uX)(),(0,o.CE)("div",{key:`${e.id}-${e.isFavorite}-${e._lastUpdated||0}`,class:(0,r.C4)([l.themeClasses.card,"rounded-lg overflow-hidden transition cursor-pointer relative"]),onClick:t=>l.viewNote(e.id)},[(0,o.Lk)("div",dr,[(0,o.Lk)("div",ur,[(0,o.Lk)("h3",{class:(0,r.C4)([l.themeClasses.text,"font-medium"])},(0,r.v_)(e.title),3),(0,o.Lk)("div",gr,[(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.toggleFavorite(e.id)),["stop"]),class:(0,r.C4)([l.themeClasses.secondaryText,"hover:text-yellow-500 transition-colors"])},[(0,o.bF)(c,{icon:["fas","star"],class:(0,r.C4)(e.isFavorite?"text-yellow-500":l.themeClasses.secondaryText+" opacity-50")},null,8,["class"])],10,mr),(0,o.Lk)("div",pr,[(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.showNoteMenu(e.id)),["stop"]),class:(0,r.C4)([l.themeClasses.secondaryText,"p-2 rounded-md transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","dark"===l.store.getters["app/getCurrentTheme"]?"hover:text-white hover:bg-gray-700":"hover:text-gray-900 hover:bg-gray-200"])},[(0,o.bF)(c,{icon:["fas","ellipsis-v"]})],10,br),l.activeMenu===e.id?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([l.themeClasses.card,"absolute right-0 top-full mt-1 w-32 rounded-md shadow-lg z-10"]),onClick:t[7]||(t[7]=(0,a.D$)((()=>{}),["stop"]))},[(0,o.Lk)("button",{onClick:t=>l.editNote(e.id),class:(0,r.C4)([l.themeClasses.hover,"w-full text-left px-3 py-2 text-sm rounded-t-md flex items-center space-x-2"])},[(0,o.bF)(c,{icon:["fas","edit"],class:"text-xs"}),(0,o.Lk)("span",{class:(0,r.C4)(l.themeClasses.text)},"Edit",2)],10,fr),(0,o.Lk)("button",{onClick:t=>l.duplicateNote(e.id),class:(0,r.C4)([l.themeClasses.hover,"w-full text-left px-3 py-2 text-sm flex items-center space-x-2"])},[(0,o.bF)(c,{icon:["fas","copy"],class:"text-xs"}),(0,o.Lk)("span",{class:(0,r.C4)(l.themeClasses.text)},"Duplicate",2)],10,yr),(0,o.Lk)("button",{onClick:t=>l.confirmDelete(e.id),class:"w-full text-left px-3 py-2 text-sm text-red-400 hover:text-white hover:bg-red-600 rounded-b-md flex items-center space-x-2"},[(0,o.bF)(c,{icon:["fas","trash"],class:"text-xs"}),t[23]||(t[23]=(0,o.Lk)("span",null,"Delete",-1))],8,hr)],2)):(0,o.Q3)("",!0)])])]),(0,o.Lk)("p",{class:(0,r.C4)([l.themeClasses.secondaryText,"text-sm mb-2"])},(0,r.v_)("recent"===l.activeFilter&&Date.now()-e.timestamp<6048e5?l.getTimeAgo(e.createdAt):e.date),3),(0,o.Lk)("p",{class:(0,r.C4)([l.themeClasses.secondaryText,"text-sm line-clamp-3 mb-3"])},(0,r.v_)(e.original_text),3),(0,o.Lk)("div",xr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tags,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:(0,r.C4)([l.themeClasses.button,"px-2 py-1 rounded-full text-xs"])},(0,r.v_)(e),3)))),128))])])],10,cr)))),128))])):((0,o.uX)(),(0,o.CE)("div",{key:3,class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-8 text-center"])},[(0,o.Lk)("div",vr,[(0,o.bF)(c,{icon:["fas","book"],class:(0,r.C4)([l.themeClasses.secondaryText,"text-4xl"])},null,8,["class"])]),(0,o.Lk)("h3",{class:(0,r.C4)([l.themeClasses.text,l.fontSizeClasses.heading,"font-medium mb-2"])},"No Notes Yet",2),(0,o.Lk)("p",{class:(0,r.C4)([l.themeClasses.secondaryText,"mb-4"])},"Start by scanning your study materials or creating a new note.",2),(0,o.Lk)("div",kr,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.openCamera&&l.openCamera(...e)),class:(0,r.C4)([l.themeClasses.buttonPrimary,"px-4 py-2 rounded-md transition"])},[(0,o.bF)(c,{icon:["fas","camera"],class:"mr-2"}),t[24]||(t[24]=(0,o.eW)(" Scan Notes "))],2),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.createNewNote&&l.createNewNote(...e)),class:(0,r.C4)([l.themeClasses.button,"px-4 py-2 rounded-md transition"])},[(0,o.bF)(c,{icon:["fas","plus"],class:"mr-2"}),t[25]||(t[25]=(0,o.eW)(" Create New "))],2)])],2))],4),l.showDeleteModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[13]||(t[13]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e))},[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-sm mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"]),onClick:t[12]||(t[12]=(0,a.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",wr,[(0,o.bF)(c,{icon:["fas","times"],class:"text-red-400 text-xl mr-3"}),(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-medium","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Delete Note",2)]),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])}," Are you sure you want to delete this note? This action cannot be undone. ",2),(0,o.Lk)("div",Cr,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.deleteNote&&l.deleteNote(...e)),class:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 transition"}," Delete ")])],2)])):(0,o.Q3)("",!0),l.showProfileModal?((0,o.uX)(),(0,o.CE)("div",Lr,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-sm mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",Sr,[(0,o.bF)(c,{icon:["fas","user"],class:"text-blue-400 text-xl mr-3"}),(0,o.Lk)("h3",{class:(0,r.C4)(["text-lg font-medium","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"User Profile",2)]),(0,o.Lk)("div",Tr,[(0,o.Lk)("div",{class:(0,r.C4)(["w-24 h-24 rounded-full overflow-hidden mb-3","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-200"])},[l.user&&l.user.profilePicture?((0,o.uX)(),(0,o.CE)("img",{key:l.user.profilePicture,src:l.getProfilePictureUrl(l.user.profilePicture),alt:"Profile",class:"w-full h-full object-cover",onError:t[14]||(t[14]=(...e)=>l.handleImageError&&l.handleImageError(...e)),onLoad:t[15]||(t[15]=(...e)=>l.handleImageLoad&&l.handleImageLoad(...e))},null,40,Er)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["w-full h-full flex items-center justify-center","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-200"])},[(0,o.bF)(c,{icon:["fas","user"],class:(0,r.C4)(["text-2xl","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-600"])},null,8,["class"])],2))],2),(0,o.Lk)("p",{class:(0,r.C4)(["text-sm mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Profile picture can be changed in Settings",2)]),(0,o.Lk)("div",Nr,[(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Full Name",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.firstName&&l.user?.lastName?`${l.user.firstName} ${l.user.lastName}`:l.user?.name||"User"),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Email",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.email||"user@example.com"),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Member Since",2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full px-3 py-2 rounded-md","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-gray-300":"bg-gray-100 border border-gray-300 text-gray-900"])},(0,r.v_)(l.user?.memberSince||(new Date).toLocaleDateString()),3)])]),(0,o.Lk)("div",_r,[(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>l.closeProfileModal&&l.closeProfileModal(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Close ",2)])],2)])):(0,o.Q3)("",!0),l.activeMenu?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"fixed inset-0 z-0",onClick:t[17]||(t[17]=(...e)=>l.closeMenu&&l.closeMenu(...e))})):(0,o.Q3)("",!0)])),_:1},8,["onOpenProfileModal"])}s(116);var zr={name:"NotesView",components:{Header:Is},setup(){const e=(0,n.Pj)(),t=(0,g.rd)(),s=(0,g.lq)(),{showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,showSuccess:m,showWarning:p}=ft(),{user:b,loading:f,loadUserProfile:y,getProfilePictureUrl:h}=Lt(),x=(0,pe.KR)(null),v=(0,pe.KR)(!1),k=(0,pe.KR)(!0),w=(0,pe.KR)("connected"),C=(0,pe.KR)(new Date),L=(0,pe.KR)("all"),S=(0,pe.KR)(null),T=(0,pe.KR)(!1),E=(0,pe.KR)(null),N=(0,pe.KR)(""),_=(0,pe.KR)(""),A=(0,pe.KR)(!1),z=(0,pe.KR)(!1),I=(0,o.EW)((()=>{if(!x.value?.data)return console.log("🔄 Notes computed: No data in notesResponse"),[];console.log("🔄 Notes computed: Processing",x.value.data.length,"notes from database");const e=x.value.data.map((e=>{const t=e.is_favorite,s=null!==e.is_favorite&&void 0!==e.is_favorite&&Boolean(e.is_favorite&&"0"!==e.is_favorite&&0!==e.is_favorite);return console.log("🔄 Notes processing - Note ID:",e.id,"Raw is_favorite:",t,"(type:",typeof t,") -> Processed:",s),{id:e.id,title:e.title||"Untitled Note",original_text:e.original_text||"",date:new Date(e.created_at).toLocaleDateString(),createdAt:new Date(e.created_at),timestamp:new Date(e.created_at).getTime(),isFavorite:s,_lastUpdated:e._lastUpdated||0,tags:[]}}));return console.log("🔄 Notes computed: Final processed notes:",e.map((e=>({id:e.id,isFavorite:e.isFavorite})))),e})),F=b,R=(0,o.EW)((()=>e.getters["app/getSidebarVisible"])),P=(0,o.EW)((()=>e.getters["app/getThemeClasses"])),D=(0,o.EW)((()=>{try{return e.getters["app/getFontSizeClasses"]}catch(t){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}})),Q=e=>{const t=new Date,s=Math.floor((t-e)/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)} minutes ago`:s<86400?`${Math.floor(s/3600)} hours ago`:s<604800?`${Math.floor(s/86400)} days ago`:e.toLocaleDateString()},U=e=>{const t=e.target.src;console.error("Profile picture failed to load:",t),console.error("Image naturalWidth:",e.target.naturalWidth),console.error("Image naturalHeight:",e.target.naturalHeight),console.error("User profile picture path:",F?.profilePicture||"null")},O=e=>{const t=e.target.src;console.log("Profile picture loaded successfully:",t),console.log("Image dimensions:",e.target.naturalWidth,"x",e.target.naturalHeight)},G=(0,o.EW)((()=>{let e;if(console.log("🔄 filteredNotes computed: Recalculating with activeFilter:",L.value),console.log("🔄 filteredNotes computed: notes.value length:",I.value.length),"all"===L.value)e=I.value,console.log("🔄 filteredNotes computed: Returning all notes");else if("recent"===L.value){const t=[...I.value].sort(((e,t)=>t.timestamp-e.timestamp));e=t,console.log("🔄 filteredNotes computed: Returning sorted recent notes")}else if("favorites"===L.value){const t=I.value.filter((e=>e.isFavorite));e=t,console.log("🔄 filteredNotes computed: Returning favorites, count:",t.length)}else e=I.value,console.log("🔄 filteredNotes computed: Returning default (all notes)");return console.log("🔄 filteredNotes computed: Final result length:",e.length),e})),$=async()=>{try{v.value=!0;const t=localStorage.getItem("user");if(!t)return console.error("❌ No user data found in localStorage"),_.value="Please log in to view your notes.",void(v.value=!1);let s;console.log("🔍 Fetching notes for user:",t);try{s=JSON.parse(t),console.log("✅ Parsed user data:",s),console.log("✅ User ID:",s.id)}catch(e){return console.error("❌ Error parsing user data:",e),_.value="Invalid user session. Please log in again.",void(v.value=!1)}console.log("🚀 Making API call to getNotes...");const a=await vt.getNotes();if(console.log("📡 API call completed. Response status:",a.status),console.log("📡 Response headers:",a.headers),console.log("📡 Response data type:",typeof a.data),console.log("📡 Response data preview:",a.data?.substring?a.data.substring(0,200):a.data),a.data&&a.data.success?console.log("✅ Notes loaded successfully:",a.data.data?.length||0,"notes"):console.log("❌ Notes API returned error:",a.data?.error),a.data&&a.data.success)x.value=a.data,_.value="",console.log("✅ Notes loaded successfully:",a.data.data?.length||0,"notes");else{const e=a.data?.error||a.data?.message||"Failed to load notes.";_.value=e,console.error("❌ Notes API error:",e),console.error("❌ Full response:",a.data)}}catch(t){console.error("❌ Error fetching notes:",t);let e="Failed to load notes. Please check your connection and try again.";"NETWORK_ERROR"===t.code||t.message?.includes("Network Error")?e="Network connection error. Please check your internet connection.":"TIMEOUT"===t.code||t.message?.includes("timeout")?e="Request timed out. Please try again.":401===t.response?.status?e="Authentication failed. Please log in again.":403===t.response?.status?e="Access denied. You may not have permission to view these notes.":404===t.response?.status?e="Notes service not found. Please contact support.":t.response?.status>=500&&(e="Server error. Please try again later."),_.value=e}finally{v.value=!1}},q=async()=>{await y()},M=async()=>{await $()},j=async()=>{await y()},K=()=>{_.value=""};(0,o.sV)((async()=>{await Promise.all([$(),q()])})),(0,o.wB)((()=>s.fullPath),(async e=>{if(e.startsWith("/notes")){console.log("Navigated to notes page, checking if refresh needed...");const a="true"===s.query.refresh||"/notes"===e;a&&(console.log("Refreshing notes..."),await $(),s.query.refresh&&m("Notes updated","Your notes have been refreshed."),s.query.refresh&&t.replace("/notes"))}}));const W=e=>{B(),t.push(`/notes/${e}`)},X=async e=>{const t=I.value.findIndex((t=>t.id===e));if(-1!==t){const a=I.value[t],r=!a.isFavorite,l=x.value.data.map(((e,s)=>s===t?{...e,is_favorite:r,_lastUpdated:Date.now()}:{...e}));console.log("🔄 TOGGLE FAVORITE: About to update notesResponse"),console.log("🔄 TOGGLE FAVORITE: Old notesResponse.data length:",x.value.data.length),console.log("🔄 TOGGLE FAVORITE: Updated notes length:",l.length),x.value={...x.value,data:l},console.log("🔄 TOGGLE FAVORITE: notesResponse updated, new data length:",x.value.data.length),await(0,o.dY)(),console.log("🔄 TOGGLE FAVORITE: nextTick completed");const n=I.value.find((t=>t.id===e));console.log("🔄 TOGGLE FAVORITE: Updated note in notes computed:",n?.isFavorite);try{await vt.updateNote(e,{title:a.title,text:a.original_text,is_favorite:r})}catch(s){console.error("Error updating favorite status:",s);const e=x.value.data.map(((e,s)=>s===t?{...e,is_favorite:!r,_lastUpdated:Date.now()}:{...e}));x.value={...x.value,data:e},await(0,o.dY)(),p("Update failed","Failed to update favorite status. Please try again.")}}},V=e=>{S.value=S.value===e?null:e},B=()=>{S.value=null},H=e=>{B(),t.push(`/notes/edit/${e}`)},Z=async e=>{B();const t=I.value.find((t=>t.id===e));if(t){const e={title:`${t.title} (Copy)`,text:t.original_text};try{const t=await vt.createNote(e);if(!t.data.success)throw new Error(t.data.error||"Failed to duplicate note");await $(),m("Note duplicated","The note has been successfully duplicated.")}catch(s){console.error("Error duplicating note:",s),p("Duplicate failed","Failed to duplicate the note. Please try again.")}}},J=e=>{B(),E.value=e,T.value=!0},Y=()=>{T.value=!1,E.value=null},ee=async()=>{if(E.value)try{await vt.deleteNote(E.value),await $(),m("Note deleted","The note has been successfully deleted.")}catch(e){console.error("Error deleting note:",e),p("Delete failed","Failed to delete the note. Please try again.")}Y()},te=()=>{console.log("Opening camera..."),t.push("/notes/edit")},se=()=>{t.push("/notes/edit")},ae=()=>{e.dispatch("app/toggleSidebar")},oe=()=>{A.value=!A.value},re=()=>{A.value=!1},le=()=>{z.value=!0,A.value=!1},ne=()=>{z.value=!1},ie=async()=>{try{t.push("/login")}catch(e){console.error("Error logging out:",e)}};return{notes:I,user:F,sidebarVisible:R,activeFilter:L,activeMenu:S,showDeleteModal:T,noteToDelete:E,showUserMenu:A,showProfileModal:z,filteredNotes:G,notesError:_,loadingNotes:v,loadingUser:f,isConnected:k,connectionStatus:w,lastSync:C,toggleSidebar:ae,viewNote:W,toggleFavorite:X,showNoteMenu:V,closeMenu:B,editNote:H,duplicateNote:Z,confirmDelete:J,closeDeleteModal:Y,deleteNote:ee,openCamera:te,createNewNote:se,getProfilePictureUrl:h,handleImageError:U,handleImageLoad:O,getTimeAgo:Q,toggleUserMenu:oe,closeUserMenu:re,openProfileModal:le,closeProfileModal:ne,logout:ie,refreshNotes:M,refreshUser:j,clearError:K,showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,loadUserProfile:y,ocrText:N,themeClasses:P,fontSizeClasses:D,store:e}}};const Ir=(0,c.A)(zr,[["render",Ar]]);var Fr=Ir;const Rr={key:0,class:"flex justify-center items-center h-full"},Pr={key:1,class:"flex flex-col items-center justify-center h-full"},Dr={key:2},Qr={class:"mb-6"},Ur={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4"},Or={class:"flex space-x-3 mt-4 sm:mt-0"},Gr={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6 mb-6"},$r={class:"flex justify-between items-center mb-2"},qr={key:0,class:"animate-pulse"},Mr={key:1},jr={class:"flex justify-between items-center mb-2"},Kr={key:0,class:"animate-pulse"},Wr={key:1},Xr={class:"flex justify-between items-center mb-2"},Vr={key:0,class:"animate-pulse"},Br={key:1},Hr={class:"flex justify-between items-center mb-6"},Zr={key:0,class:"flex justify-center py-8"},Jr={key:2,class:"space-y-4"},Yr={class:"flex items-start justify-between mb-4"},el={class:"flex-1"},tl={class:"flex items-center space-x-3 mb-2"},sl={class:"mb-3"},al={class:"flex items-center space-x-1"},ol={key:0,class:"flex items-center space-x-1"},rl={class:"flex items-center space-x-2 ml-4"},ll=["onClick"],nl=["onClick"],il=["onClick"],cl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},dl={class:"flex justify-between items-center mb-6"},ul={class:"grid grid-cols-2 gap-4"},gl={class:"flex justify-end space-x-3 pt-4"},ml=["disabled"],pl={key:0,class:"flex items-center space-x-2"},bl={key:1},fl={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},yl={class:"flex items-center mb-4"},hl={class:"flex justify-end space-x-3"};function xl(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link"),u=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(u,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("main",{class:(0,r.C4)(["flex-1 p-4 md:p-6 transition-all duration-300 ease-in-out","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-900":"bg-white"]),style:{width:"100vw","max-width":"100vw"}},[l.isLoading?((0,o.uX)(),(0,o.CE)("div",Rr,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-3xl sm:text-4xl text-blue-500"})])):l.error?((0,o.uX)(),(0,o.CE)("div",Pr,[(0,o.bF)(c,{icon:["fas","times"],class:"text-4xl text-red-400 mb-4"}),(0,o.Lk)("h2",{class:(0,r.C4)(["text-xl font-medium mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Error Loading Goals",2),(0,o.Lk)("p",{class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600","mb-4"])},(0,r.v_)(l.error),3),(0,o.bF)(d,{to:"/dashboard",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)(" Back to Dashboard ")]))),_:1,__:[13]})])):((0,o.uX)(),(0,o.CE)("div",Dr,[(0,o.Lk)("div",Qr,[(0,o.Lk)("div",Ur,[(0,o.Lk)("div",null,[(0,o.Lk)("h1",{class:(0,r.C4)(["font-bold mb-2",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Learning Goals",2),(0,o.Lk)("p",{class:(0,r.C4)("dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600")},"Set and track your learning objectives",2)]),(0,o.Lk)("div",Or,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.openCreateGoalModal&&l.openCreateGoalModal(...e)),class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},[(0,o.bF)(c,{icon:["fas","plus"],class:"mr-2"}),t[14]||(t[14]=(0,o.eW)(" Create New Goal "))]),(0,o.bF)(d,{to:"/dashboard",class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300 text-gray-900"])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","angle-left"],class:"mr-2"}),t[15]||(t[15]=(0,o.eW)(" Back to Dashboard "))])),_:1,__:[15]},8,["class"])])])]),(0,o.Lk)("div",Gr,[(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-4"])},[(0,o.Lk)("div",$r,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-medium",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Active Goals",2),(0,o.bF)(c,{icon:["fas","bullseye"],class:"text-blue-400 text-lg"})]),l.isLoadingStats?((0,o.uX)(),(0,o.CE)("div",qr,t[16]||(t[16]=[(0,o.Lk)("div",{class:"h-6 bg-gray-700 rounded mb-2"},null,-1),(0,o.Lk)("div",{class:"h-3 bg-gray-700 rounded w-3/4"},null,-1)]))):((0,o.uX)(),(0,o.CE)("div",Mr,[(0,o.Lk)("p",{class:(0,r.C4)(["text-2xl font-semibold","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(l.goalStats.activeGoals),3),t[17]||(t[17]=(0,o.Lk)("p",{class:"text-xs text-gray-500"},"Currently tracking",-1))]))],2),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-4"])},[(0,o.Lk)("div",jr,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-medium",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Completed This Month",2),(0,o.bF)(c,{icon:["fas","check-circle"],class:"text-green-400 text-lg"})]),l.isLoadingStats?((0,o.uX)(),(0,o.CE)("div",Kr,t[18]||(t[18]=[(0,o.Lk)("div",{class:"h-6 bg-gray-700 rounded mb-2"},null,-1),(0,o.Lk)("div",{class:"h-3 bg-gray-700 rounded w-3/4"},null,-1)]))):((0,o.uX)(),(0,o.CE)("div",Wr,[(0,o.Lk)("p",{class:(0,r.C4)(["text-2xl font-semibold","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(l.goalStats.completedGoals),3),t[19]||(t[19]=(0,o.Lk)("p",{class:"text-xs text-gray-500"},"Goals achieved",-1))]))],2),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-4"])},[(0,o.Lk)("div",Xr,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-medium",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Success Rate",2),(0,o.bF)(c,{icon:["fas","star"],class:"text-yellow-400 text-lg"})]),l.isLoadingStats?((0,o.uX)(),(0,o.CE)("div",Vr,t[20]||(t[20]=[(0,o.Lk)("div",{class:"h-6 bg-gray-700 rounded mb-2"},null,-1),(0,o.Lk)("div",{class:"h-3 bg-gray-700 rounded w-3/4"},null,-1)]))):((0,o.uX)(),(0,o.CE)("div",Br,[(0,o.Lk)("p",{class:(0,r.C4)(["text-2xl font-semibold","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(l.goalStats.successRate)+"%",3),t[21]||(t[21]=(0,o.Lk)("p",{class:"text-xs text-gray-500"},"Completion rate",-1))]))],2)]),(0,o.Lk)("div",{class:(0,r.C4)([l.themeClasses.card,"rounded-lg p-6"])},[(0,o.Lk)("div",Hr,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Your Goals",2),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.loadGoals&&l.loadGoals(...e)),class:"text-blue-400 hover:text-blue-300 text-sm"},[(0,o.bF)(c,{icon:["fas","sync-alt"],class:"mr-1"}),t[22]||(t[22]=(0,o.eW)(" Refresh "))])]),l.isLoadingGoals?((0,o.uX)(),(0,o.CE)("div",Zr,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-2xl text-blue-500"}),(0,o.Lk)("span",{class:(0,r.C4)(["ml-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Loading your goals...",2)])):0===l.goals.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["text-center py-12","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},[(0,o.bF)(c,{icon:["fas","bullseye"],class:"text-6xl mb-6"}),(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold mb-4",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"No Goals Yet",2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Set your first learning goal to start tracking your progress!",2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.openCreateGoalModal&&l.openCreateGoalModal(...e)),class:"px-6 py-3 bg-blue-600 rounded-md hover:bg-blue-700 transition"},[(0,o.bF)(c,{icon:["fas","plus"],class:"mr-2"}),t[23]||(t[23]=(0,o.eW)(" Create Your First Goal "))])],2)):((0,o.uX)(),(0,o.CE)("div",Jr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.goals,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,r.C4)(["rounded-lg p-5 transition-all duration-200","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-white border border-gray-200 shadow-sm hover:shadow-md hover:bg-gray-50"])},[(0,o.Lk)("div",Yr,[(0,o.Lk)("div",el,[(0,o.Lk)("div",tl,[(0,o.Lk)("div",{class:(0,r.C4)(["w-3 h-3 rounded-full","completed"===e.status?"bg-green-500":"overdue"===e.status?"bg-red-500":"bg-blue-500"])},null,2),(0,o.Lk)("h4",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(e.title),3),(0,o.Lk)("span",{class:(0,r.C4)(["px-2 py-1 text-xs rounded-full font-medium","completed"===e.status?"bg-green-600 text-white":"overdue"===e.status?"bg-red-600 text-white":"bg-blue-600 text-white"])},(0,r.v_)(e.status.charAt(0).toUpperCase()+e.status.slice(1)),3)]),(0,o.Lk)("p",{class:(0,r.C4)(["mb-3",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-600"])},(0,r.v_)(e.description),3),(0,o.Lk)("div",sl,[(0,o.Lk)("div",{class:(0,r.C4)(["flex justify-between mb-1",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},[t[24]||(t[24]=(0,o.Lk)("span",null,"Progress",-1)),(0,o.Lk)("span",null,(0,r.v_)(e.current_value)+" / "+(0,r.v_)(e.target_value),1)],2),(0,o.Lk)("div",{class:(0,r.C4)(["w-full rounded-full h-2","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-200"])},[(0,o.Lk)("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:(0,r.Tr)({width:`${Math.min(e.current_value/e.target_value*100,100)}%`})},null,4)],2)]),(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center space-x-4",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},[(0,o.Lk)("div",al,[(0,o.bF)(c,{icon:["fas","bullseye"]}),(0,o.Lk)("span",null,(0,r.v_)(e.target_type.replace("_"," ").toUpperCase()),1)]),e.deadline?((0,o.uX)(),(0,o.CE)("div",ol,[(0,o.bF)(c,{icon:["fas","calendar"]}),(0,o.Lk)("span",null,(0,r.v_)(new Date(e.deadline).toLocaleDateString()),1)])):(0,o.Q3)("",!0)],2)]),(0,o.Lk)("div",rl,[(0,o.Lk)("button",{onClick:t=>l.updateGoalProgress(e),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition",title:"Update Progress"},[(0,o.bF)(c,{icon:["fas","plus"]})],8,ll),(0,o.Lk)("button",{onClick:t=>l.editGoal(e),class:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition",title:"Edit Goal"},[(0,o.bF)(c,{icon:["fas","edit"]})],8,nl),(0,o.Lk)("button",{onClick:t=>l.confirmDeleteGoal(e),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition",title:"Delete Goal"},[(0,o.bF)(c,{icon:["fas","trash"]})],8,il)])])],2)))),128))]))],2)]))],2),l.showGoalModal?((0,o.uX)(),(0,o.CE)("div",cl,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-md mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",dl,[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(l.isEditing?"Edit Goal":"Create New Goal"),3),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.closeGoalModal&&l.closeGoalModal(...e)),class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"])},[(0,o.bF)(c,{icon:["fas","times"],class:"text-xl"})],2)]),(0,o.Lk)("form",{onSubmit:t[10]||(t[10]=(0,a.D$)(((...e)=>l.saveGoal&&l.saveGoal(...e)),["prevent"])),class:"space-y-4"},[(0,o.Lk)("div",null,[t[25]||(t[25]=(0,o.Lk)("label",{class:"block text-sm font-medium mb-2"},"Goal Title",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.goalForm.title=e),type:"text",class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white placeholder-gray-400":"bg-white border border-gray-300 text-gray-900 placeholder-gray-500"]),placeholder:"Enter your goal title...",required:""},null,2),[[a.Jo,l.goalForm.title]])]),(0,o.Lk)("div",null,[t[26]||(t[26]=(0,o.Lk)("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.goalForm.description=e),class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white placeholder-gray-400":"bg-white border border-gray-300 text-gray-900 placeholder-gray-500"]),rows:"3",placeholder:"Describe your goal..."},null,2),[[a.Jo,l.goalForm.description]])]),(0,o.Lk)("div",ul,[(0,o.Lk)("div",null,[t[28]||(t[28]=(0,o.Lk)("label",{class:"block text-sm font-medium mb-2"},"Target Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.goalForm.target_type=e),class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"]),required:""},t[27]||(t[27]=[(0,o.Lk)("option",{value:"notes"},"Notes",-1),(0,o.Lk)("option",{value:"quizzes"},"Quizzes",-1),(0,o.Lk)("option",{value:"study_time"},"Study Time (hours)",-1),(0,o.Lk)("option",{value:"accuracy"},"Accuracy (%)",-1)]),2),[[a.u1,l.goalForm.target_type]])]),(0,o.Lk)("div",null,[t[29]||(t[29]=(0,o.Lk)("label",{class:"block text-sm font-medium mb-2"},"Target Value",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.goalForm.target_value=e),type:"number",min:"1",class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"]),required:""},null,2),[[a.Jo,l.goalForm.target_value,void 0,{number:!0}]])])]),(0,o.Lk)("div",null,[t[30]||(t[30]=(0,o.Lk)("label",{class:"block text-sm font-medium mb-2"},"Deadline (Optional)",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.goalForm.deadline=e),type:"date",class:(0,r.C4)(["w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"])},null,2),[[a.Jo,l.goalForm.deadline]])]),(0,o.Lk)("div",gl,[(0,o.Lk)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>l.closeGoalModal&&l.closeGoalModal(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition",disabled:l.isSavingGoal},[l.isSavingGoal?((0,o.uX)(),(0,o.CE)("span",pl,[(0,o.bF)(c,{icon:["fas","spinner"],class:"animate-spin"}),t[31]||(t[31]=(0,o.Lk)("span",null,"Saving...",-1))])):((0,o.uX)(),(0,o.CE)("span",bl,(0,r.v_)(l.isEditing?"Update Goal":"Create Goal"),1))],8,ml)])],32)],2)])):(0,o.Q3)("",!0),l.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",fl,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-sm mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",yl,[(0,o.bF)(c,{icon:["fas","times"],class:"text-red-400 text-xl mr-3"}),(0,o.Lk)("h3",{class:(0,r.C4)(["font-medium",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Delete Goal",2)]),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},[t[32]||(t[32]=(0,o.eW)(' Are you sure you want to delete "')),(0,o.Lk)("strong",null,(0,r.v_)(l.goalToDelete?.title),1),t[33]||(t[33]=(0,o.eW)('"? This action cannot be undone. '))],2),(0,o.Lk)("div",hl,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.cancelDelete&&l.cancelDelete(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>l.proceedDelete&&l.proceedDelete(...e)),class:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 transition"}," Delete Goal ")])],2)])):(0,o.Q3)("",!0)])),_:1},8,["onOpenProfileModal"])}var vl={name:"GoalView",components:{Header:Is},setup(){const e=(0,n.Pj)(),{showSuccess:t,showInfo:s,showWarning:a}=ft(),{user:r,loadUserProfile:l,getProfilePictureUrl:i}=Lt(),c=(0,pe.KR)(!0),d=(0,pe.KR)(null),u=(0,pe.KR)([]),g=(0,pe.KR)(!1),m=(0,pe.KR)({activeGoals:0,completedGoals:0,successRate:0}),p=(0,pe.KR)(!1),b=(0,pe.KR)(!1),f=(0,pe.KR)(!1),y=(0,pe.KR)(null),h=(0,pe.KR)(!1),x=(0,pe.KR)(!1),v=(0,pe.KR)(null),k=(0,pe.KR)({title:"",description:"",target_type:"notes",target_value:1,deadline:""}),w=r,C=(0,o.EW)((()=>e.getters["app/getThemeClasses"])),L=(0,o.EW)((()=>e.getters["app/getFontSizeClasses"])),S=()=>{},T=()=>{},E=()=>{},N=async()=>{try{g.value=!0;const e=await vt.get("?resource=goals&_t="+Date.now());e.data.success?u.value=e.data.data:console.error("Failed to load goals:",e.data.error)}catch(e){console.error("Error loading goals:",e),a("Failed to load goals","Please try again later.")}finally{g.value=!1}},_=async()=>{try{p.value=!0;const e=await vt.get("?resource=goals&action=stats&_t="+Date.now());e.data.success?m.value=e.data.data:console.error("Failed to load goal stats:",e.data.error)}catch(e){console.error("Error loading goal stats:",e)}finally{p.value=!1}},A=()=>{f.value=!1,y.value=null,k.value={title:"",description:"",target_type:"notes",target_value:1,deadline:""},b.value=!0},z=e=>{f.value=!0,y.value=e,k.value={title:e.title,description:e.description,target_type:e.target_type,target_value:e.target_value,deadline:e.deadline?e.deadline.split("T")[0]:""},b.value=!0},I=()=>{b.value=!1,k.value={title:"",description:"",target_type:"notes",target_value:1,deadline:""}},F=async()=>{try{h.value=!0;const e={...k.value,status:"active"};let s;s=f.value?await vt.post(`?resource=goals&id=${y.value.id}`,e):await vt.post("?resource=goals",e),s.data.success?(t(f.value?"Goal updated!":"Goal created!",`Your goal "${k.value.title}" has been ${f.value?"updated":"created"}.`),I(),await N(),await _()):a("Failed to save goal",s.data.error||"Please try again.")}catch(e){console.error("Error saving goal:",e),a("Failed to save goal","Please try again.")}finally{h.value=!1}},R=async e=>{const s=prompt(`Update progress for "${e.title}" (current: ${e.current_value}/${e.target_value}):`,e.current_value);if(null!==s&&!isNaN(s))try{const o=await vt.post(`?resource=goals&action=update-progress&id=${e.id}`,{progress_value:parseInt(s)});o.data.success?(t("Progress updated!","Your goal progress has been updated."),await N(),await _()):a("Failed to update progress",o.data.error||"Please try again.")}catch(o){console.error("Error updating progress:",o),a("Failed to update progress","Please try again.")}},P=e=>{v.value=e,x.value=!0},D=()=>{x.value=!1,v.value=null},Q=async()=>{if(v.value)try{const e=await vt.post(`?resource=goals&id=${v.value.id}`,{},{headers:{"X-HTTP-Method-Override":"DELETE"}});e.data.success?(t("Goal deleted!","Your goal has been deleted."),await N(),await _()):a("Failed to delete goal",e.data.error||"Please try again.")}catch(e){console.error("Error deleting goal:",e),a("Failed to delete goal","Please try again.")}finally{x.value=!1,v.value=null}};return(0,o.sV)((async()=>{try{await l(),await Promise.all([N(),_()])}catch(e){console.error("Error initializing goals view:",e),d.value="Failed to load goals"}finally{c.value=!1}})),{isLoading:c,error:d,showGoalModal:b,isEditing:f,isSavingGoal:h,showDeleteConfirmation:x,goalToDelete:v,goals:u,isLoadingGoals:g,goalStats:m,isLoadingStats:p,goalForm:k,user:w,openProfileModal:S,getProfilePictureUrl:i,handleImageError:T,handleImageLoad:E,loadGoals:N,loadGoalStats:_,openCreateGoalModal:A,editGoal:z,closeGoalModal:I,saveGoal:F,updateGoalProgress:R,confirmDeleteGoal:P,cancelDelete:D,proceedDelete:Q,showSuccess:t,showInfo:s,showWarning:a,themeClasses:C,fontSizeClasses:L,store:e}}};const kl=(0,c.A)(vl,[["render",xl]]);var wl=kl;const Cl={key:1,class:"space-y-6"},Ll={class:"flex flex-col items-center mb-6"},Sl=["src"],Tl={class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition cursor-pointer"},El={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Nl=["value","disabled"],_l=["value","disabled"],Al=["value","disabled"],zl={class:"mt-4"},Il=["disabled"],Fl={key:0},Rl={key:1},Pl={class:"space-y-4"},Dl={class:"mt-4"},Ql=["disabled"],Ul={key:0},Ol={key:1},Gl={key:2,class:"space-y-6"},$l={class:"flex space-x-4"},ql={class:"flex items-center space-x-4"},Ml=["value","aria-valuenow","aria-valuetext"],jl={class:"flex justify-between items-center mt-2"};function Kl(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(d,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("main",{class:(0,r.C4)(["flex-1 p-6 transition-all duration-300 ease-in-out",l.themeClasses.mainContent])},[(0,o.Lk)("h1",{class:(0,r.C4)(["font-bold mb-6 transition-all duration-300",[l.themeClasses.text,l.fontSizeClasses.heading]])},"Settings",2),l.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(["mb-6 p-4 rounded-lg","success"===l.messageType?"bg-green-800 text-green-200":"bg-red-800 text-red-200"])},[(0,o.bF)(c,{icon:"success"===l.messageType?["fas","check-circle"]:["fas","triangle-exclamation"],class:"mr-2"},null,8,["icon"]),(0,o.eW)(" "+(0,r.v_)(l.message),1)],2)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:(0,r.C4)(["flex mb-6 transition-colors duration-300","dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-700":"border-gray-200"])},[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.activeTab="account"),class:(0,r.C4)(["px-4 py-2 font-medium","account"===l.activeTab?"border-b-2 border-blue-500 text-blue-500":"text-gray-400 hover:text-white"])}," Account ",2),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>l.activeTab="appearance"),class:(0,r.C4)(["px-4 py-2 font-medium","appearance"===l.activeTab?"border-b-2 border-blue-500 text-blue-500":"text-gray-400 hover:text-white"])}," Appearance ",2)],2),"account"===l.activeTab?((0,o.uX)(),(0,o.CE)("div",Cl,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4",[l.themeClasses.text,l.fontSizeClasses.body]])},"Profile Picture",2),(0,o.Lk)("div",Ll,[(0,o.Lk)("div",{class:(0,r.C4)(["relative w-24 h-24 rounded-full overflow-hidden mb-3","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-300"])},[l.user&&l.user.profilePicture?((0,o.uX)(),(0,o.CE)("img",{key:l.user.profilePicture,src:l.getProfilePictureUrl(l.user.profilePicture),alt:"Profile",class:"w-full h-full object-cover",onError:t[2]||(t[2]=(...e)=>l.handleImageError&&l.handleImageError(...e)),onLoad:t[3]||(t[3]=(...e)=>l.handleImageLoad&&l.handleImageLoad(...e))},null,40,Sl)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["w-full h-full flex items-center justify-center","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-300"])},[(0,o.bF)(c,{icon:["fas","user"],class:(0,r.C4)(["text-2xl","dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-700"])},null,8,["class"])],2)),(0,o.Lk)("label",Tl,[(0,o.bF)(c,{icon:["fas","camera"],class:"text-white"}),(0,o.Lk)("input",{type:"file",accept:"image/*,.pdf,application/pdf",onChange:t[4]||(t[4]=(...e)=>l.handleProfilePictureUpload&&l.handleProfilePictureUpload(...e)),class:"hidden"},null,32)])],2),(0,o.Lk)("p",{class:(0,r.C4)(["text-sm mb-2",l.themeClasses.secondaryText])},"Click to change profile picture",2),(0,o.Lk)("p",{class:(0,r.C4)(["text-xs",l.themeClasses.secondaryText])},"JPEG, PNG, GIF, WebP, PDF (max 5MB)",2)])],2),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4",[l.themeClasses.text,l.fontSizeClasses.body]])},"Profile Information",2),(0,o.Lk)("div",El,[(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"First Name",2),(0,o.Lk)("input",{value:l.user?.firstName||"",onInput:t[5]||(t[5]=e=>l.user?l.user.firstName=e.target.value:null),class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input]),disabled:!l.user},null,42,Nl)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"Last Name",2),(0,o.Lk)("input",{value:l.user?.lastName||"",onInput:t[6]||(t[6]=e=>l.user?l.user.lastName=e.target.value:null),class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input]),disabled:!l.user},null,42,_l)]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"Email Address",2),(0,o.Lk)("input",{value:l.user?.email||"",onInput:t[7]||(t[7]=e=>l.user?l.user.email=e.target.value:null),type:"email",class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input]),disabled:!l.user},null,42,Al)])]),(0,o.Lk)("div",zl,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.saveProfile&&l.saveProfile(...e)),disabled:l.isLoading,class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition disabled:opacity-50"},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",Fl,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[20]||(t[20]=(0,o.eW)(" Saving... "))])):((0,o.uX)(),(0,o.CE)("span",Rl,"Save Changes"))],8,Il)])],2),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4",[l.themeClasses.text,l.fontSizeClasses.body]])},"Change Password",2),(0,o.Lk)("div",Pl,[(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"Current Password",2),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.passwords.current=e),type:"password",class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input])},null,2),[[a.Jo,l.passwords.current]])]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"New Password",2),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.passwords.new=e),type:"password",class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input])},null,2),[[a.Jo,l.passwords.new]])]),(0,o.Lk)("div",null,[(0,o.Lk)("label",{class:(0,r.C4)(["block text-sm mb-1",l.themeClasses.secondaryText])},"Confirm New Password",2),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.passwords.confirm=e),type:"password",class:(0,r.C4)(["w-full p-2 rounded border focus:outline-none focus:border-blue-500 transition-colors duration-300",l.themeClasses.input])},null,2),[[a.Jo,l.passwords.confirm]])])]),(0,o.Lk)("div",Dl,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>l.updatePassword&&l.updatePassword(...e)),disabled:l.isLoading,class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition disabled:opacity-50"},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",Ul,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"mr-2"}),t[21]||(t[21]=(0,o.eW)(" Updating... "))])):((0,o.uX)(),(0,o.CE)("span",Ol,"Update Password"))],8,Ql)])],2),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4",[l.themeClasses.text,l.fontSizeClasses.body]])},"Danger Zone",2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-4",l.themeClasses.secondaryText])},"Once you delete your account, there is no going back. Please be certain.",2),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>l.deleteAccount&&l.deleteAccount(...e)),class:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 transition"},[(0,o.bF)(c,{icon:["fas","times"],class:"mr-2"}),t[22]||(t[22]=(0,o.eW)(" Delete Account "))])],2)])):(0,o.Q3)("",!0),"appearance"===l.activeTab?((0,o.uX)(),(0,o.CE)("div",Gl,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 transition-colors duration-300",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4 transition-all duration-300",[l.themeClasses.text,l.fontSizeClasses.body]])},"Theme",2),(0,o.Lk)("div",$l,[(0,o.Lk)("div",{onClick:t[14]||(t[14]=e=>l.store.dispatch("app/setTheme","dark")),class:(0,r.C4)(["w-32 h-24 rounded-lg cursor-pointer border-2","dark"===l.store.getters["app/getTheme"]?"border-blue-500":"border-transparent"])},[(0,o.Lk)("div",{class:(0,r.C4)(["h-full rounded-lg p-3","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-900":"bg-gray-700"])},[(0,o.Lk)("div",{class:(0,r.C4)(["h-4 w-full rounded mb-2","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-gray-700"])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["h-4 w-3/4 rounded","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-gray-700"])},null,2),(0,o.Lk)("div",{class:(0,r.C4)(["mt-4 text-xs text-center","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Dark",2)],2)],2),(0,o.Lk)("div",{onClick:t[15]||(t[15]=e=>l.store.dispatch("app/setTheme","light")),class:(0,r.C4)(["w-32 h-24 rounded-lg cursor-pointer border-2","light"===l.store.getters["app/getTheme"]?"border-blue-500":"border-transparent"])},t[23]||(t[23]=[(0,o.Lk)("div",{class:"h-full bg-gray-100 rounded-lg p-3"},[(0,o.Lk)("div",{class:"h-4 w-full bg-white rounded mb-2"}),(0,o.Lk)("div",{class:"h-4 w-3/4 bg-white rounded"}),(0,o.Lk)("div",{class:"mt-4 text-xs text-center text-gray-600"},"Light")],-1)]),2),(0,o.Lk)("div",{onClick:t[16]||(t[16]=e=>l.store.dispatch("app/setTheme","system")),class:(0,r.C4)(["w-32 h-24 rounded-lg cursor-pointer border-2","system"===l.store.getters["app/getTheme"]?"border-blue-500":"border-transparent"])},t[24]||(t[24]=[(0,o.Lk)("div",{class:"h-full bg-gradient-to-r from-gray-900 to-gray-100 rounded-lg p-3 flex items-center justify-center"},[(0,o.Lk)("div",{class:"text-xs text-center"},"System")],-1)]),2)])],2),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6",l.themeClasses.card])},[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold mb-4 transition-all duration-300",[l.themeClasses.text,l.fontSizeClasses.body]])},"Font Size",2),(0,o.Lk)("div",ql,[(0,o.Lk)("span",{class:(0,r.C4)(["transition-all duration-300",[l.themeClasses.secondaryText,l.fontSizeClasses.small]])},"A",2),(0,o.Lk)("input",{value:l.store.getters["app/getFontSize"],onInput:t[17]||(t[17]=e=>l.handleFontSizeChange(e)),onKeydown:t[18]||(t[18]=e=>l.handleFontSizeKeydown(e)),type:"range",min:"12",max:"24",step:"1",class:(0,r.C4)(["w-full h-2 rounded-lg appearance-none cursor-pointer transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500",l.themeClasses.button]),"aria-label":"Font size slider",role:"slider","aria-valuemin":12,"aria-valuemax":24,"aria-valuenow":l.store.getters["app/getFontSize"],"aria-valuetext":`${l.store.getters["app/getFontSize"]} pixels`},null,42,Ml),(0,o.Lk)("span",{class:(0,r.C4)(["transition-all duration-300",[l.themeClasses.text,l.fontSizeClasses.body]])},"A",2)]),(0,o.Lk)("div",jl,[(0,o.Lk)("p",{class:(0,r.C4)(["transition-all duration-300",[l.themeClasses.secondaryText,l.fontSizeClasses.label]])},"Current font size: "+(0,r.v_)(l.store.getters["app/getFontSize"])+"px",3),(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>l.resetFontSize&&l.resetFontSize(...e)),class:(0,r.C4)(["px-3 py-1 text-sm rounded-md transition-colors",l.themeClasses.button])}," Reset to Default ",2)])],2)])):(0,o.Q3)("",!0)],2)])),_:1},8,["onOpenProfileModal"])}var Wl={name:"SettingsView",components:{Header:Is},setup(){const e=(0,n.Pj)(),t=(0,g.rd)(),{user:s,loadUserProfile:a,updateUserProfile:r,getProfilePictureUrl:l}=Lt(),i=(0,pe.KR)("account"),c=(0,pe.KR)({current:"",new:"",confirm:""}),d=(0,pe.KR)(!1),u=(0,pe.KR)(""),m=(0,pe.KR)(""),p=(0,pe.KR)(!1),b=(0,pe.Kh)({get theme(){return e.getters["app/getTheme"]},set theme(t){e.dispatch("app/setTheme",t)},get fontSize(){return e.getters["app/getFontSize"]},set fontSize(t){e.dispatch("app/setFontSize",t)}}),f=(0,o.EW)((()=>e.getters["app/getThemeClasses"])),y=(0,o.EW)((()=>e.getters["app/getFontSizeClasses"])),h=(0,o.EW)((()=>e.getters["app/getSidebarVisible"])),x=()=>{e.dispatch("app/toggleSidebar")},v=()=>{e.dispatch("app/toggleSidebar")},k=async()=>{try{console.log("🔤 Loading settings from backend...");const e=await vt.getSettings();e.data.success&&(console.log("🔤 Settings loaded from backend:",e.data.data),Object.assign(b,e.data.data),localStorage.setItem("smartscribe_settings",JSON.stringify(e.data.data)))}catch(e){console.error("🔤 Failed to load settings from backend:",e);const t=localStorage.getItem("smartscribe_settings");if(t){const e=JSON.parse(t);console.log("🔤 Using localStorage fallback settings:",e),Object.assign(b,e)}}},w=async()=>{try{console.log("🔤 Saving settings to backend:",b);const e=await vt.updateSettings(b);e.data.success&&console.log("🔤 Settings saved to backend successfully")}catch(e){console.error("🔤 Error saving settings to backend:",e)}localStorage.setItem("smartscribe_settings",JSON.stringify(b)),console.log("🔤 Settings saved to localStorage as fallback")},C=(e,t="success")=>{u.value=e,m.value=t,setTimeout((()=>{u.value="",m.value=""}),3e3)},L=()=>{},S=()=>{},T=async()=>{try{d.value=!0;const e={first_name:s.value?.firstName||"",last_name:s.value?.lastName||"",email:s.value?.email||""},t=await r(e);t.success?(w(),C("Profile updated successfully!")):C("Failed to update profile: "+(t.error||"Unknown error"),"error")}catch(e){C("Failed to update profile","error")}finally{d.value=!1}},E=async()=>{if(c.value.new===c.value.confirm)if(c.value.new.length<6)C("Password must be at least 6 characters","error");else try{d.value=!0;const e=await vt.updatePassword({current_password:c.value.current,new_password:c.value.new});e.data.success?(c.value={current:"",new:"",confirm:""},C("Password updated successfully!")):C(e.data.message||"Failed to update password","error")}catch(e){console.error("Password update error:",e);const t=e.response?.data?.message||e.response?.data?.error||"Failed to update password";C(t,"error")}finally{d.value=!1}else C("New passwords do not match","error")},N=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone."))try{d.value=!0;const s=await vt.deleteAccount();s.data.success?(C("Account deleted successfully. You will be logged out now.","success"),setTimeout((async()=>{const{logout:s}=Lt();await s(),e.dispatch("auth/logout"),t.push("/login")}),2e3)):C(s.data.message||"Failed to delete account","error")}catch(s){console.error("Account deletion error:",s);const e=s.response?.data?.message||s.response?.data?.error||"Failed to delete account";C(e,"error")}finally{d.value=!1}},_=async()=>{await a()},A=async e=>{try{const t=new FormData;t.append("profile_picture",e);const s=await vt.uploadProfilePicture(t);return s.data.success?(await _(),{success:!0,message:s.data.message}):{success:!1,message:s.data.error}}catch(t){return{success:!1,message:"Network error"}}},z=async e=>{const t=e.target.files[0];if(!t)return;const s=["image/jpeg","image/png","image/gif","image/webp","application/pdf"];if(!s.includes(t.type))return void C("Please select a valid image file (JPEG, PNG, GIF, WebP) or PDF file","error");const a=5242880;if(t.size>a)C("File size must be less than 5MB","error");else{try{const e=await A(t);e.success?(C(e.message),await _()):C("Upload failed: "+e.message,"error")}catch(o){C("Upload failed: Network error","error")}e.target.value=""}},I=()=>{p.value=!p.value},F=()=>{p.value=!1},R=()=>{p.value=!1},P=async()=>{try{const{logout:e}=Lt();e(),p.value=!1,C("Logged out successfully!")}catch(e){C("Error logging out","error")}},D=t=>{const s=parseInt(t.target.value);console.log("🔤 Font size slider changed to:",s),console.log("🔤 Event target value:",t.target.value,"Type:",typeof t.target.value),e.dispatch("app/setFontSize",s)},Q=()=>{console.log("🔤 Resetting font size to default (16px)"),e.dispatch("app/setFontSize",16),C("Font size reset to default (16px)")},U=t=>{const s=e.getters["app/getFontSize"];let a=s;switch(t.key){case"ArrowUp":case"ArrowRight":t.preventDefault(),a=Math.min(s+1,24);break;case"ArrowDown":case"ArrowLeft":t.preventDefault(),a=Math.max(s-1,12);break;case"Home":t.preventDefault(),a=12;break;case"End":t.preventDefault(),a=24;break;case"PageUp":t.preventDefault(),a=Math.min(s+4,24);break;case"PageDown":t.preventDefault(),a=Math.max(s-4,12);break;default:return}a!==s&&(console.log("🔤 Font size changed via keyboard to:",a),e.dispatch("app/setFontSize",a))};return(0,o.sV)((async()=>{await Promise.all([k(),a()])})),{activeTab:i,user:s,router:t,passwords:c,settings:b,themeClasses:f,fontSizeClasses:y,sidebarVisible:h,showUserMenu:p,isLoading:d,message:u,messageType:m,saveProfile:T,updatePassword:E,deleteAccount:N,fetchUserProfile:_,uploadProfilePicture:A,handleProfilePictureUpload:z,getProfilePictureUrl:l,handleImageError:L,handleImageLoad:S,handleSidebarToggle:x,toggleSidebar:v,toggleUserMenu:I,closeUserMenu:F,openProfileModal:R,logout:P,handleFontSizeChange:D,resetFontSize:Q,handleFontSizeKeydown:U,store:e,loadUserProfile:a,updateUserProfile:r}}};const Xl=(0,c.A)(Wl,[["render",Kl]]);var Vl=Xl;const Bl={key:0,class:"flex justify-center items-center h-full"},Hl={key:1},Zl={class:"flex flex-col justify-between items-start mb-6 space-y-4",style:{"flex-direction":"column !important"}},Jl={class:"flex space-x-2 sm:space-x-3 w-full sm:w-auto"},Yl={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-2 sm:space-y-0"},en={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto"},tn={class:"flex items-center space-x-2 text-sm"},sn={key:0,class:"flex items-center space-x-2 text-sm text-green-400"},an={key:0,class:"bg-green-900 border border-green-700 rounded-lg p-3 mb-4"},on={class:"flex items-center space-x-2 text-sm text-green-300"},rn={class:"grid grid-cols-1 gap-4 sm:gap-6 mb-6",style:{"grid-template-columns":"1fr"}},ln={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-2 sm:space-y-0"},nn=["disabled"],cn={class:"flex flex-wrap gap-2"},dn={key:2,class:"flex flex-col items-center justify-center h-full"},un={key:3,class:"flex flex-col items-center justify-center h-full"};function gn(e,t,s,a,l,n){const i=(0,o.g2)("font-awesome-icon"),c=(0,o.g2)("router-link"),d=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(d,{onOpenProfileModal:a.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("main",{class:(0,r.C4)(`${a.themeClasses.mainContent} flex-1 p-4 sm:p-6 transition-all duration-300 ease-in-out`)},[a.isLoading?((0,o.uX)(),(0,o.CE)("div",Bl,[(0,o.bF)(i,{icon:["fas","spinner"],spin:"",class:"text-3xl sm:text-4xl text-blue-500"})])):a.note&&!a.error?((0,o.uX)(),(0,o.CE)("div",Hl,[(0,o.Lk)("div",Zl,[(0,o.Lk)("div",null,[(0,o.Lk)("h1",{class:(0,r.C4)(`${a.themeClasses.text} font-bold ${a.fontSizeClasses.heading}`)},(0,r.v_)(a.note.title),3),(0,o.Lk)("p",{class:(0,r.C4)(`${a.themeClasses.tertiaryText} ${a.fontSizeClasses.label}`)},"Last edited: "+(0,r.v_)(a.note.lastEdited),3)]),(0,o.Lk)("div",Jl,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.editNote&&a.editNote(...e)),class:"flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base bg-blue-600 rounded-md hover:bg-blue-700 transition"},[(0,o.bF)(i,{icon:["fas","edit"],class:"mr-2"}),t[7]||(t[7]=(0,o.eW)(" Edit "))]),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>a.showExportOptions=!a.showExportOptions),class:(0,r.C4)(`flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base ${a.themeClasses.button} rounded-md transition relative`)},[(0,o.bF)(i,{icon:["fas","file-export"],class:"mr-2"}),t[11]||(t[11]=(0,o.eW)(" Export ")),a.showExportOptions?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(`absolute right-0 mt-2 w-48 sm:w-56 ${a.themeClasses.card} rounded-md shadow-lg py-1 z-10 max-w-full`)},[(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>a.exportNote("pdf")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${a.themeClasses.hover}`)},[(0,o.bF)(i,{icon:["fas","file-code"],class:"mr-2"}),t[8]||(t[8]=(0,o.eW)(" HTML for PDF conversion "))],2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>a.exportNote("word")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${a.themeClasses.hover}`)},[(0,o.bF)(i,{icon:["fas","file-word"],class:"mr-2"}),t[9]||(t[9]=(0,o.eW)(" Word Document (.doc) "))],2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>a.exportNote("text")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${a.themeClasses.hover}`)},[(0,o.bF)(i,{icon:["fas","file-alt"],class:"mr-2"}),t[10]||(t[10]=(0,o.eW)(" Plain Text (.txt) "))],2)],2)):(0,o.Q3)("",!0)],2)])]),(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.card} rounded-lg p-4 sm:p-6 mb-6`)},[(0,o.Lk)("div",Yl,[(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-semibold ${a.fontSizeClasses.body}`)},"Study Session",2),(0,o.Lk)("div",en,[(0,o.Lk)("div",tn,[(0,o.bF)(i,{icon:["fas","clock"],class:"text-blue-400"}),(0,o.Lk)("span",{class:(0,r.C4)(a.themeClasses.secondaryText)},(0,r.v_)(a.formattedElapsedTime),3)]),a.isTracking?((0,o.uX)(),(0,o.CE)("div",sn,[(0,o.bF)(i,{icon:["far","circle"],class:"animate-pulse"}),t[12]||(t[12]=(0,o.Lk)("span",null,"Auto-tracking study time",-1))])):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(`text-sm ${a.themeClasses.tertiaryText}`)}," Study time tracking will start automatically ",2))])]),a.isActiveSession?((0,o.uX)(),(0,o.CE)("div",an,[(0,o.Lk)("div",on,[(0,o.bF)(i,{icon:["far","circle"],class:"text-green-400 animate-pulse"}),t[13]||(t[13]=(0,o.Lk)("span",null,"Study session active - Tracking your reading time",-1))])])):(0,o.Q3)("",!0)],2),(0,o.Lk)("div",rn,[(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.card} rounded-lg p-4 sm:p-6`)},[(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-semibold mb-4 ${a.fontSizeClasses.body}`)},"Original Text",2),(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.input} rounded-lg p-3 sm:p-4 ${a.themeClasses.text} h-64 sm:h-96 overflow-y-auto overflow-x-hidden text-sm sm:text-base break-words`),onScroll:t[5]||(t[5]=(...e)=>a.onNoteScroll&&a.onNoteScroll(...e))},(0,r.v_)(a.note.originalText),35)],2),(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.card} rounded-lg p-4 sm:p-6`)},[(0,o.Lk)("div",ln,[(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-semibold ${a.fontSizeClasses.body}`)},"AI Summary",2),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>a.generateSummary&&a.generateSummary(...e)),class:"w-full sm:w-auto px-3 py-2 sm:px-3 sm:py-1 bg-blue-600 rounded text-sm hover:bg-blue-700 transition",disabled:a.isGeneratingSummary},[(0,o.bF)(i,{icon:["fas","sync-alt"],class:"mr-1",spin:a.generatingSummary},null,8,["spin"]),(0,o.eW)(" "+(0,r.v_)(a.generatingSummary?"Generating...":"Generate Summary"),1)],8,nn)]),(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.input} rounded-lg p-3 sm:p-4 ${a.themeClasses.text} h-64 sm:h-96 overflow-y-auto overflow-x-hidden text-sm sm:text-base break-words whitespace-pre-line`)},(0,r.v_)(a.note.summary||'No summary available. Click "Generate Summary" to create one.'),3)],2)]),(0,o.Lk)("div",{class:(0,r.C4)(`${a.themeClasses.card} rounded-lg p-4 sm:p-6 mb-6`)},[(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-semibold mb-4 ${a.fontSizeClasses.body}`)},"Keywords & Tags",2),(0,o.Lk)("div",cn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.note.keywords,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:`keyword-${t}`,class:"px-2 py-1 sm:px-3 sm:py-1 bg-blue-600 rounded-full text-xs sm:text-sm"},(0,r.v_)(e),1)))),128))])],2)])):a.error?((0,o.uX)(),(0,o.CE)("div",dn,[(0,o.bF)(i,{icon:["fas","times"],class:"text-4xl text-red-400 mb-4"}),(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-medium mb-2 ${a.fontSizeClasses.heading}`)},"Error Loading Note",2),(0,o.Lk)("p",{class:(0,r.C4)(`${a.themeClasses.tertiaryText} mb-4`)},(0,r.v_)(a.error),3),(0,o.bF)(c,{to:"/notes",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)(" Back to Notes ")]))),_:1,__:[14]})])):((0,o.uX)(),(0,o.CE)("div",un,[(0,o.bF)(i,{icon:["fas","exclamation-circle"],class:"text-4xl text-gray-400 mb-4"}),(0,o.Lk)("h2",{class:(0,r.C4)(`${a.themeClasses.text} font-medium mb-2 ${a.fontSizeClasses.heading}`)},"Note Not Found",2),(0,o.Lk)("p",{class:(0,r.C4)(`${a.themeClasses.tertiaryText} mb-4`)},"The note you're looking for doesn't exist or has been deleted.",2),(0,o.bF)(c,{to:"/notes",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" Back to Notes ")]))),_:1,__:[15]})]))],2)])),_:1},8,["onOpenProfileModal"])}function mn(){const e=(0,g.lq)(),t=(0,pe.KR)(null),s=(0,pe.KR)(!1),a=(0,pe.KR)(0),r=(0,pe.KR)(null),l=(0,pe.KR)(null),n=(0,pe.KR)({totalSessions:0,totalMinutes:0,totalHours:0,avgSessionMinutes:0,totalNotesStudied:0,totalQuizzesTaken:0,avgQuizScore:null,lastSessionDate:null,currentStreak:0}),i=(0,pe.KR)("general_study"),c=(0,pe.KR)([]),d=(0,pe.KR)(0),u=(0,pe.KR)(0),m=(0,pe.KR)(null),p=(0,o.EW)((()=>{const e=Math.floor(a.value/3600),t=Math.floor(a.value%3600/60),s=a.value%60;return e>0?`${e}:${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${t}:${s.toString().padStart(2,"0")}`})),b=(0,o.EW)((()=>t.value&&!t.value.duration_minutes)),f=()=>{document.hidden?(console.log("🔄 Pausing timer - tab hidden"),L()):!document.hidden&&s.value&&(console.log("🔄 Resuming timer - tab visible"),C())},y=(0,pe.KR)(Date.now()),h=(0,pe.KR)(null),x=3e5,v=()=>{y.value=Date.now(),h.value&&clearTimeout(h.value),h.value=setTimeout((()=>{s.value&&(console.log("🔄 Auto-pausing timer due to inactivity"),L())}),x),q()},k=()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart"];e.forEach((e=>{document.addEventListener(e,v,!0)}))},w=()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart"];e.forEach((e=>{document.removeEventListener(e,v,!0)}))},C=()=>{l.value||(r.value=Date.now(),l.value=setInterval((()=>{a.value=Math.floor((Date.now()-r.value)/1e3)}),1e3))},L=()=>{l.value&&(clearInterval(l.value),l.value=null)},S=()=>{L(),a.value=0,r.value=null},T=async(e="general_study")=>{try{const a=await vt.startStudySession({activity:e});if(a.data.success)return t.value=a.data.data,i.value=e,s.value=!0,C(),c.value.push({type:e,timestamp:new Date,sessionId:t.value.id}),{success:!0,session:t.value};throw new Error(a.data.message||"Failed to start session")}catch(a){return console.error("Error starting study session:",a),{success:!1,error:a.message}}},E=async(e={})=>{if(!t.value)return{success:!1,error:"No active session"};try{const a={session_id:t.value.id,notes_studied:e.notesStudied||d.value,quizzes_taken:e.quizzesTaken||u.value,average_score:e.averageScore||m.value,focus_level:e.focusLevel||"medium"},o=await vt.endStudySession(a);if(o.data.success){const e=o.data.data;return t.value=null,s.value=!1,L(),d.value=0,u.value=0,m.value=null,{success:!0,session:e}}throw new Error(o.data.message||"Failed to end session")}catch(a){return console.error("Error ending study session:",a),{success:!1,error:a.message}}},N=async e=>{if(t.value)try{const s=await vt.updateStudySessionActivity({session_id:t.value.id,activity:e});s.data.success&&(i.value=e,c.value.push({type:e,timestamp:new Date,sessionId:t.value.id}))}catch(s){console.error("Error updating activity:",s)}},_=async()=>{try{const e=await vt.getActiveStudySession();if(e.data.success&&e.data.data){if(t.value=e.data.data,s.value=!0,t.value.start_time){const e=new Date(t.value.start_time).getTime(),s=Date.now();a.value=Math.floor((s-e)/1e3),C()}return{success:!0,session:t.value}}return t.value=null,s.value=!1,{success:!0,session:null}}catch(e){return console.error("Error getting active session:",e),{success:!1,error:e.message}}},A=async(e=null,t=null)=>{try{const s=await vt.getStudySessionStats(e,t);if(s.data.success)return n.value=s.data.data,{success:!0,stats:n.value};throw new Error(s.data.message||"Failed to get stats")}catch(s){return console.error("Error getting study stats:",s),{success:!1,error:s.message}}},z=async(e,t)=>{try{const s=await vt.getDailyStudyStats(e,t);if(s.data.success)return{success:!0,dailyStats:s.data.data};throw new Error(s.data.message||"Failed to get daily stats")}catch(s){return console.error("Error getting daily stats:",s),{success:!1,error:s.message}}},I=async()=>{try{const e=await vt.getStudyStreak();if(e.data.success)return{success:!0,streak:e.data.data};throw new Error(e.data.message||"Failed to get streak")}catch(e){return console.error("Error getting study streak:",e),{success:!1,error:e.message}}},F=()=>{d.value++},R=(e=null)=>{u.value++,null!==e&&(null===m.value?m.value=e:m.value=(m.value+e)/2)},P=e=>{i.value=e,s.value&&N(e)},D=["/notes","/quizzes"];(0,o.wB)((()=>e.path),(async(e,t)=>{const a=D.some((t=>e.startsWith(t))),o=D.some((e=>t&&t.startsWith(e)));if(a&&!s.value){const t=e.startsWith("/notes")?"reading_notes":"taking_quiz";console.log("🔄 Auto-starting study session for activity:",t),await T(t)}else!a&&o&&s.value&&(console.log("🔄 Auto-ending study session due to route change"),await E())}),{immediate:!0});const Q=(0,pe.KR)(null),U=(0,pe.KR)(null),O=()=>{Q.value||(Q.value=setInterval((async()=>{if(s.value&&t.value)try{await vt.updateStudySessionActivity({session_id:t.value.id,activity:i.value})}catch(e){console.error("Auto-save failed:",e)}}),3e4))},G=()=>{Q.value&&(clearInterval(Q.value),Q.value=null)},$=()=>{U.value&&clearTimeout(U.value),U.value=setTimeout((async()=>{s.value&&(console.log("🔄 Auto-ending study session due to extended inactivity"),await E())}),72e5)},q=()=>{s.value&&$()},M=()=>{U.value&&(clearTimeout(U.value),U.value=null)},j=async()=>{if(s.value){console.log("🔄 Ending study session due to page unload");try{await E()}catch(e){console.error("Failed to end session on unload:",e)}}};return(0,o.sV)((async()=>{await _(),s.value&&(O(),$()),document.addEventListener("visibilitychange",f),window.addEventListener("beforeunload",j),k(),v()})),(0,o.hi)((()=>{L(),G(),M(),document.removeEventListener("visibilitychange",f),window.removeEventListener("beforeunload",j),w(),h.value&&clearTimeout(h.value)})),(0,o.wB)(s,(e=>{e?(O(),$()):(G(),M())})),{currentSession:t,isTracking:s,elapsedTime:a,sessionStats:n,currentActivity:i,activities:c,notesStudied:d,quizzesTaken:u,averageScore:m,formattedElapsedTime:p,isActiveSession:b,startStudySession:T,endStudySession:E,updateActivity:N,getActiveSession:_,getStudyStats:A,getDailyStats:z,getStudyStreak:I,incrementNotesStudied:F,incrementQuizzesTaken:R,setCurrentActivity:P,startTimer:C,stopTimer:L,resetTimer:S,startAutoEndTimer:$,resetAutoEndTimer:q,stopAutoEndTimer:M}}var pn={name:"NoteDetailView",components:{Header:Is},setup(){const e=(0,n.Pj)(),t=(0,g.rd)(),s=(0,g.lq)(),{showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,showSuccess:m,showInfo:p,showWarning:b,showError:f}=ft(),{user:y,loadUserProfile:h,getProfilePictureUrl:x}=Lt(),{currentSession:v,isTracking:k,formattedElapsedTime:w,isActiveSession:C,endStudySession:L,setCurrentActivity:S}=mn(),T=(0,pe.KR)(null),E=(0,pe.KR)(!0),N=(0,pe.KR)(!1),_=(0,pe.KR)(null),A=(0,pe.KR)(!1),z=(0,pe.KR)(!1),I=(0,pe.KR)(!1),F=(0,o.EW)((()=>A.value)),R=(0,o.EW)((()=>e.getters["app/getSidebarVisible"])),P=()=>{e.dispatch("app/toggleSidebar")},D=()=>{I.value=!I.value},Q=()=>{I.value=!1},U=()=>{I.value=!1},O=async()=>{try{e.dispatch("auth/logout"),localStorage.removeItem("user"),localStorage.removeItem("token"),I.value=!1,t.push("/login")}catch(_){b("Error logging out","Please try again")}},G=()=>{},$=()=>{},q=(0,o.EW)((()=>{try{const t=e.getters["app/getThemeClasses"];return t&&"object"===typeof t?t:{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}catch(_){return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}})),M=(0,o.EW)((()=>{try{return e.getters["app/getFontSizeClasses"]}catch(_){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}}));(0,o.sV)((async()=>{try{await h();const e=parseInt(s.params.id);if(!e||isNaN(e))return _.value="Invalid note ID",void(E.value=!1);const t=await vt.getNote(e);if(t.data.success&&t.data.data){const e=t.data.data;T.value={id:e.id,title:e.title||"Untitled Note",lastEdited:e.last_edited||"Unknown",originalText:e.original_text||"No content available",summary:e.summary||"No summary available",keywords:e.keywords?e.keywords.split(",").map((e=>e.trim())):[]}}else _.value=t.data?.error||"Note not found"}catch(_){console.error("Error loading note:",_),_.value="Failed to load note. Please try again."}finally{E.value=!1}}));const j=()=>{T.value&&t.push(`/notes/edit?id=${T.value.id}`)},K=async e=>{if(T.value&&T.value.id)try{console.log(`Exporting note ${T.value.id} as ${e}...`),N.value=!1;const t="word"===e?"docx":"text"===e?"txt":e,s="pdf"===e?"html":"word"===e?"doc":"text"===e?"txt":e;console.log(`Making API call to export with backendFormat: ${t}`);const a=await vt.exportNote(T.value.id,t);console.log("API response received:",a),console.log("Response data type:",typeof a.data),console.log("Response data length:",a.data?a.data.length:"N/A");const o="pdf"===t?"text/html":"docx"===t?"application/msword":"text/plain";console.log(`Creating blob with MIME type: ${o}`);const r=new Blob([a.data],{type:o});console.log("Blob created:",r),console.log("Blob size:",r.size);const l=window.URL.createObjectURL(r);console.log("Blob URL created:",l);const n=document.createElement("a");n.href=l;const i=T.value.title.replace(/[^a-z0-9]/gi,"_").toLowerCase(),c="pdf"===e?`${i}_for_pdf.${s}`:`${i}_export.${s}`;n.download=c,console.log("Download filename:",c),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l),console.log(`Note exported as ${e} successfully`),alert(`File exported successfully! Check your downloads folder for "${c}"`)}catch(_){console.error("Export error:",_),console.error("Error details:",_.response||_.message),alert(`Failed to export note as ${e.toUpperCase()}. Please try again. Error: ${_.message}`)}else alert("No note to export")},W=async()=>{if(T.value&&!A.value){A.value=!0;try{console.log("Starting summary generation for note:",T.value.id),console.log("Making API call to createSummary...");const e=await vt.createSummary(T.value.id,{length:"auto"});if(console.log("Summary API response received"),console.log("Response status:",e?.status),console.log("Response data:",e?.data),console.log("Response data type:",typeof e?.data),console.log("Response data success:",e?.data?.success),e.data.success){console.log("Summary created successfully, refreshing note data...");const e=await vt.getNote(T.value.id);if(console.log("Note refresh response:",e.data),e.data.success&&e.data.data){const t=e.data.data.summary;console.log("New summary from server:",t),T.value.summary=t,console.log("Updated note summary in UI:",T.value.summary)}else console.error("Failed to refresh note data:",e.data);alert("Summary generated successfully!")}else{console.error("Summary generation failed:",e.data);const t=e.data?.error||e.data?.message||"Unknown error";alert("Failed to generate summary: "+t)}}catch(_){console.error("Error generating summary:",_);let t="Failed to generate summary. Please try again.";if(_.response){console.error("Server error response:",_.response.data);const s=_.response.data?.error||_.response.data?.message;s?t="Failed to generate summary: "+s:401===_.response.status?t="Authentication failed. Please log in again.":403===_.response.status?t="Access denied. You may not have permission to modify this note.":_.response.status>=500&&(t="Server error. Please try again later.")}else _.request?(console.error("Network error - no response received"),t="Network error. Please check your connection and try again."):(console.error("Request setup error:",_.message),t="Request error: "+_.message);alert(t)}finally{A.value=!1}}},X=async()=>{const e=await L({notesStudied:1,focusLevel:"medium"});e.success?m("Study session ended!",`You studied for ${w.value}`):f("Failed to end study session",e.error)},V=()=>{k.value&&S("reading_notes")};return{note:T,isLoading:E,error:_,showExportOptions:N,generatingSummary:A,isGeneratingSummary:F,sidebarOpen:z,themeClasses:q,fontSizeClasses:M,sidebarVisible:R,showUserMenu:I,editNote:j,exportNote:K,generateSummary:W,toggleSidebar:P,toggleUserMenu:D,closeUserMenu:Q,openProfileModal:U,logout:O,handleImageError:G,handleImageLoad:$,showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,showSuccess:m,showInfo:p,showWarning:b,showError:f,user:y,loadUserProfile:h,getProfilePictureUrl:x,currentSession:v,isTracking:k,formattedElapsedTime:w,isActiveSession:C,endStudySession:X,onNoteScroll:V}}};const bn=(0,c.A)(pn,[["render",gn]]);var fn=bn;const yn={key:0,class:"flex justify-center items-center h-full"},hn={key:1,class:"flex flex-col items-center justify-center h-full"},xn={key:2},vn={class:"flex flex-col justify-between items-start mb-6 space-y-4",style:{"flex-direction":"column !important"}},kn={class:"w-full sm:w-auto flex-1"},wn={class:"flex items-center space-x-3 mb-2"},Cn={class:"text-xl sm:text-2xl font-bold flex-1"},Ln={class:"flex space-x-2 sm:space-x-3 w-full sm:w-auto"},Sn=["disabled"],Tn={class:"grid grid-cols-1 gap-4 sm:gap-6",style:{"grid-template-columns":"1fr"}},En={class:"relative"},Nn={class:"absolute top-2 right-2 flex space-x-2"},_n={key:0,class:"mt-4"},An=["innerHTML"],zn={class:"flex flex-col justify-between items-start mb-4 space-y-2",style:{"flex-direction":"column !important"}},In={class:"flex items-center space-x-2 w-full sm:w-auto"},Fn={class:"relative"},Rn={class:"absolute top-2 right-2 flex space-x-2"},Pn=["disabled"],Dn={class:"flex flex-wrap gap-2 mb-4"},Qn=["onClick"];function Un(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link"),u=(0,o.g2)("CameraModal"),g=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(g,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.sidebarOpen=!l.sidebarOpen),class:(0,r.C4)(`md:hidden fixed top-20 left-4 z-50 ${l.themeClasses.card} p-2 rounded-md shadow-lg`)},[(0,o.bF)(c,{icon:["fas",l.sidebarOpen?"times":"bars"]},null,8,["icon"])],2),l.sidebarOpen?((0,o.uX)(),(0,o.CE)("div",{key:0,onClick:t[1]||(t[1]=e=>l.sidebarOpen=!1),class:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40"})):(0,o.Q3)("",!0),(0,o.Lk)("main",{class:(0,r.C4)(`${l.themeClasses.mainContent} flex-1 p-4 sm:p-6 transition-all duration-300 ease-in-out`)},[l.isLoading?((0,o.uX)(),(0,o.CE)("div",yn,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-4xl text-blue-500"})])):l.error?((0,o.uX)(),(0,o.CE)("div",hn,[(0,o.bF)(c,{icon:["fas","times"],class:"text-4xl text-red-400 mb-4"}),(0,o.Lk)("h2",{class:(0,r.C4)(`${l.themeClasses.text} font-medium mb-2 ${l.fontSizeClasses.heading}`)},"Error Loading Note",2),(0,o.Lk)("p",{class:(0,r.C4)(`${l.themeClasses.tertiaryText} mb-4`)},(0,r.v_)(l.error),3),(0,o.bF)(d,{to:"/notes",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)(" Back to Notes ")]))),_:1,__:[16]})])):((0,o.uX)(),(0,o.CE)("div",xn,[(0,o.Lk)("div",vn,[(0,o.Lk)("div",kn,[(0,o.Lk)("div",wn,[(0,o.Lk)("h1",Cn,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.note.title=e),class:(0,r.C4)(`bg-transparent ${l.themeClasses.border} focus:border-blue-500 focus:outline-none pb-1 w-full ${l.fontSizeClasses.heading} ${l.themeClasses.text}`),placeholder:"Note Title"},null,2),[[a.Jo,l.note.title]])])]),(0,o.Lk)("p",{class:(0,r.C4)(`${l.themeClasses.tertiaryText} ${l.fontSizeClasses.label}`)},"Last edited: "+(0,r.v_)(l.note.lastEdited),3)]),(0,o.Lk)("div",Ln,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.saveNote&&l.saveNote(...e)),disabled:l.isSaving,class:"flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base bg-blue-600 rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[(0,o.bF)(c,{icon:l.isSaving?["fas","spinner"]:["fas","save"],spin:l.isSaving,class:"mr-2"},null,8,["icon","spin"]),(0,o.eW)(" "+(0,r.v_)(l.isSaving?"Saving...":"Save"),1)],8,Sn),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>l.showExportOptions=!l.showExportOptions),class:(0,r.C4)(`flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base ${l.themeClasses.button} rounded-md transition relative`)},[(0,o.bF)(c,{icon:["fas","file-export"],class:"mr-2"}),t[20]||(t[20]=(0,o.eW)(" Export ")),l.showExportOptions?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(`absolute right-0 mt-2 w-48 sm:w-56 ${l.themeClasses.card} rounded-md shadow-lg py-1 z-10 max-w-full`)},[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>l.exportNote("pdf")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${l.themeClasses.hover}`)},[(0,o.bF)(c,{icon:["fas","file-code"],class:"mr-2"}),t[17]||(t[17]=(0,o.eW)(" HTML for PDF conversion "))],2),(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>l.exportNote("word")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${l.themeClasses.hover}`)},[(0,o.bF)(c,{icon:["fas","file-word"],class:"mr-2"}),t[18]||(t[18]=(0,o.eW)(" Word Document (.doc) "))],2),(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>l.exportNote("text")),class:(0,r.C4)(`block w-full text-left px-4 py-2 ${l.themeClasses.hover}`)},[(0,o.bF)(c,{icon:["fas","file-alt"],class:"mr-2"}),t[19]||(t[19]=(0,o.eW)(" Plain Text (.txt) "))],2)],2)):(0,o.Q3)("",!0)],2)])]),(0,o.Lk)("div",Tn,[(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.card} rounded-lg p-4 sm:p-6`)},[(0,o.Lk)("h2",{class:(0,r.C4)(`${l.themeClasses.text} font-semibold mb-4 ${l.fontSizeClasses.body}`)},"Original Text",2),(0,o.Lk)("div",En,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.note.originalText=e),class:(0,r.C4)(`w-full h-64 sm:h-96 ${l.themeClasses.input} rounded-lg p-3 sm:p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base overflow-x-hidden resize-none`),placeholder:"OCR extracted text will appear here"},null,2),[[a.Jo,l.note.originalText]]),(0,o.Lk)("div",Nn,[(0,o.Lk)("button",{title:"Edit Original Text",class:(0,r.C4)(`p-1 ${l.themeClasses.button} rounded`)},[(0,o.bF)(c,{icon:["fas","edit"],class:"text-xs sm:text-sm"})],2),(0,o.Lk)("button",{title:"Rescan",class:(0,r.C4)(`p-1 ${l.themeClasses.button} rounded`)},[(0,o.bF)(c,{icon:["fas","camera"],class:"text-xs sm:text-sm"})],2)])]),l.note.keywords.length>0&&l.note.originalText?((0,o.uX)(),(0,o.CE)("div",_n,[(0,o.Lk)("h3",{class:(0,r.C4)(`${l.themeClasses.secondaryText} text-sm font-medium mb-2`)},"Highlighted Keywords:",2),(0,o.Lk)("div",{class:(0,r.C4)(`w-full min-h-32 max-h-64 ${l.themeClasses.input} rounded-lg p-3 sm:p-4 text-sm sm:text-base overflow-y-auto border ${l.themeClasses.border}`),innerHTML:l.highlightedOriginalText},null,10,An)])):(0,o.Q3)("",!0)],2),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.card} rounded-lg p-4 sm:p-6`)},[(0,o.Lk)("div",zn,[(0,o.Lk)("h2",{class:(0,r.C4)(`${l.themeClasses.text} font-semibold ${l.fontSizeClasses.body}`)},"AI Summary",2),(0,o.Lk)("div",In,[(0,o.Lk)("span",{class:(0,r.C4)(`${l.themeClasses.tertiaryText} text-xs sm:text-sm`)},"Length:",2),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.summaryLength=e),class:(0,r.C4)(`${l.themeClasses.input} rounded px-2 py-1 sm:p-1 text-xs sm:text-sm flex-1 sm:flex-none`)},t[21]||(t[21]=[(0,o.Lk)("option",{value:"auto"},"Auto",-1),(0,o.Lk)("option",{value:"short"},"Short",-1),(0,o.Lk)("option",{value:"medium"},"Medium",-1),(0,o.Lk)("option",{value:"long"},"Long",-1)]),2),[[a.u1,l.summaryLength]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.summaryFormat=e),class:(0,r.C4)(`${l.themeClasses.input} rounded px-2 py-1 sm:p-1 text-xs sm:text-sm flex-1 sm:flex-none ml-2`)},t[22]||(t[22]=[(0,o.Lk)("option",{value:"paragraph"},"Paragraph",-1),(0,o.Lk)("option",{value:"bullet_points"},"Bullet Points",-1)]),2),[[a.u1,l.summaryFormat]])])]),(0,o.Lk)("div",Fn,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.note.summary=e),class:(0,r.C4)(`w-full h-64 sm:h-96 ${l.themeClasses.input} rounded-lg p-3 sm:p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base overflow-x-hidden resize-none whitespace-pre-line`),placeholder:"AI-generated summary will appear here",style:{"white-space":"pre-line"}},null,2),[[a.Jo,l.note.summary]]),(0,o.Lk)("div",Rn,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>l.generateSummary&&l.generateSummary(...e)),disabled:l.generatingSummary,title:"Regenerate Summary",class:(0,r.C4)(`p-1 ${l.themeClasses.button} rounded disabled:opacity-50 disabled:cursor-not-allowed`)},[(0,o.bF)(c,{icon:["fas","sync-alt"],class:"text-xs sm:text-sm",spin:l.generatingSummary},null,8,["spin"])],10,Pn),(0,o.Lk)("button",{title:"Copy to Clipboard",class:(0,r.C4)(`p-1 ${l.themeClasses.button} rounded`)},[(0,o.bF)(c,{icon:["fas","copy"],class:"text-xs sm:text-sm"})],2)])])],2)]),(0,o.Lk)("div",{class:(0,r.C4)(`mt-6 ${l.themeClasses.card} rounded-lg p-4 sm:p-6`)},[(0,o.Lk)("h2",{class:(0,r.C4)(`${l.themeClasses.text} font-semibold mb-4 ${l.fontSizeClasses.body}`)},"Keywords & Tags",2),(0,o.Lk)("div",Dn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.note.keywords,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:`keyword-${t}`,class:"px-2 py-1 sm:px-3 sm:py-1 bg-blue-600 rounded-full text-xs sm:text-sm flex items-center"},[(0,o.eW)((0,r.v_)(e)+" ",1),(0,o.Lk)("button",{onClick:e=>l.removeKeyword(t),class:"ml-1 sm:ml-2 text-xs"},[(0,o.bF)(c,{icon:["fas","times"]})],8,Qn)])))),128)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.newKeyword=e),onKeyup:t[14]||(t[14]=(0,a.jR)(((...e)=>l.addKeyword&&l.addKeyword(...e)),["enter"])),class:(0,r.C4)(`px-2 py-1 sm:px-3 sm:py-1 ${l.themeClasses.input} rounded-full text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 flex-1 min-w-0`),placeholder:"Add keyword..."},null,34),[[a.Jo,l.newKeyword]])]),(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>l.extractKeywords&&l.extractKeywords(...e)),class:(0,r.C4)(`px-3 py-2 sm:px-3 sm:py-1 ${l.themeClasses.button} rounded text-sm transition w-full sm:w-auto`)},[(0,o.bF)(c,{icon:["fas","magic"],class:"mr-1"}),t[23]||(t[23]=(0,o.eW)(" Auto-extract Keywords "))],2)],2)]))],2),(0,o.bF)(u,{show:l.showCameraModal,onClose:l.closeCameraModal,onPhotoCaptured:l.handlePhotoCaptured},null,8,["show","onClose","onPhotoCaptured"])])),_:1},8,["onOpenProfileModal"])}var On={name:"NoteEditorView",components:{Header:Is,CameraModal:Jt},setup(){const e=(0,n.Pj)(),t=(0,g.rd)(),s=(0,g.lq)(),a=(0,pe.KR)({title:"",lastEdited:(new Date).toLocaleString(),originalText:"",summary:"",keywords:[]}),r=(0,pe.KR)("auto"),l=(0,pe.KR)("paragraph"),i=(0,pe.KR)(""),c=(0,pe.KR)("medium"),d=(0,pe.KR)("5"),u=(0,pe.KR)([]),m=(0,pe.KR)(!1),p=(0,pe.KR)(null),b=(0,pe.KR)(!1),f=(0,pe.KR)(!1),y=(0,pe.KR)(!1),h=(0,pe.KR)(!1),x=(0,pe.KR)(!1),v=(0,o.EW)((()=>{try{const t=e.getters["app/getThemeClasses"];return t&&"object"===typeof t?t:{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}catch(p){return{main:"bg-gray-900 text-white",header:"bg-gray-800",sidebar:"bg-gray-800",mainContent:"",card:"bg-gray-800",text:"text-white",secondaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white",button:"bg-gray-700 hover:bg-gray-600"}}})),k=(0,o.EW)((()=>{try{return e.getters["app/getFontSizeClasses"]}catch(p){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}})),w=(0,o.EW)((()=>{if(!a.value.originalText||0===a.value.keywords.length)return a.value.originalText;let e=a.value.originalText;const t=a.value.keywords.filter((e=>""!==e.trim()));if(0===t.length)return e;const s=t.sort(((e,t)=>t.length-e.length)),o=s.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|"),r=new RegExp(`(${o})`,"gi");return e.replace(r,'<span class="keyword-highlight">$1</span>')}));(0,o.sV)((async()=>{try{const t=s.query.id;if(t){m.value=!0;const e=await vt.getNote(t);if(e.data.success&&e.data.data){const t=e.data.data;a.value={id:t.id,title:t.title||"",lastEdited:t.last_edited||(new Date).toLocaleString(),originalText:t.original_text||"",summary:t.summary||"",keywords:t.keywords?t.keywords.split(",").map((e=>e.trim())):[],summaryFormat:t.summary_format||"paragraph"}}else p.value=e.data?.error||"Note not found"}else{const t=e.getters["notes/getTempImageData"];t&&(a.value.originalText=t.originalText,L())}}catch(p){console.error("Error loading note:",p),p.value="Failed to load note. Please try again."}finally{m.value=!1}}));const C=async()=>{if(console.log("🔄 saveNote called - Current state:",{isSaving:b.value,noteId:a.value.id,title:a.value.title,timestamp:(new Date).toISOString()}),b.value)console.log("⚠️ Save already in progress, ignoring duplicate save request");else try{const s=localStorage.getItem("user");if(!s)return alert("You must be logged in to save notes. Please log in and try again."),void t.push("/login");let o;try{o=JSON.parse(s)}catch(e){return console.error("Invalid user data in localStorage:",e),alert("Authentication data is corrupted. Please log in again."),localStorage.removeItem("user"),localStorage.removeItem("token"),void t.push("/login")}if(!o||!o.id)return alert("Invalid user session. Please log in again."),void t.push("/login");if(!a.value.title.trim())return void alert("Please enter a title for your note.");if(!a.value.originalText.trim())return void alert("Please add some content to your note.");b.value=!0,console.log("✅ Saving state set to true"),a.value.lastEdited=(new Date).toLocaleString();const r={title:a.value.title,text:a.value.originalText,summary:a.value.summary,keywords:a.value.keywords.join(",")};if(console.log("📝 Saving note:",{hasId:!!a.value.id,noteId:a.value.id,noteData:r,userId:o.id}),console.log("🔑 Current localStorage state:",{token:!!localStorage.getItem("token"),user:localStorage.getItem("user")}),a.value.id){console.log("🔄 Updating existing note with ID:",a.value.id);const e=await vt.updateNote(a.value.id,r);if(console.log("📤 Update response:",e.data),!e.data.success)throw new Error(e.data.error||"Failed to update note");console.log("✅ Note updated successfully!"),alert("Note updated successfully!"),t.push("/notes?refresh=true")}else{console.log("🆕 Creating new note");const e=await vt.createNote(r);if(console.log("📤 Create response:",e.data),!e.data.success)throw new Error(e.data.error||"Failed to save note");console.log("✅ Note created successfully with ID:",e.data.note_id||e.data.data?.note_id),a.value.id=e.data.note_id||e.data.data?.note_id,alert("Note saved successfully!"),t.push("/notes?refresh=true")}}catch(p){console.error("Error saving note:",p);let t="Failed to save note. Please try again.";p.response?401===p.response.status?t="Authentication failed. Please log in again.":403===p.response.status?t="You do not have permission to perform this action.":p.response.data?.error&&(t=p.response.data.error):p.message&&(t=p.message),alert(t)}finally{b.value=!1}},L=async()=>{if(a.value.originalText.trim()){f.value=!0;try{if(a.value.id){console.log("Generating summary for existing note ID:",a.value.id);const e=await vt.createSummary(a.value.id,{length:r.value,format:l.value});if(console.log("Summary API response:",e),e.data.success){const e=await vt.getNote(a.value.id);e.data.success&&(a.value.summary=e.data.data.summary),alert("Summary generated successfully!")}else alert("Failed to generate summary: "+(e.data.error||"Unknown error"))}else{console.log("Generating summary for new note");const e=await vt.gpt.generateSummary(a.value.originalText,{length:r.value});console.log("GPT Summary API response:",e),e.data?(a.value.summary=e.data,alert("Summary generated successfully!")):alert("Failed to generate summary. Please try again.")}}catch(p){console.error("Error generating summary:",p);let t="Failed to generate summary. Please try again.";p.response?401===p.response.status?t="Authentication required. Please log in to generate summaries.":403===p.response.status?t="Access denied. You do not have permission to generate summaries.":p.response.data?.error?t="Summary generation failed: "+p.response.data.error:p.response.data?.message&&(t="Summary generation failed: "+p.response.data.message):p.message&&(t="Network error: "+p.message),alert(t)}finally{f.value=!1}}else alert("Please add some text to summarize first.")},S=()=>{i.value.trim()&&(a.value.keywords.push(i.value.trim()),i.value="")},T=e=>{a.value.keywords.splice(e,1)},E=()=>{console.log("Extracting keywords from text"),setTimeout((()=>{const e=["Membrane","Cytoplasm","Organelles","Nucleus"];e.forEach((e=>{a.value.keywords.includes(e)||a.value.keywords.push(e)}))}),1e3)},N=()=>{console.log("Generating quiz with difficulty:",c.value,"and",d.value,"questions"),setTimeout((()=>{u.value=[{text:"Who discovered cells in 1665?",options:["Robert Hooke","Anton van Leeuwenhoek","Matthias Schleiden","Theodor Schwann"],correctAnswer:0,selectedAnswer:null},{text:"What is the study of cells called?",options:["Microbiology","Histology","Cytology","Physiology"],correctAnswer:2,selectedAnswer:null},{text:"What is the typical size range of most plant and animal cells?",options:["0.1-1 micrometers","1-100 micrometers","100-1000 micrometers","1-10 millimeters"],correctAnswer:1,selectedAnswer:null},{text:"What encloses the cytoplasm in a cell?",options:["Cell wall","Nucleus","Membrane","Ribosome"],correctAnswer:2,selectedAnswer:null},{text:"Cells are often referred to as the:",options:["Essence of life","Building blocks of life","Foundation of organisms","Microscopic life"],correctAnswer:1,selectedAnswer:null}]}),1500)},_=()=>{let e=0;u.value.forEach((t=>{t.selectedAnswer===t.correctAnswer&&e++})),alert(`You got ${e} out of ${u.value.length} questions correct!`)},A=()=>{u.value.forEach((e=>{e.selectedAnswer=null}))},z=async e=>{if(a.value&&a.value.id)try{console.log(`Exporting note ${a.value.id} as ${e}...`);const t="word"===e?"docx":"text"===e?"txt":e,s="pdf"===e?"html":"word"===e?"doc":"text"===e?"txt":e;console.log(`Making API call to export with backendFormat: ${t}`);const o=await vt.exportNote(a.value.id,t);console.log("API response received:",o),console.log("Response data type:",typeof o.data),console.log("Response data length:",o.data?o.data.length:"N/A");const r="pdf"===t?"text/html":"docx"===t?"application/msword":"text/plain";console.log(`Creating blob with MIME type: ${r}`);const l=new Blob([o.data],{type:r});console.log("Blob created:",l),console.log("Blob size:",l.size);const n=window.URL.createObjectURL(l);console.log("Blob URL created:",n);const i=document.createElement("a");i.href=n;const c=a.value.title.replace(/[^a-z0-9]/gi,"_").toLowerCase(),d="pdf"===e?`${c}_for_pdf.${s}`:`${c}_export.${s}`;i.download=d,console.log("Download filename:",d),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n),console.log(`Note exported as ${e} successfully`),alert(`File exported successfully! Check your downloads folder for "${d}"`)}catch(p){console.error("Export error:",p),console.error("Error details:",p.response||p.message),alert(`Failed to export note as ${e.toUpperCase()}. Please try again. Error: ${p.message}`)}else alert("Please save the note first before exporting")},I=(0,pe.KR)(!1),F=()=>{I.value=!0},R=()=>{I.value=!1},P=()=>{x.value=!0},D=()=>{x.value=!1},Q=e=>{e&&e.originalText&&(a.value.originalText=e.originalText,L()),x.value=!1};return{note:a,summaryLength:r,summaryFormat:l,newKeyword:i,quizDifficulty:c,quizQuestionCount:d,quizQuestions:u,isLoading:m,error:p,isSaving:b,generatingSummary:f,showExportOptions:y,sidebarOpen:h,themeClasses:v,fontSizeClasses:k,highlightedOriginalText:w,saveNote:C,generateSummary:L,addKeyword:S,removeKeyword:T,extractKeywords:E,generateQuiz:N,checkQuizAnswers:_,resetQuiz:A,exportNote:z,showProfileModal:I,openProfileModal:F,closeProfileModal:R,showCameraModal:x,openCamera:P,closeCameraModal:D,handlePhotoCaptured:Q}}};const Gn=(0,c.A)(On,[["render",Un],["__scopeId","data-v-31ea422d"]]);var $n=Gn;const qn={key:0,class:"flex justify-center items-center h-full"},Mn={key:1,class:"flex flex-col items-center justify-center h-full"},jn={key:2},Kn={class:"mb-6"},Wn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4"},Xn={class:"flex space-x-3 mt-4 sm:mt-0"},Vn=["disabled"],Bn={class:"flex justify-between items-center mb-6"},Hn={class:"flex space-x-2"},Zn={key:0,class:"flex justify-center py-8"},Jn=["disabled"],Yn={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ei=["onClick"],ti={key:0,class:"absolute top-2 right-2 w-3 h-3 bg-green-500 rounded-full",title:"Completed"},si={key:1,class:"absolute top-2 right-2 w-3 h-3 bg-gray-500 rounded-full",title:"Not taken"},ai={class:"flex items-start justify-between mb-4"},oi={class:"flex-1"},ri={class:"text-xs"},li={class:"text-right"},ni={class:"text-sm"},ii={class:"text-green-400 font-medium"},ci={class:"text-red-400 font-medium"},di={class:"grid grid-cols-3 gap-2 text-center"},ui={class:"text-lg font-bold text-green-400"},gi={class:"text-lg font-bold text-red-400"},mi={class:"text-lg font-bold text-blue-400"},pi={class:"flex items-center justify-between"},bi={class:"flex space-x-2"},fi=["onClick"],yi=["onClick"],hi={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},xi={class:"flex items-center mb-4"},vi={class:"ml-4"},ki={class:"flex justify-end space-x-3"},wi={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ci={class:"flex justify-between items-center mb-6"},Li={key:0,class:"flex justify-center py-8"},Si={key:1,class:"space-y-4"},Ti={class:"flex justify-between items-center mb-4"},Ei={class:"flex space-x-2"},Ni={class:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto"},_i=["onClick"],Ai={class:"flex items-start space-x-3"},zi=["checked"],Ii={class:"flex-1"},Fi={class:"flex justify-end space-x-4 mt-6"},Ri=["disabled"],Pi={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Di={class:"flex justify-between items-center mb-6"},Qi={class:"mb-6"},Ui={class:"grid grid-cols-3 gap-3"},Oi=["onClick"],Gi={class:"mb-6"},$i={class:"grid grid-cols-2 gap-3"},qi=["onClick"],Mi={class:"mb-6"},ji={class:"space-y-3"},Ki=["onClick"],Wi={class:"flex space-x-4"};function Xi(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link"),u=(0,o.g2)("Header");return(0,o.uX)(),(0,o.Wv)(u,{onOpenProfileModal:l.openProfileModal},{default:(0,o.k6)((()=>[(0,o.Lk)("main",{class:(0,r.C4)(["flex-1 p-4 sm:p-6 ml-0 md:ml-0 transition-all duration-300 ease-in-out","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-900":"bg-white"]),style:{width:"100vw","max-width":"100vw"}},[l.isLoading?((0,o.uX)(),(0,o.CE)("div",qn,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-3xl sm:text-4xl text-blue-500"})])):l.error?((0,o.uX)(),(0,o.CE)("div",Mn,[(0,o.bF)(c,{icon:["fas","times"],class:"text-4xl text-red-400 mb-4"}),t[16]||(t[16]=(0,o.Lk)("h2",{class:"text-xl font-medium mb-2"},"Error Loading Quiz",-1)),(0,o.Lk)("p",{class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600","mb-4"])},(0,r.v_)(l.error),3),(0,o.bF)(d,{to:"/notes",class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition"},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" Back to Notes ")]))),_:1,__:[15]})])):((0,o.uX)(),(0,o.CE)("div",jn,[(0,o.Lk)("div",Kn,[(0,o.Lk)("div",Wn,[(0,o.Lk)("div",null,[(0,o.Lk)("h1",{class:(0,r.C4)(["font-bold mb-2",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Quizzes",2),(0,o.Lk)("p",{class:(0,r.C4)("dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600")},"Create and manage your study quizzes",2)]),(0,o.Lk)("div",Xn,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.openQuizOptions&&l.openQuizOptions(...e)),class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition",disabled:l.isGeneratingQuiz},[(0,o.bF)(c,{icon:["fas","plus"],class:"mr-2"}),(0,o.eW)(" "+(0,r.v_)(l.isGeneratingQuiz?"Generating...":"Create New Quiz"),1)],8,Vn),(0,o.bF)(d,{to:"/notes",class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300 text-gray-900"])},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","angle-left"],class:"mr-2"}),t[17]||(t[17]=(0,o.eW)(" Back to Notes "))])),_:1,__:[17]},8,["class"])])])]),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",Bn,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Your Quizzes",2),(0,o.Lk)("div",Hn,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.debugQuizStatus&&l.debugQuizStatus(...e)),class:(0,r.C4)(["text-sm","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"])},[(0,o.bF)(c,{icon:["fas","info-circle"],class:"mr-1"}),t[18]||(t[18]=(0,o.eW)(" Debug "))],2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.testQuizGeneration&&e.testQuizGeneration(...t)),class:"text-blue-400 hover:text-blue-300 text-sm"},[(0,o.bF)(c,{icon:["fas","flask"],class:"mr-1"}),t[19]||(t[19]=(0,o.eW)(" Test Quiz "))]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.loadSavedQuizzes&&l.loadSavedQuizzes(...e)),class:"text-blue-400 hover:text-blue-300 text-sm"},[(0,o.bF)(c,{icon:["fas","sync-alt"],class:"mr-1"}),t[20]||(t[20]=(0,o.eW)(" Refresh "))])])]),l.isLoadingSavedQuizzes?((0,o.uX)(),(0,o.CE)("div",Zn,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-2xl text-blue-500"}),(0,o.Lk)("span",{class:(0,r.C4)(["ml-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Loading your quizzes...",2)])):0===l.savedQuizzes.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["text-center py-12","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},[(0,o.bF)(c,{icon:["fas","book-open"],class:"text-6xl mb-6"}),(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold mb-4",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"No Quizzes Yet",2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-6","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Create your first quiz to start studying!",2),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.openNoteSelector&&l.openNoteSelector(...e)),class:"px-6 py-3 bg-blue-600 rounded-md hover:bg-blue-700 transition",disabled:l.isGeneratingQuiz},[(0,o.bF)(c,{icon:["fas","plus"],class:"mr-2"}),(0,o.eW)(" "+(0,r.v_)(l.isGeneratingQuiz?"Generating...":"Create Your First Quiz"),1)],8,Jn)],2)):((0,o.uX)(),(0,o.CE)("div",Yn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.savedQuizzes,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,r.C4)(["rounded-lg p-5 transition-all duration-200 cursor-pointer transform hover:scale-105 relative","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-white border border-gray-200 shadow-sm hover:shadow-md hover:bg-gray-50"]),onClick:t=>l.startQuiz(e.id)},[null!==e.score&&void 0!==e.score&&e.questionCount>0?((0,o.uX)(),(0,o.CE)("div",ti)):((0,o.uX)(),(0,o.CE)("div",si)),(0,o.Lk)("div",ai,[(0,o.Lk)("div",oi,[(0,o.Lk)("h4",{class:(0,r.C4)(["font-semibold mb-2",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(e.title),3),(0,o.Lk)("div",{class:(0,r.C4)(["mb-2",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},[(0,o.Lk)("span",ri,"ID: "+(0,r.v_)(e.id),1)],2),(0,o.Lk)("p",{class:(0,r.C4)(["mb-2",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])}," Created: "+(0,r.v_)(new Date(e.created_at).toLocaleDateString()),3),(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-600"])},[(0,o.bF)(c,{icon:["fas","question-circle"],class:"mr-1"}),(0,o.eW)(" "+(0,r.v_)(e.questionCount)+" questions ",1)],2)]),(0,o.Lk)("div",li,[(0,o.Lk)("div",{class:(0,r.C4)(["text-2xl font-bold mb-1",null!==e.score&&void 0!==e.score&&e.questionCount>0?e.accuracy>=80?"text-green-400":e.accuracy>=60?"text-yellow-400":"text-red-400":"text-gray-500"])},(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?e.accuracy+"%":"Not taken"),3),(0,o.Lk)("div",{class:(0,r.C4)(["mb-2",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?"Accuracy":"Status"),3),(0,o.Lk)("div",ni,[(0,o.Lk)("span",ii,(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?e.score:0),1),(0,o.Lk)("span",{class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-500":"text-gray-400","mx-1"])},"/",2),(0,o.Lk)("span",ci,(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?e.questionCount-e.score:0),1)]),(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},"Correct/Incorrect",2)])]),(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-3 mb-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-gray-100"])},[(0,o.Lk)("h5",{class:(0,r.C4)(["font-semibold mb-2",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-200":"text-gray-800"])},"Performance Statistics",2),(0,o.Lk)("div",di,[(0,o.Lk)("div",null,[(0,o.Lk)("div",ui,(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?e.score:0),1),(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},"Correct",2)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",gi,(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?e.questionCount-e.score:0),1),(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},"Incorrect",2)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",mi,(0,r.v_)(null!==e.score&&void 0!==e.score&&e.questionCount>0?(e.accuracy||0)+"%":"N/A"),1),(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])},"Accuracy",2)])]),(0,o.Lk)("div",{class:(0,r.C4)(["mt-2 pt-2 border-t","dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-500":"border-gray-300"])},[(0,o.Lk)("div",{class:(0,r.C4)(["text-center",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-600"])},[t[21]||(t[21]=(0,o.Lk)("span",{class:"font-medium"},"Difficulty:",-1)),(0,o.eW)(" "+(0,r.v_)(e.difficulty||"Medium")+" ",1),t[22]||(t[22]=(0,o.Lk)("span",{class:"mx-2"},"•",-1)),t[23]||(t[23]=(0,o.Lk)("span",{class:"font-medium"},"Type:",-1)),(0,o.eW)(" "+(0,r.v_)(l.getQuizTypeDisplay(e.quiz_type||"multiple_choice"))+" ",1),t[24]||(t[24]=(0,o.Lk)("span",{class:"mx-2"},"•",-1)),t[25]||(t[25]=(0,o.Lk)("span",{class:"font-medium"},"Questions:",-1)),(0,o.eW)(" "+(0,r.v_)(e.questionCount||0),1)],2)],2)],2),(0,o.Lk)("div",pi,[(0,o.Lk)("span",{class:(0,r.C4)(["",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])}," Difficulty: "+(0,r.v_)(e.difficulty||"Medium"),3),(0,o.Lk)("div",bi,[(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.startQuiz(e.id)),["stop"]),class:"px-3 py-1 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition"},[(0,o.bF)(c,{icon:["fas","play"],class:"mr-1"}),t[26]||(t[26]=(0,o.eW)(" Take Quiz "))],8,fi),(0,o.Lk)("button",{onClick:(0,a.D$)((t=>l.confirmDeleteQuiz(e.id)),["stop"]),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition",title:"Delete Quiz"},[(0,o.bF)(c,{icon:["fas","trash"]})],8,yi)])])],10,ei)))),128))]))],2)]))],2),l.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",hi,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-md mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",xi,[(0,o.Lk)("div",vi,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Delete Quiz",2),(0,o.Lk)("p",{class:(0,r.C4)(["mt-1",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Are you sure you want to delete this quiz? This action cannot be undone.",2)])]),(0,o.Lk)("div",ki,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.cancelDelete&&l.cancelDelete(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-200 text-gray-900 hover:bg-gray-300"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.proceedDelete&&l.proceedDelete(...e)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition"}," Delete Quiz ")])],2)])):(0,o.Q3)("",!0),l.showNoteSelector?((0,o.uX)(),(0,o.CE)("div",wi,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",Ci,[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Select Notes for Quiz Generation",2),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.closeNoteSelector&&l.closeNoteSelector(...e)),class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"])},[(0,o.bF)(c,{icon:["fas","times"],class:"text-xl"})],2)]),l.isLoadingNotes?((0,o.uX)(),(0,o.CE)("div",Li,[(0,o.bF)(c,{icon:["fas","spinner"],spin:"",class:"text-2xl text-blue-500"}),(0,o.Lk)("span",{class:(0,r.C4)(["ml-2","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},"Loading your notes...",2)])):l.availableNotes.length>0?((0,o.uX)(),(0,o.CE)("div",Si,[(0,o.Lk)("div",Ti,[(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},(0,r.v_)(l.selectedNotes.length)+" of "+(0,r.v_)(l.availableNotes.length)+" notes selected ",3),(0,o.Lk)("div",Ei,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.selectAllNotes&&l.selectAllNotes(...e)),class:"px-3 py-1 text-sm bg-blue-600 rounded-md hover:bg-blue-700 transition"}," Select All "),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.deselectAllNotes&&l.deselectAllNotes(...e)),class:(0,r.C4)(["px-3 py-1 text-sm rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Deselect All ",2)])]),(0,o.Lk)("div",Ni,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.availableNotes,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,r.C4)(["rounded-lg p-4 cursor-pointer transition-all",e.selected?"ring-2 ring-blue-500 "+("dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600":"bg-blue-50"):"dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-700 hover:bg-gray-600":"bg-white border border-gray-200 hover:bg-gray-50"]),onClick:t=>l.toggleNoteSelection(e.id)},[(0,o.Lk)("div",Ai,[(0,o.Lk)("input",{type:"checkbox",checked:e.selected,class:"mt-1 text-blue-600 focus:ring-blue-500",readonly:""},null,8,zi),(0,o.Lk)("div",Ii,[(0,o.Lk)("h3",{class:(0,r.C4)(["font-medium mb-2",l.fontSizeClasses.body,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},(0,r.v_)(e.title||"Untitled Note"),3),(0,o.Lk)("p",{class:(0,r.C4)(["mb-2 line-clamp-2",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-600"])},(0,r.v_)(e.original_text?e.original_text.substring(0,100)+"...":"No content available"),3),(0,o.Lk)("div",{class:(0,r.C4)(["",l.fontSizeClasses.small,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-500"])}," Created: "+(0,r.v_)(new Date(e.created_at).toLocaleDateString()),3)])])],10,_i)))),128))])])):((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,r.C4)(["text-center py-8","dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400":"text-gray-600"])},[(0,o.bF)(c,{icon:["fas","book"],class:"text-4xl mb-4"}),t[27]||(t[27]=(0,o.Lk)("p",{class:"mb-2"},"No notes available",-1)),t[28]||(t[28]=(0,o.Lk)("p",{class:""},"Create some notes first to generate quizzes",-1))],2)),(0,o.Lk)("div",Fi,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>l.closeNoteSelector&&l.closeNoteSelector(...e)),class:(0,r.C4)(["px-4 py-2 rounded-md transition","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.generateQuizFromSelectedNotes&&l.generateQuizFromSelectedNotes(...e)),disabled:0===l.selectedNotes.length||l.isGeneratingQuiz,class:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[(0,o.bF)(c,{icon:["fas","sync-alt"],class:"mr-2",spin:l.isGeneratingQuiz},null,8,["spin"]),(0,o.eW)(" "+(0,r.v_)(l.isGeneratingQuiz?"Generating...":`Generate Quiz (${l.selectedNotes.length})`),1)],8,Ri)])],2)])):(0,o.Q3)("",!0),l.showQuizOptions?((0,o.uX)(),(0,o.CE)("div",Pi,[(0,o.Lk)("div",{class:(0,r.C4)(["rounded-lg p-6 w-full max-w-md mx-4","dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-800":"bg-white border border-gray-200"])},[(0,o.Lk)("div",Di,[(0,o.Lk)("h2",{class:(0,r.C4)(["font-semibold",l.fontSizeClasses.heading,"dark"===l.store.getters["app/getCurrentTheme"]?"text-white":"text-gray-900"])},"Quiz Options",2),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>l.closeQuizOptions&&l.closeQuizOptions(...e)),class:(0,r.C4)(["dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"])},[(0,o.bF)(c,{icon:["fas","times"],class:"text-xl"})],2)]),(0,o.Lk)("div",Qi,[(0,o.Lk)("label",{class:(0,r.C4)(["block font-medium mb-3",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Difficulty Level",2),(0,o.Lk)("div",Ui,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(["easy","medium","hard"],(e=>(0,o.Lk)("button",{key:e,onClick:t=>l.selectedDifficulty=e,class:(0,r.C4)(["px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium capitalize",l.fontSizeClasses.label,l.selectedDifficulty===e?"border-blue-500 bg-blue-500/20 text-blue-400":"dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500":"border-gray-300 bg-gray-100/50 text-gray-600 hover:border-gray-400"])},[(0,o.bF)(c,{icon:"easy"===e?["fas","smile"]:"medium"===e?["fas","meh"]:["fas","frown"],class:"mr-2"},null,8,["icon"]),(0,o.eW)(" "+(0,r.v_)(e),1)],10,Oi))),64))])]),(0,o.Lk)("div",Gi,[(0,o.Lk)("label",{class:(0,r.C4)(["block font-medium mb-3",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Number of Questions",2),(0,o.Lk)("div",$i,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)([5,10,15,20],(e=>(0,o.Lk)("button",{key:e,onClick:t=>l.selectedQuantity=e,class:(0,r.C4)(["px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium",l.fontSizeClasses.label,l.selectedQuantity===e?"border-blue-500 bg-blue-500/20 text-blue-400":"dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500":"border-gray-300 bg-gray-100/50 text-gray-600 hover:border-gray-400"])},[(0,o.bF)(c,{icon:["fas","question-circle"],class:"mr-2"}),(0,o.eW)(" "+(0,r.v_)(e)+" Questions ",1)],10,qi))),64))])]),(0,o.Lk)("div",Mi,[(0,o.Lk)("label",{class:(0,r.C4)(["block font-medium mb-3",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"text-gray-300":"text-gray-700"])},"Quiz Type",2),(0,o.Lk)("div",ji,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(["multiple_choice","true_false","mixed"],(e=>(0,o.Lk)("button",{key:e,onClick:t=>l.selectedQuizType=e,class:(0,r.C4)(["w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left",l.fontSizeClasses.label,l.selectedQuizType===e?"border-blue-500 bg-blue-500/20 text-blue-400":"dark"===l.store.getters["app/getCurrentTheme"]?"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500":"border-gray-300 bg-gray-100/50 text-gray-600 hover:border-gray-400"])},[(0,o.bF)(c,{icon:"multiple_choice"===e?["fas","list"]:"true_false"===e?["fas","check-circle"]:["fas","random"],class:"mr-3"},null,8,["icon"]),(0,o.eW)(" "+(0,r.v_)("multiple_choice"===e?"Multiple Choice":"true_false"===e?"True/False":"Mixed Questions"),1)],10,Ki))),64))])]),(0,o.Lk)("div",Wi,[(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>l.closeQuizOptions&&l.closeQuizOptions(...e)),class:(0,r.C4)(["flex-1 px-4 py-3 rounded-lg transition-colors font-medium",l.fontSizeClasses.label,"dark"===l.store.getters["app/getCurrentTheme"]?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"])}," Cancel ",2),(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>l.proceedToNoteSelection&&l.proceedToNoteSelection(...e)),class:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors text-white font-medium"},[(0,o.bF)(c,{icon:["fas","arrow-right"],class:"mr-2"}),t[29]||(t[29]=(0,o.eW)(" Next "))])])],2)])):(0,o.Q3)("",!0)])),_:1},8,["onOpenProfileModal"])}var Vi={name:"QuizView",components:{Header:Is},setup(){const e=(0,g.lq)(),t=(0,g.rd)(),s=(0,n.Pj)(),{showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,showSuccess:m,showInfo:p,showWarning:b}=ft(),{user:f,loadUserProfile:y,getProfilePictureUrl:h}=Lt();let x=null;try{const t=e.params.id;t&&"undefined"!==t&&"null"!==t&&(x=parseInt(t),isNaN(x)&&(x=null))}catch(ve){console.error("Error parsing route params:",ve),x=null}const v=(0,pe.KR)(x),k=(0,pe.KR)("Loading..."),w=(0,pe.KR)(""),C=(0,pe.KR)(!0),L=(0,pe.KR)(null),S=(0,pe.KR)(!1),T=(0,pe.KR)(!1),E=(0,pe.KR)(!1),N=(0,pe.KR)([]),_=(0,pe.KR)([]),A=(0,pe.KR)(!1),z=(0,pe.KR)([]),I=(0,pe.KR)(!1),F=(0,pe.KR)(!1),R=(0,pe.KR)(null),P=(0,pe.KR)(!1),D=(0,pe.KR)("medium"),Q=(0,pe.KR)(10),U=(0,pe.KR)("multiple_choice"),O=(0,pe.KR)(!1),G=(0,o.EW)((()=>s.getters["app/getSidebarVisible"])),$=f,q=(0,o.EW)((()=>s.getters["app/getThemeClasses"])),M=(0,o.EW)((()=>{try{return s.getters["app/getFontSizeClasses"]}catch(L){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}})),j=()=>{s.dispatch("app/toggleSidebar")},K=()=>{O.value=!O.value},W=()=>{O.value=!1},X=()=>{O.value=!1},V=async()=>{try{t.push("/login")}catch(L){}},B=()=>{},H=()=>{},Z=async()=>{if(console.log("=== LOAD NOTE DATA START ==="),console.log("noteId.value:",v.value,"Type:",typeof v.value),!v.value)return console.log("No note ID provided, will show note selector"),C.value=!1,void console.log("=== LOAD NOTE DATA END (no noteId) ===");try{console.log("Making API call to getNote with ID:",v.value);const e=await vt.getNote(v.value);if(console.log("API response received:",e),console.log("Response data:",e.data),e.data.success&&e.data.data){const t=e.data.data;console.log("Note data loaded successfully:",t),k.value=t.title||"Untitled Note",console.log("Note title set to:",k.value)}else console.warn("API response indicates failure:",e.data),L.value=e.data?.error||"Note not found",console.log("Error set to:",L.value)}catch(e){console.error("Error loading note:",e),console.error("Error details:",{message:e.message,stack:e.stack,response:e.response}),L.value="Failed to load note data"}finally{C.value=!1,console.log("=== LOAD NOTE DATA END ===")}},J=async()=>{A.value=!0;try{const e=await vt.getNotes();e.data.success&&e.data.data?N.value=e.data.data.map((e=>({id:e.id,title:e.title||"Untitled Note",original_text:e.original_text||"",summary:e.summary||"",created_at:e.created_at,selected:!1}))):console.error("Failed to load notes:",e.data?.error)}catch(L){console.error("Error loading notes:",L)}finally{A.value=!1}},Y=e=>{const t=N.value.find((t=>t.id===e));t&&(t.selected=!t.selected,ee())},ee=()=>{_.value=N.value.filter((e=>e.selected))},te=()=>{N.value.forEach((e=>{e.selected=!0})),ee()},se=()=>{N.value.forEach((e=>{e.selected=!1})),ee()},ae=async()=>{console.log("Opening note selector modal"),E.value=!0,console.log("showNoteSelector set to:",E.value),0===N.value.length?(console.log("Loading available notes..."),await J(),console.log("Available notes loaded:",N.value.length)):console.log("Notes already loaded:",N.value.length)},oe=()=>{E.value=!1},re=()=>{P.value=!0},le=()=>{P.value=!1,D.value="medium",Q.value=10,U.value="multiple_choice"},ne=()=>{P.value=!1,ae()},ie=async()=>{0!==_.value.length?(oe(),await de(_.value)):alert("Please select at least one note to generate a quiz from.")},ce=async()=>{if(console.log("=== GENERATE NEW QUIZ BUTTON CLICKED ==="),console.log("isGeneratingQuiz:",T.value),console.log("noteId:",v.value),console.log("Current route params:",e.params),console.log("showNoteSelector:",E.value),console.log("availableNotes length:",N.value.length),T.value)return void console.log("Quiz generation already in progress, returning");0===N.value.length&&(console.log("Loading available notes..."),await J(),console.log("Available notes loaded:",N.value.length));let t=[];if(v.value){console.log("Using specific note ID:",v.value);const e=N.value.find((e=>e.id===v.value));e?(t=[e],console.log("Found specific note:",e.title)):(console.error("Specific note not found, using all available notes"),t=N.value)}else console.log("No specific note ID, using all available notes"),t=N.value;0!==t.length?(console.log("Generating quiz from",t.length,"note(s)"),await de(t)):alert("No notes available for quiz generation. Please create some notes first.")},de=async e=>{if(console.log("🎯 QUIZ GENERATION: generateQuizFromNotes function called!"),console.log("🎯 QUIZ GENERATION: Notes received:",e.length,"notes"),console.log("🎯 QUIZ GENERATION: First note preview:",e[0]?e[0].title:"No notes"),T.value)console.log("⚠️ QUIZ GENERATION: Already generating, returning early");else{T.value=!0,console.log("✅ QUIZ GENERATION: Set isGeneratingQuiz to true");try{console.log("=== FRONTEND QUIZ GENERATION START ==="),console.log("Generating quiz from",e.length,"note(s)");let a="";const o=[];for(const t of e)try{let e;if(t.original_text)e=t;else{const s=await vt.getNote(t.id);if(!s.data.success||!s.data.data){console.warn("Failed to load note:",t.id);continue}e=s.data.data}const s=e.summary&&'No summary available. Click "Generate Summary" to create one.'!==e.summary,r=s?e.summary:e.original_text;r&&r.length>10&&(a+=`\n\n--- ${e.title||"Untitled Note"} ---\n${r}`,o.push(e.title||"Untitled Note"))}catch(L){console.warn("Error loading note content:",t.id,L)}if(!a||a.length<50)return void alert("Not enough content available for quiz generation. Please ensure your selected notes have sufficient text content.");console.log("Combined content length:",a.length),console.log("Note titles:",o.join(", "));let r="General Knowledge Quiz";if(1===e.length)r=e[0].title||"Untitled Note";else if(2===e.length){const t=e[0].title||"Note 1",s=e[1].title||"Note 2";r=`${t} & ${s}`}else if(e.length>2){const t=e[0].title||"First Note",s=e.length-1;r=`${t} + ${s} more notes`}else{const e=await vt.gpt.extractKeywords(a,3);if(e.data&&e.data.success&&e.data.data){const t=e.data.data;if(Array.isArray(t)&&t.length>0){const e=t[0].toLowerCase(),s=t.length>1?t[1].toLowerCase():"";r=`${e.charAt(0).toUpperCase()+e.slice(1)}${s?" & "+s.charAt(0).toUpperCase()+s.slice(1):""} Quiz`}}}console.log("🔄 QUIZ GENERATION: Starting GPT API call..."),console.log("🔄 QUIZ GENERATION: Combined content length:",a.length),console.log("🔄 QUIZ GENERATION: Note titles:",o);const l=await vt.gpt.generateQuiz(a,{difficulty:D.value,questionCount:Q.value,noteTitle:1===o.length?o[0]:`${o.length} Selected Notes`,quizTitle:r,quizType:U.value});if(console.log("🔄 QUIZ GENERATION: GPT API response received:",l),console.log("🔄 QUIZ GENERATION: GPT response status:",l.status),console.log("🔄 QUIZ GENERATION: GPT response data:",l.data),l.data&&l.data.success&&l.data.data){const a=l.data.data.questions||l.data.data||[];if(console.log("🔄 QUIZ GENERATION: Generated questions:",a),console.log("🔄 QUIZ GENERATION: Questions count:",a.length),!Array.isArray(a)||0===a.length)return console.error("❌ QUIZ GENERATION: No questions generated"),void b("Generation Failed","No quiz questions were generated. The content may be too short or unclear.");console.log("✅ QUIZ GENERATION: Questions generated successfully, now saving to database...");const o=1===e.length?e[0].id:v.value||e[0].id;console.log("🔄 QUIZ GENERATION: Using reference note ID:",o);const n={questions:a,difficulty:D.value,source:1===e.length?"single_note":"multiple_notes",note_count:e.length,title:r,note_title:r,quiz_type:U.value,total_questions:Q.value};console.log("🔄 QUIZ GENERATION: Quiz data to save:",n),console.log("🔄 QUIZ GENERATION: Reference note ID:",o),console.log("🔄 QUIZ GENERATION: Generated questions count:",a.length),console.log("🔄 QUIZ GENERATION: First question preview:",a[0]?JSON.stringify(a[0]).substring(0,100)+"...":"No questions"),console.log("🔄 QUIZ GENERATION: About to call api.createQuiz...");const i=await vt.createQuiz(o,n);if(console.log("🔄 QUIZ GENERATION: api.createQuiz returned:",i),console.log("🔄 QUIZ GENERATION: Quiz creation API response:",i),console.log("🔄 QUIZ GENERATION: Quiz creation response data:",i.data),i.data&&i.data.success){console.log("✅ QUIZ GENERATION: Quiz creation response data:",i.data),console.log("✅ QUIZ GENERATION: Full response data keys:",Object.keys(i.data)),console.log("✅ QUIZ GENERATION: Response data.data keys:",i.data.data?Object.keys(i.data.data):"no data.data");let o=null;if(i.data.quiz_id?(o=i.data.quiz_id,console.log("✅ QUIZ GENERATION: Found quiz_id in response.data")):i.data.id?(o=i.data.id,console.log("✅ QUIZ GENERATION: Found id in response.data")):i.data.data&&i.data.data.quiz_id?(o=i.data.data.quiz_id,console.log("✅ QUIZ GENERATION: Found quiz_id in response.data.data")):i.data.data&&i.data.data.id?(o=i.data.data.id,console.log("✅ QUIZ GENERATION: Found id in response.data.data")):i.data.data&&"number"===typeof i.data.data?(o=i.data.data,console.log("✅ QUIZ GENERATION: Found numeric ID in response.data.data")):"string"!==typeof i.data.data||isNaN(parseInt(i.data.data))||(o=parseInt(i.data.data),console.log("✅ QUIZ GENERATION: Found numeric string ID in response.data.data")),console.log("✅ QUIZ GENERATION: Quiz saved successfully with ID:",o),console.log("✅ QUIZ GENERATION: Quiz ID type:",typeof o),console.log("✅ QUIZ GENERATION: Quiz ID value:",o),!o||isNaN(parseInt(o))){console.error("❌ QUIZ GENERATION: Invalid quiz ID received:",o),console.error("❌ QUIZ GENERATION: Full response data:",JSON.stringify(i.data,null,2));const e=(t,s="")=>{if("number"===typeof t&&t>0)return console.log(`Found potential quiz ID ${t} at path: ${s}`),t;if("string"===typeof t&&!isNaN(parseInt(t))&&parseInt(t)>0)return console.log(`Found potential quiz ID ${t} at path: ${s}`),parseInt(t);if(t&&"object"===typeof t)for(const a in t){const o=e(t[a],s+"."+a);if(o)return o}return null},t=e(i.data);if(!t)return void b("Save Failed","Quiz was created but received invalid quiz ID. Please try again.");console.log("✅ QUIZ GENERATION: Extracted quiz ID from deep search:",t),o=t}m("Quiz Generated!",`Created ${a.length} questions from ${e.length} selected note${e.length>1?"s":""}`),console.log("🔄 QUIZ GENERATION: Refreshing saved quizzes list...");try{await me(),console.log("✅ QUIZ GENERATION: Saved quizzes list refreshed successfully")}catch(s){console.warn("⚠️ QUIZ GENERATION: Failed to refresh quizzes list:",s)}console.log("🔄 QUIZ GENERATION: Redirecting to quiz taking view..."),console.log("🔄 QUIZ GENERATION: Redirect URL:",`/quizzes/${o}`),setTimeout((()=>{console.log("🔄 QUIZ GENERATION: Executing router.push...");try{t.push(`/quizzes/${o}`),console.log("✅ QUIZ GENERATION: Router.push completed successfully")}catch(e){console.error("❌ QUIZ GENERATION: Router.push failed:",e),m("Quiz Created Successfully!","Your quiz has been saved and is ready to take. You can find it in your quizzes list.")}}),1e3)}else{console.error("❌ QUIZ GENERATION: Quiz creation failed:",i.data?.error),console.error("❌ QUIZ GENERATION: Full quiz response:",i.data);let e="Failed to save quiz";i.data?.error?e+=": "+i.data.error:i.data?.message?e+=": "+i.data.message:401===i.status?e="Authentication failed. Please log in again.":403===i.status?e="You do not have permission to create quizzes.":500===i.status&&(e="Server error occurred. Please try again later."),b("Save Failed",e)}}else{const e=l.data?.error||"Failed to generate quiz questions";console.error("❌ QUIZ GENERATION: GPT API failed:",e),console.error("❌ QUIZ GENERATION: Full GPT response:",l),e.includes("API key")||e.includes("authentication")||e.includes("Gemini")?b("AI Service Error","AI service is not configured properly. Please check your Google Gemini API key in the .env file."):b("Generation Failed","Failed to generate quiz questions: "+e)}}catch(L){console.error("Error generating quiz:",L),alert("Failed to generate quiz. Please try again.")}finally{T.value=!1,console.log("=== FRONTEND QUIZ GENERATION END ===")}}},ue=e=>{switch(e){case"multiple_choice":return"Multiple Choice";case"true_false":return"True/False";case"mixed":return"Mixed";default:return"Multiple Choice"}},ge=()=>{console.log("=== QUIZ STATUS DEBUG ==="),console.log("Total quizzes:",z.value.length),z.value.forEach(((e,t)=>{console.log(`Quiz ${t+1} (ID: ${e.id}):`,{score:e.score,scoreType:typeof e.score,questionCount:e.questionCount,accuracy:e.accuracy,isCompleted:null!==e.score&&void 0!==e.score&&e.questionCount>0,title:e.title})}));const e=z.value.filter((e=>null!==e.score&&void 0!==e.score&&e.questionCount>0)),t=z.value.filter((e=>!(null!==e.score&&void 0!==e.score&&e.questionCount>0)));console.log("Completed quizzes:",e.length),console.log("Not taken quizzes:",t.length),alert(`Debug Info:\nTotal Quizzes: ${z.value.length}\nCompleted: ${e.length}\nNot Taken: ${t.length}\n\nCheck console for detailed quiz data.`)},me=async()=>{console.log("=== LOAD SAVED QUIZZES START ===");try{I.value=!0,console.log("Making API call to getQuizzes"),console.log("API base URL will be determined by axios configuration");const e=await vt.getQuizzes();if(console.log("API response received:",e),console.log("Response status:",e.status),console.log("Response headers:",e.headers),console.log("Response data type:",typeof e.data),console.log("Response data:",e.data),e.data&&"string"===typeof e.data&&e.data.includes("<html>"))return console.error("❌ CRITICAL: Received HTML response instead of JSON!"),console.error("❌ This indicates the API request was not routed correctly"),console.error("❌ Response contains HTML:",e.data.substring(0,200)+"..."),void(L.value="API routing error: received HTML instead of JSON");e.data.success&&e.data.data?(console.log("Processing",e.data.data.length,"quizzes"),console.log("Raw quiz data from API:",e.data.data),z.value=e.data.data.map((e=>{console.log("Processing quiz:",e.id,"Questions type:",typeof e.questions,"Questions value:",e.questions),console.log("Quiz difficulty:",e.difficulty,"Quiz type:",e.quiz_type);let t=[],s=0,a=0;try{t="string"===typeof e.questions?JSON.parse(e.questions)||[]:e.questions||[],Array.isArray(t)&&t.length>0?s=t.length:e.total_questions&&e.total_questions>0?(s=Number(e.total_questions),console.log(`Using total_questions fallback for quiz ${e.id}: ${s}`)):(s=0,console.warn(`Could not determine question count for quiz ${e.id}`));const o=null===e.score||void 0===e.score||isNaN(e.score)?null:Number(e.score);null!==o&&s>0?(a=Math.round(o/s*100),a=Math.max(0,Math.min(100,a))):a=0,console.log(`Quiz ${e.id} stats: score=${o}, questionCount=${s}, accuracy=${a}%, isCompleted=${null!==o&&s>0}`)}catch(l){console.error("Error parsing questions for quiz",e.id,l),console.error("Quiz data:",e),s=e.total_questions?Number(e.total_questions):0,a=0,console.warn(`Fallback used for quiz ${e.id}: questionCount=${s}`)}let o=e.note_title||e.title;o||(o=`Quiz #${e.id}`);const r={id:e.id,note_id:e.note_id,questions:t,difficulty:e.difficulty,quiz_type:e.quiz_type,score:e.score,created_at:e.created_at,updated_at:e.updated_at,questionCount:s,accuracy:a,title:o,note_title:e.note_title};return console.log("Processed quiz:",r),r})),console.log("Successfully processed",z.value.length,"quizzes")):(console.error("Failed to load saved quizzes:",e.data?.error),console.error("Response data:",e.data),L.value=e.data?.error||"Failed to load quizzes")}catch(L){console.error("Error loading saved quizzes:",L),console.error("Error details:",{message:L.message,stack:L.stack,response:L.response}),L.response?(console.error("Error response status:",L.response.status),console.error("Error response data:",L.response.data),"string"===typeof L.response.data&&L.response.data.includes("<html>")?(console.error("❌ CRITICAL: Error response contains HTML instead of JSON!"),L.value="Server error: received HTML response"):L.value=L.response.data?.error||"Failed to load quizzes"):L.request?(console.error("No response received from server"),L.value="No response from server"):(console.error("Request setup error:",L.message),L.value="Request setup error")}finally{I.value=!1,console.log("=== LOAD SAVED QUIZZES END ===")}},be=e=>{t.push(`/quizzes/${e}`)},fe=e=>{R.value=e,F.value=!0},ye=()=>{F.value=!1,R.value=null},he=async()=>{R.value&&(await xe(R.value),F.value=!1,R.value=null)},xe=async e=>{try{const t=await vt.deleteQuiz(e);t.data.success?(z.value=z.value.filter((t=>t.id!==e)),alert("Quiz deleted successfully!")):alert("Failed to delete quiz: "+(t.data.error||"Unknown error"))}catch(L){console.error("Error deleting quiz:",L),alert("Failed to delete quiz. Please try again.")}};return(0,o.sV)((async()=>{console.log("=== ONMOUNTED START ===");try{console.log("Calling loadNoteData..."),await Z(),console.log("loadNoteData completed successfully"),console.log("Calling loadSavedQuizzes..."),await me(),console.log("loadSavedQuizzes completed successfully"),console.log("Calling loadUserProfile..."),await y(),console.log("loadUserProfile completed successfully"),console.log("=== ONMOUNTED END ===")}catch(L){console.error("=== ONMOUNTED ERROR ==="),console.error("Error during component initialization:",L),console.error("Error details:",{message:L.message,stack:L.stack,name:L.name}),L.value="Failed to initialize component: "+L.message,C.value=!1,console.log("=== ONMOUNTED ERROR HANDLED ===")}})),{noteId:v,noteTitle:k,quizTitle:w,isLoading:C,error:L,sidebarOpen:S,sidebarVisible:G,isGeneratingQuiz:T,showNoteSelector:E,availableNotes:N,selectedNotes:_,isLoadingNotes:A,savedQuizzes:z,isLoadingSavedQuizzes:I,showUserMenu:O,user:$,toggleSidebar:j,generateNewQuiz:ce,loadAvailableNotes:J,toggleNoteSelection:Y,selectAllNotes:te,deselectAllNotes:se,openNoteSelector:ae,closeNoteSelector:oe,generateQuizFromSelectedNotes:ie,generateQuizFromNotes:de,loadSavedQuizzes:me,startQuiz:be,confirmDeleteQuiz:fe,deleteQuiz:xe,cancelDelete:ye,proceedDelete:he,showDeleteConfirmation:F,quizToDelete:R,toggleUserMenu:K,closeUserMenu:W,openProfileModal:X,logout:V,getProfilePictureUrl:h,handleImageError:B,handleImageLoad:H,showNotifications:a,notifications:r,unreadNotifications:l,toggleNotifications:i,closeNotifications:c,markAsRead:d,markAllAsRead:u,showSuccess:m,showInfo:p,showWarning:b,loadUserProfile:y,debugQuizStatus:ge,getQuizTypeDisplay:ue,themeClasses:q,fontSizeClasses:M,store:s,showQuizOptions:P,selectedDifficulty:D,selectedQuantity:Q,selectedQuizType:U,openQuizOptions:re,closeQuizOptions:le,proceedToNoteSelection:ne}}};const Bi=(0,c.A)(Vi,[["render",Xi]]);var Hi=Bi;const Zi={class:"max-w-4xl mx-auto px-4 py-4"},Ji={class:"flex items-center justify-between"},Yi={class:"flex items-center space-x-4"},ec={class:"text-center"},tc={class:"flex items-center space-x-4"},sc={class:"flex items-center space-x-2 text-sm"},ac={key:0,class:"flex items-center space-x-1 text-green-600"},oc={class:"max-w-4xl mx-auto px-4 py-8"},rc={key:0,class:"flex flex-col items-center justify-center min-h-96"},lc={key:1,class:"flex flex-col items-center justify-center min-h-96"},nc={class:"text-red-400 mb-4"},ic={key:2},cc={class:"mb-8"},dc={class:"flex justify-between items-center mb-2"},uc={class:"flex items-start justify-between mb-6"},gc={class:"flex-1"},mc={class:"flex items-center space-x-3 mb-4"},pc={class:"flex items-center justify-center w-8 h-8 bg-blue-600 rounded-full text-white font-bold text-sm"},bc={class:"space-y-3 mb-8"},fc=["for"],yc=["id","name","value","disabled","onChange"],hc={class:"flex items-center space-x-3 flex-1"},xc={class:"flex flex-col space-y-6"},vc={class:"relative flex items-center justify-between mb-6"},kc={class:"flex items-center space-x-3"},wc={class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg"},Cc={class:"flex items-center space-x-4"},Lc={class:"flex items-center space-x-2 px-3 py-1 bg-blue-500/10 rounded-full border border-blue-500/20"},Sc={class:"flex items-center space-x-2 px-3 py-1 bg-green-500/10 rounded-full border border-green-500/20"},Tc={class:"flex items-center space-x-2 px-3 py-1 bg-gray-300/10 rounded-full border border-gray-400/20"},Ec={class:"relative grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-12 xl:grid-cols-15 gap-3 mb-6"},Nc=["onClick"],_c={key:0,class:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400/20 to-purple-500/20 animate-pulse"},Ac={class:"relative z-10 group-hover:scale-110 transition-transform duration-200"},zc={class:"flex items-center justify-between"},Ic=["disabled"],Fc={class:"flex items-center space-x-4"},Rc=["disabled"],Pc={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Dc={class:"p-6"},Qc={class:"flex items-center justify-between mb-6"},Uc={class:"text-center mb-8"},Oc={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},Gc={class:"text-2xl font-bold text-green-600 mb-1"},$c={class:"text-2xl font-bold text-red-600 mb-1"},qc={class:"text-2xl font-bold text-blue-600 mb-1"},Mc={class:"text-2xl font-bold text-purple-600 mb-1"},jc={class:"flex space-x-4"};function Kc(e,t,s,l,n,i){const c=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(`min-h-screen ${l.themeClasses.main}`)},[(0,o.Lk)("header",{class:(0,r.C4)(`backdrop-blur-sm sticky top-0 z-10 ${l.themeClasses.header}`)},[(0,o.Lk)("div",Zi,[(0,o.Lk)("div",Ji,[(0,o.Lk)("div",Yi,[(0,o.bF)(d,{to:"/quizzes",class:(0,r.C4)(`flex items-center space-x-2 transition-colors ${l.themeClasses.secondaryText} hover:${l.themeClasses.text}`)},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","angle-left"]}),t[7]||(t[7]=(0,o.Lk)("span",null,"Back to Quizzes",-1))])),_:1,__:[7]},8,["class"])]),(0,o.Lk)("div",ec,[(0,o.Lk)("h1",{class:(0,r.C4)(`font-bold ${l.themeClasses.text} ${l.fontSizeClasses.heading}`)},(0,r.v_)(l.quizTitle),3)]),(0,o.Lk)("div",tc,[(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)}," Question "+(0,r.v_)(l.currentQuestionIndex+1)+" of "+(0,r.v_)(l.quizQuestions.length),3),(0,o.Lk)("div",sc,[(0,o.bF)(c,{icon:["fas","clock"],class:"text-blue-600"}),(0,o.Lk)("span",{class:(0,r.C4)(l.themeClasses.secondaryText)},(0,r.v_)(l.formattedElapsedTime),3),l.isTracking?((0,o.uX)(),(0,o.CE)("div",ac,[(0,o.bF)(c,{icon:["far","circle"],class:"animate-pulse text-xs"}),(0,o.Lk)("span",{class:(0,r.C4)(l.fontSizeClasses.small)},"Auto-tracking",2)])):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(`${l.themeClasses.tertiaryText} ${l.fontSizeClasses.small}`)}," Auto-tracking paused ",2))])])])])],2),(0,o.Lk)("div",oc,[l.isLoading?((0,o.uX)(),(0,o.CE)("div",rc,[t[8]||(t[8]=(0,o.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"},null,-1)),(0,o.Lk)("p",{class:(0,r.C4)(l.themeClasses.secondaryText)},"Loading quiz...",2)])):l.error?((0,o.uX)(),(0,o.CE)("div",lc,[(0,o.Lk)("div",nc,[(0,o.bF)(c,{icon:["fas","exclamation-triangle"],class:"text-4xl"})]),(0,o.Lk)("h2",{class:(0,r.C4)(`font-semibold ${l.themeClasses.text} mb-2 ${l.fontSizeClasses.heading}`)},"Error Loading Quiz",2),(0,o.Lk)("p",{class:(0,r.C4)(`${l.themeClasses.secondaryText} mb-6 text-center`)},(0,r.v_)(l.error),3),(0,o.bF)(d,{to:"/quizzes",class:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)(" Return to Quizzes ")]))),_:1,__:[9]})])):((0,o.uX)(),(0,o.CE)("div",ic,[(0,o.Lk)("div",cc,[(0,o.Lk)("div",dc,[(0,o.Lk)("span",{class:(0,r.C4)(`font-medium ${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},"Progress",2),(0,o.Lk)("span",{class:(0,r.C4)(`${l.themeClasses.tertiaryText} ${l.fontSizeClasses.label}`)},(0,r.v_)(l.answeredQuestionsCount)+"/"+(0,r.v_)(l.quizQuestions.length)+" answered",3)]),(0,o.Lk)("div",{class:(0,r.C4)(`w-full rounded-full h-2 ${l.themeClasses.border}`)},[(0,o.Lk)("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500 ease-out",style:(0,r.Tr)({width:l.answeredQuestionsCount/l.quizQuestions.length*100+"%"})},null,4)],2)]),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.card} backdrop-blur-sm rounded-xl p-8 mb-8`)},[(0,o.Lk)("div",uc,[(0,o.Lk)("div",gc,[(0,o.Lk)("div",mc,[(0,o.Lk)("div",pc,(0,r.v_)(l.currentQuestionIndex+1),1),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},(0,r.v_)(l.getQuestionType(l.quizQuestions[l.currentQuestionIndex])),3)]),(0,o.Lk)("h2",{class:(0,r.C4)(`font-semibold ${l.themeClasses.text} leading-relaxed ${l.fontSizeClasses.heading}`)},(0,r.v_)(l.quizQuestions[l.currentQuestionIndex].text),3)])]),(0,o.Lk)("div",bc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.quizQuestions[l.currentQuestionIndex].options,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:`option-${l.currentQuestionIndex}-${s}`,class:"relative"},[(0,o.Lk)("label",{for:`q${l.currentQuestionIndex}-o${s}`,class:(0,r.C4)(["flex items-center space-x-4 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer group",{"border-blue-500 bg-blue-500/10 text-blue-900":l.quizQuestions[l.currentQuestionIndex].selectedAnswer===s,[`${l.themeClasses.border} hover:border-gray-500 bg-gray-200/30 ${l.themeClasses.secondaryText} hover:bg-gray-200/50`]:l.quizQuestions[l.currentQuestionIndex].selectedAnswer!==s}])},[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:`q${l.currentQuestionIndex}-o${s}`,name:`question-${l.currentQuestionIndex}`,value:s,"onUpdate:modelValue":t[0]||(t[0]=e=>l.quizQuestions[l.currentQuestionIndex].selectedAnswer=e),class:"text-blue-600 focus:ring-blue-500",disabled:l.quizCompleted,onChange:e=>l.onAnswerSelected(l.currentQuestionIndex,s)},null,40,yc),[[a.XL,l.quizQuestions[l.currentQuestionIndex].selectedAnswer,void 0,{number:!0}]]),(0,o.Lk)("div",hc,[(0,o.Lk)("div",{class:(0,r.C4)(["flex items-center justify-center w-6 h-6 rounded-full border-2 text-xs font-bold",{"border-blue-500 bg-blue-500 text-white":l.quizQuestions[l.currentQuestionIndex].selectedAnswer===s,[`${l.themeClasses.border} ${l.themeClasses.tertiaryText}`]:l.quizQuestions[l.currentQuestionIndex].selectedAnswer!==s}])},(0,r.v_)(String.fromCharCode(65+s)),3),(0,o.Lk)("span",{class:(0,r.C4)(`leading-relaxed ${l.fontSizeClasses.label}`)},(0,r.v_)(e),3)])],10,fc)])))),128))])],2),(0,o.Lk)("div",xc,[(0,o.Lk)("div",{class:(0,r.C4)(`relative backdrop-blur-xl rounded-2xl p-6 shadow-2xl overflow-hidden ${l.themeClasses.card}`)},[t[14]||(t[14]=(0,o.Lk)("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-pink-500/10"},null,-1)),t[15]||(t[15]=(0,o.Lk)("div",{class:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"},null,-1)),(0,o.Lk)("div",vc,[(0,o.Lk)("div",kc,[(0,o.Lk)("div",wc,[(0,o.bF)(c,{icon:["fas","compass"],class:"text-white text-sm"})]),(0,o.Lk)("h3",{class:(0,r.C4)(`font-bold ${l.themeClasses.text} bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent ${l.fontSizeClasses.heading}`)}," Question Navigator ",2)]),(0,o.Lk)("div",Cc,[(0,o.Lk)("div",Lc,[t[10]||(t[10]=(0,o.Lk)("div",{class:"w-2 h-2 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse"},null,-1)),(0,o.Lk)("span",{class:(0,r.C4)(`font-medium text-blue-700 ${l.fontSizeClasses.small}`)},"Current",2)]),(0,o.Lk)("div",Sc,[t[11]||(t[11]=(0,o.Lk)("div",{class:"w-2 h-2 bg-gradient-to-r from-green-400 to-green-600 rounded-full"},null,-1)),(0,o.Lk)("span",{class:(0,r.C4)(`font-medium text-green-700 ${l.fontSizeClasses.small}`)},"Answered",2)]),(0,o.Lk)("div",Tc,[t[12]||(t[12]=(0,o.Lk)("div",{class:"w-2 h-2 bg-gray-400 rounded-full"},null,-1)),(0,o.Lk)("span",{class:(0,r.C4)(`font-medium ${l.themeClasses.secondaryText} ${l.fontSizeClasses.small}`)},"Pending",2)])])]),(0,o.Lk)("div",Ec,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.quizQuestions,((e,s)=>((0,o.uX)(),(0,o.CE)("button",{key:`nav-${s}`,onClick:e=>l.goToQuestion(s),class:(0,r.C4)(["group relative aspect-square rounded-xl border-2 transition-all duration-300 flex items-center justify-center font-bold hover:scale-110 hover:rotate-3 transform-gpu",{"border-blue-400 bg-gradient-to-br from-blue-500/20 to-blue-600/20 text-blue-300 shadow-xl shadow-blue-500/30 ring-2 ring-blue-400/50":l.currentQuestionIndex===s,[`${l.themeClasses.border} bg-gradient-to-br from-gray-300/40 to-gray-200/40 ${l.themeClasses.secondaryText} hover:border-gray-500 hover:bg-gradient-to-br hover:from-gray-400/50 hover:to-gray-300/50 hover:shadow-lg hover:shadow-gray-500/20`]:l.currentQuestionIndex!==s&&null===e.selectedAnswer,"border-green-500 bg-gradient-to-br from-green-500/20 to-green-600/20 text-green-700 hover:shadow-lg hover:shadow-green-500/20":null!==e.selectedAnswer&&l.currentQuestionIndex!==s}])},[l.currentQuestionIndex===s?((0,o.uX)(),(0,o.CE)("div",_c)):(0,o.Q3)("",!0),(0,o.Lk)("span",Ac,(0,r.v_)(s+1),1),t[13]||(t[13]=(0,o.Lk)("div",{class:"absolute inset-0 rounded-xl bg-gray-900/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},null,-1))],10,Nc)))),128))])],2),(0,o.Lk)("div",zc,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.previousQuestion&&l.previousQuestion(...e)),disabled:0===l.currentQuestionIndex,class:(0,r.C4)(["flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-200",0===l.currentQuestionIndex?`${l.themeClasses.button} cursor-not-allowed opacity-50`:`${l.themeClasses.button} hover:scale-105`])},[(0,o.bF)(c,{icon:["fas","chevron-left"]}),t[16]||(t[16]=(0,o.Lk)("span",null,"Previous",-1))],10,Ic),(0,o.Lk)("div",Fc,[l.currentQuestionIndex<l.quizQuestions.length-1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>l.nextQuestion&&l.nextQuestion(...e)),class:(0,r.C4)(`${l.themeClasses.buttonPrimary} flex items-center space-x-2 px-8 py-3 rounded-lg transition-all duration-200 hover:scale-105 shadow-lg`)},[t[17]||(t[17]=(0,o.Lk)("span",null,"Next",-1)),(0,o.bF)(c,{icon:["fas","chevron-right"]})],2)):l.quizCompleted?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>l.viewResults&&l.viewResults(...e)),class:"flex items-center space-x-2 px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg transition-all duration-200 text-white hover:scale-105 shadow-lg"},[(0,o.bF)(c,{icon:["fas","chart-bar"]}),t[19]||(t[19]=(0,o.Lk)("span",null,"View Results",-1))])):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[3]||(t[3]=(...e)=>l.checkAnswers&&l.checkAnswers(...e)),disabled:!l.allQuestionsAnswered,class:(0,r.C4)(["flex items-center space-x-2 px-8 py-3 rounded-lg transition-all duration-200 hover:scale-105 shadow-lg",l.allQuestionsAnswered?"bg-green-600 hover:bg-green-700 text-white":`${l.themeClasses.button} cursor-not-allowed opacity-50`])},[(0,o.bF)(c,{icon:["fas","check"]}),t[18]||(t[18]=(0,o.Lk)("span",null,"Submit Quiz",-1))],10,Rc))])])]),l.showResults?((0,o.uX)(),(0,o.CE)("div",Pc,[(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.card} rounded-xl max-w-2xl w-full max-h-90vh overflow-y-auto`)},[(0,o.Lk)("div",Dc,[(0,o.Lk)("div",Qc,[(0,o.Lk)("h2",{class:(0,r.C4)(`font-bold ${l.themeClasses.text} ${l.fontSizeClasses.heading}`)},"Quiz Results",2),(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>l.showResults=!1),class:(0,r.C4)(`${l.themeClasses.secondaryText} hover:${l.themeClasses.text} transition-colors`)},[(0,o.bF)(c,{icon:["fas","times"]})],2)]),(0,o.Lk)("div",Uc,[(0,o.Lk)("div",{class:(0,r.C4)(["text-6xl font-bold mb-2",l.quizScore===l.quizQuestions.length?"text-green-400":l.quizScore>=.7*l.quizQuestions.length?"text-yellow-400":"text-red-400"])},(0,r.v_)(Math.round(l.quizScore/l.quizQuestions.length*100))+"% ",3),(0,o.Lk)("p",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.body}`)},(0,r.v_)(l.quizScore)+" out of "+(0,r.v_)(l.quizQuestions.length)+" correct ",3)]),(0,o.Lk)("div",Oc,[(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.hover} rounded-lg p-4 text-center`)},[(0,o.Lk)("div",Gc,(0,r.v_)(l.quizScore),1),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},"Correct",2)],2),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.hover} rounded-lg p-4 text-center`)},[(0,o.Lk)("div",$c,(0,r.v_)(l.quizQuestions.length-l.quizScore),1),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},"Incorrect",2)],2),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.hover} rounded-lg p-4 text-center`)},[(0,o.Lk)("div",qc,(0,r.v_)(Math.round(l.quizScore/l.quizQuestions.length*100))+"%",1),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},"Accuracy",2)],2),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.hover} rounded-lg p-4 text-center`)},[(0,o.Lk)("div",Mc,(0,r.v_)(l.quizQuestions.length),1),(0,o.Lk)("div",{class:(0,r.C4)(`${l.themeClasses.secondaryText} ${l.fontSizeClasses.label}`)},"Total Questions",2)],2)]),(0,o.Lk)("div",jc,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.retakeQuiz&&l.retakeQuiz(...e)),class:(0,r.C4)(`${l.themeClasses.buttonPrimary} flex-1 flex items-center justify-center space-x-2 px-6 py-3 rounded-lg transition-colors`)},[(0,o.bF)(c,{icon:["fas","redo"]}),t[20]||(t[20]=(0,o.Lk)("span",null,"Retake Quiz",-1))],2),(0,o.bF)(d,{to:"/quizzes",class:(0,r.C4)(`${l.themeClasses.button} flex-1 flex items-center justify-center space-x-2 px-6 py-3 rounded-lg transition-colors text-center`)},{default:(0,o.k6)((()=>[(0,o.bF)(c,{icon:["fas","angle-left"]}),t[21]||(t[21]=(0,o.Lk)("span",null,"Back to Quizzes",-1))])),_:1,__:[21]},8,["class"])])])],2)])):(0,o.Q3)("",!0)]))])],2)}s(1148);var Wc={name:"QuizTakingView",setup(){const e=(0,g.lq)(),t=(0,n.Pj)(),s=e.params;console.log("🔄 QUIZ TAKING VIEW: Route params received:",s),console.log("🔄 QUIZ TAKING VIEW: Route params.id:",s.id),console.log("🔄 QUIZ TAKING VIEW: Route params.id type:",typeof s.id);const a=(0,pe.KR)(parseInt(e.params.id)||null);console.log("🔄 QUIZ TAKING VIEW: Parsed quizId:",a.value);const r=(0,pe.KR)("Loading Quiz..."),l=(0,pe.KR)(""),i=(0,pe.KR)(!0),c=(0,pe.KR)(null),d=(0,pe.KR)([]),u=(0,pe.KR)(!1),m=(0,pe.KR)(0),p=(0,pe.KR)(!1),b=(0,pe.KR)(0),{isTracking:f,formattedElapsedTime:y,setCurrentActivity:h,incrementQuizzesTaken:x}=mn(),v=(0,o.EW)((()=>d.value.length>0&&d.value.every((e=>null!==e.selectedAnswer&&void 0!==e.selectedAnswer)))),k=(0,o.EW)((()=>d.value.filter((e=>null!==e.selectedAnswer&&void 0!==e.selectedAnswer)).length)),w=()=>{const e=d.value.filter((e=>null!==e.selectedAnswer&&void 0!==e.selectedAnswer&&e.selectedAnswer===e.correctAnswer)).length;return console.log("Correct answers count:",e),e},C=()=>{const e=d.value.filter((e=>null!==e.selectedAnswer&&void 0!==e.selectedAnswer&&e.selectedAnswer!==e.correctAnswer)).length;return console.log("Incorrect answers count:",e),e},L=()=>{const e=k.value,t=w(),s=0===e?0:Math.round(t/e*100);return console.log("Current accuracy:",s,"Answered:",e,"Correct:",t),s},S=()=>{const e=d.value.length-k.value;return console.log("Unanswered questions count:",e),e},T=(0,o.EW)((()=>w())),E=(0,o.EW)((()=>C())),N=(0,o.EW)((()=>L())),_=(0,o.EW)((()=>S())),A=(0,o.EW)((()=>{try{return t.getters["app/getFontSizeClasses"]}catch(c){return{heading:"text-xl",body:"text-base",label:"text-sm",small:"text-xs"}}})),z=(0,o.EW)((()=>{try{return t.getters["app/getThemeClasses"]}catch(c){return{main:"bg-gray-900 text-white",header:"bg-gray-800 border-b border-gray-700 text-white",card:"bg-gray-800 border border-gray-700 shadow-lg",text:"text-white",secondaryText:"text-gray-200",tertiaryText:"text-gray-400",border:"border-gray-700",button:"bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",buttonPrimary:"bg-blue-600 hover:bg-blue-700 text-white border border-blue-600",hover:"hover:bg-gray-700"}}})),I=e=>{const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t},F=e=>null!==e.selectedAnswer&&void 0!==e.selectedAnswer&&(!(!e.options||0===e.options.length)&&(!(e.correctAnswer<0||e.correctAnswer>=e.options.length)&&Number(e.selectedAnswer)===Number(e.correctAnswer))),R=e=>e&&e.options?2===e.options.length&&e.options.some((e=>e.toLowerCase().includes("true")))&&e.options.some((e=>e.toLowerCase().includes("false")))?"True/False":`Multiple Choice (${e.options.length} options)`:"Multiple Choice",P=()=>{b.value<d.value.length-1&&b.value++},D=()=>{b.value>0&&b.value--},Q=e=>{e>=0&&e<d.value.length&&(b.value=e)},U=async(e,t)=>{console.log(`Answer selected for question ${e+1}: option ${t}`),console.log("Question data:",d.value[e]),console.log("Correct answer:",d.value[e].correctAnswer),console.log("Is correct:",t===d.value[e].correctAnswer),f.value&&h("taking_quiz"),await(0,o.dY)(),d.value=[...d.value],console.log("Updated statistics after answer selection:"),console.log("- Correct answers:",w()),console.log("- Incorrect answers:",C()),console.log("- Current accuracy:",L()+"%")},O=()=>{console.log("=== DEBUG STATISTICS ==="),console.log("Total questions:",d.value.length),console.log("Answered questions:",k.value),console.log("Correct answers:",w()),console.log("Incorrect answers:",C()),console.log("Current accuracy:",L()+"%"),console.log("Unanswered questions:",S()),console.log("Question details:"),d.value.forEach(((e,t)=>{console.log(`Question ${t+1}: Selected=${e.selectedAnswer}, Correct=${e.correctAnswer}, IsCorrect=${e.selectedAnswer===e.correctAnswer}`)})),d.value=[...d.value],alert(`Debug Stats:\nTotal: ${d.value.length}\nAnswered: ${k.value}\nCorrect: ${w()}\nIncorrect: ${C()}\nAccuracy: ${L()}%\nUnanswered: ${S()}`)},G=async()=>{if(console.log("🔄 QUIZ LOADING: Starting to load quiz..."),console.log("🔄 QUIZ LOADING: Quiz ID:",a.value),!a.value)return console.error("❌ QUIZ LOADING: No quiz ID provided"),c.value="No quiz ID provided",void(i.value=!1);try{console.log("🔄 QUIZ LOADING: Making API call to getQuiz...");const t=await vt.getQuiz(a.value);if(console.log("🔄 QUIZ LOADING: API response received:",t),console.log("🔄 QUIZ LOADING: Response status:",t.status),console.log("🔄 QUIZ LOADING: Response data:",t.data),t.data.success&&t.data.data){const s=t.data.data;console.log("✅ QUIZ LOADING: Quiz data received:",s);const o=s.questions||[];if(console.log("🔄 QUIZ LOADING: Raw questions from API:",o),console.log("🔄 QUIZ LOADING: Questions type:",typeof o),console.log("🔄 QUIZ LOADING: Questions isArray:",Array.isArray(o)),!Array.isArray(o)||0===o.length)throw console.error("❌ QUIZ LOADING: No questions found in quiz data"),new Error("No questions found in quiz data");if(console.log("✅ QUIZ LOADING: Found",o.length,"questions, processing..."),d.value=o.map((e=>{let t=e.correct_answer||e.correctAnswer||0;t="string"===typeof t&&/^[A-D]$/.test(t.toUpperCase())?t.toUpperCase().charCodeAt(0)-65:Number(t)||0;const s=Array.isArray(e.options)?e.options:[];if(0===s.length)throw new Error("Question has no options");const a=2===s.length&&s.some((e=>e.toLowerCase().includes("true")))&&s.some((e=>e.toLowerCase().includes("false")));let o,r;if(a){o=[...s];const e=s[t];r=o.findIndex((t=>t.toLowerCase().includes(e.toLowerCase().trim()))),console.log("True/False question detected - not shuffling options")}else{o=I(s);const e=s[t];r=o.indexOf(e)}const l={text:e.question||e.text||"Untitled Question",options:o,originalOptions:s,correctAnswer:Math.max(0,Math.min(r,o.length-1)),selectedAnswer:null};return console.log("Processed question:",{text:l.text,optionsCount:l.options.length,correctAnswer:l.correctAnswer,correctAnswerText:l.options[l.correctAnswer],originalCorrectAnswer:e.correct_answer||e.correctAnswer,shuffled:!0,originalOptions:s,shuffledOptions:o}),l})),s.note_id)try{const e=await vt.getNote(s.note_id);if(e.data.success&&e.data.data){const t=e.data.data.title||"Unknown Note";l.value=t,r.value=t}else l.value="Quiz from Notes",r.value=s.title||`Quiz #${a.value}`}catch(e){console.warn("Could not load note title:",e),l.value="Quiz from Notes",r.value=s.title||`Quiz #${a.value}`}else l.value="Generated Quiz",r.value=s.title||`Quiz #${a.value}`}else c.value=t.data?.error||"Quiz not found"}catch(t){console.error("Error loading quiz:",t),c.value="Failed to load quiz"}finally{i.value=!1}},$=async()=>{if(console.log("checkAnswers called"),!v.value)return console.log("Not all questions answered"),void alert("Please answer all questions before submitting.");let e=0,t=0;d.value.forEach(((s,a)=>{if(s.options&&s.options.length>0&&s.correctAnswer>=0&&s.correctAnswer<s.options.length){t++;const o=F(s);console.log(`Question ${a+1}: Correct=${o}, Selected=${s.selectedAnswer}, CorrectAnswer=${s.correctAnswer}`),o&&e++}else console.warn(`Question ${a+1} has invalid data and will be skipped`)}));const s=Math.max(0,Math.min(t,e));m.value=s,u.value=!0,console.log(`Quiz completed. Valid questions: ${t}, Correct: ${s}, Score: ${s}/${t}`),f.value&&x(s),console.log("Automatically saving quiz results...");try{await j(s),console.log("Quiz results saved successfully")}catch(c){console.error("Failed to save quiz results:",c)}await M()},q=()=>{d.value.forEach((e=>{e.selectedAnswer=null;const t=e.originalOptions||e.options,s=2===t.length&&t.some((e=>e.toLowerCase().includes("true")))&&t.some((e=>e.toLowerCase().includes("false")));if(s){e.options=[...t];const s=t[e.correctAnswer];e.correctAnswer=t.findIndex((e=>e.toLowerCase().includes(s.toLowerCase().trim()))),console.log("True/False question retake - not shuffling options")}else{const s=I(t),a=t[e.correctAnswer];e.options=s,e.correctAnswer=s.indexOf(a)}})),u.value=!1,m.value=0,p.value=!1,b.value=0,d.value=[...d.value]},M=async()=>{console.log("View Results clicked"),console.log("Automatically saving quiz results...");try{await j(m.value),console.log("Quiz results saved successfully when viewing results")}catch(c){console.error("Failed to save quiz results when viewing:",c)}console.log("Quiz questions with answers:",d.value.map(((e,t)=>({question:t+1,text:e.text,selected:e.selectedAnswer,correct:e.correctAnswer,isCorrect:F(e)})))),p.value=!0},j=async e=>{console.log("saveQuizResults called with score:",e);try{if(!a.value)return void console.error("Unable to save quiz: Quiz ID not found.");const t={score:e};d.value.length>0&&console.log("Preserving existing difficulty and quiz_type fields"),console.log("Automatically saving quiz results:",{quizId:a.value,score:e,totalQuestions:d.value.length,updateData:t});const s=await vt.updateQuiz(a.value,t);s.data.success?console.log("Quiz results saved successfully!"):console.error("Failed to save quiz results:",s.data.error||"Unknown error")}catch(c){console.error("Error saving quiz results:",c)}};return(0,o.sV)((async()=>{await G()})),{quizId:a,quizTitle:r,noteTitle:l,isLoading:i,error:c,quizQuestions:d,quizCompleted:u,quizScore:m,showResults:p,currentQuestionIndex:b,allQuestionsAnswered:v,answeredQuestionsCount:k,correctAnswersCount:T,incorrectAnswersCount:E,currentAccuracy:N,unansweredQuestionsCount:_,isQuestionCorrect:F,getQuestionType:R,nextQuestion:P,previousQuestion:D,goToQuestion:Q,onAnswerSelected:U,debugStats:O,getCorrectAnswersCount:w,getIncorrectAnswersCount:C,getCurrentAccuracy:L,getUnansweredQuestionsCount:S,checkAnswers:$,viewResults:M,retakeQuiz:q,saveQuizResults:j,shuffleArray:I,isTracking:f,formattedElapsedTime:y,fontSizeClasses:A,themeClasses:z}}};const Xc=(0,c.A)(Wc,[["render",Kc]]);var Vc=Xc;const Bc={class:"min-h-screen flex flex-col bg-gray-900 text-white"},Hc={class:"p-4 flex justify-between items-center"},Zc={class:"space-x-2"},Jc={class:"flex-grow flex items-center justify-center px-4 py-8 sm:px-6 sm:py-12 lg:px-8",style:{"min-height":"calc(100vh - 200px)"}},Yc={class:"bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 w-full max-w-md border border-gray-700 text-center"},ed={class:"flex justify-center mb-8"},td={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-xl"};function sd(e,t,s,a,r,l){const n=(0,o.g2)("router-link"),i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",Bc,[(0,o.Lk)("header",Hc,[(0,o.bF)(n,{to:"/",class:"text-xl font-bold"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("SmartScribe")]))),_:1,__:[0]}),(0,o.Lk)("div",Zc,[(0,o.bF)(n,{to:"/login",class:"px-4 py-2 border border-white rounded-md hover:bg-gray-800 transition"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Sign In")]))),_:1,__:[1]}),(0,o.bF)(n,{to:"/signup",class:"px-4 py-2 bg-white text-gray-900 rounded-md hover:bg-gray-200 transition"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Sign Up")]))),_:1,__:[2]})])]),(0,o.Lk)("main",Jc,[(0,o.Lk)("div",Yc,[(0,o.Lk)("div",ed,[(0,o.Lk)("div",td,[(0,o.bF)(i,{icon:["fas","exclamation-triangle"],class:"text-white text-3xl sm:text-4xl"})])]),t[4]||(t[4]=(0,o.Lk)("div",{class:"mb-8"},[(0,o.Lk)("h1",{class:"text-6xl sm:text-7xl font-bold text-gray-600 mb-4"},"404"),(0,o.Lk)("h2",{class:"text-2xl sm:text-3xl font-bold text-white mb-2"},"Page Not Found"),(0,o.Lk)("p",{class:"text-gray-400 text-sm sm:text-base"},"The page you are looking for doesn't exist or has been moved.")],-1)),(0,o.bF)(n,{to:"/",class:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-105 active:scale-95"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{icon:["fas","home"]}),t[3]||(t[3]=(0,o.Lk)("span",null,"Back to Home",-1))])),_:1,__:[3]})])]),t[5]||(t[5]=(0,o.Fv)('<footer class="p-4 bg-gray-800 text-gray-400 flex justify-between items-center text-sm"><div class="flex space-x-4"><a href="#" class="hover:text-white">Docs</a><a href="#" class="hover:text-white">Guides</a><a href="#" class="hover:text-white">Help</a><a href="#" class="hover:text-white">Contact</a></div><div>© 2025 SmartScribe Inc.</div></footer>',1))])}var ad={name:"NotFoundView"};const od=(0,c.A)(ad,[["render",sd]]);var rd=od;const ld=[{path:"/",name:"home",component:U},{path:"/login",name:"login",component:ye},{path:"/signup",name:"signup",component:Pa},{path:"/forgot-password",name:"forgot-password",component:po},{path:"/reset-password",name:"reset-password",component:Yo},{path:"/dashboard",name:"dashboard",component:Js},{path:"/notes",name:"notes",component:Fr},{path:"/notes/:id",name:"note-detail",component:fn},{path:"/notes/edit",name:"note-editor",component:$n},{path:"/quizzes",name:"quizzes",component:Hi},{path:"/quizzes/:id",name:"quiz-taking",component:Vc},{path:"/goals",name:"goals",component:wl},{path:"/settings",name:"settings",component:Vl},{path:"/:pathMatch(.*)*",name:"not-found",component:rd}],nd=(0,g.aE)({history:(0,g.LA)("/"),routes:ld});nd.beforeEach(((e,t,s)=>{const a=null!==localStorage.getItem("user");e.matched.some((e=>e.meta.requiresAuth))&&!a?s("/login"):s()}));var id=nd;const cd={user:(()=>{const e=localStorage.getItem("user");if(e&&"undefined"!==e&&"null"!==e)try{const t=JSON.parse(e);return t||null}catch(t){return console.warn("Failed to parse user data from localStorage:",t),null}return null})(),token:localStorage.getItem("token")||null,isAuthenticated:!!localStorage.getItem("token"),userType:(()=>{const e=localStorage.getItem("user");if(e&&"undefined"!==e&&"null"!==e)try{const t=JSON.parse(e);return t&&t.google_id?"oauth":t?"traditional":null}catch(t){return null}return null})()},dd={getUser:e=>e.user,isAuthenticated:e=>e.isAuthenticated,getUserType:e=>e.userType},ud={async login({commit:e},t){try{console.log("🔐 Auth store login called with:",{email:t.email,passwordLength:t.password?t.password.length:0,hasEmail:!!t.email,hasPassword:!!t.password});const s=await vt.login(t);if(!s.data||!s.data.success){const e=s.data?.message||"Login failed. Please check your credentials.";throw console.error("❌ Backend login error:",e),e.includes("Invalid credentials")&&console.error("🔍 Diagnosis: Invalid credentials - user may not exist or password is wrong"),new Error(e)}console.log("🔐 Backend login successful:",s.data);const a=s.data.data.user,o=s.data.data.token;return console.log("🔐 Extracted user:",a),console.log("🔐 Extracted token:",o?"[PRESENT]":"[MISSING]"),o&&(localStorage.setItem("token",o),console.log("🔐 Token saved to localStorage")),a&&(localStorage.setItem("user",JSON.stringify(a)),console.log("🔐 User data saved to localStorage")),e("SET_AUTH",{user:a,token:o}),console.log("🔐 Auth state updated in Vuex"),a}catch(s){throw console.error("❌ Login error:",s),s}},async googleLogin({commit:e},t){try{console.log("🔐 Attempting Google login with backend API");const s=await vt.googleLogin(t);if(!s.data||!s.data.success){const e=s.data?.message||"Google login failed. Please try again.";throw console.error("❌ Backend Google login error:",e),new Error(e)}console.log("🔐 Backend Google login successful:",s.data);const a=s.data.data.user,o=s.data.data.token;return console.log("🔐 Extracted user:",a),console.log("🔐 Extracted token:",o?"[PRESENT]":"[MISSING]"),o&&(localStorage.setItem("token",o),console.log("🔐 Token saved to localStorage")),a&&(localStorage.setItem("user",JSON.stringify(a)),console.log("🔐 User data saved to localStorage")),e("SET_AUTH",{user:a,token:o}),console.log("🔐 Auth state updated in Vuex"),a}catch(s){throw console.error("❌ Google login error:",s),s}},async facebookLogin(){throw new Error("Facebook login is not currently supported. Please use email/password or Google login.")},async register({commit:e},t){try{console.log("🔐 Attempting registration with backend API:",{email:t.email,name:t.name});const s=await vt.register(t);if(!s.data||!s.data.success){const e=s.data?.message||"Registration failed. Please try again.";throw console.error("❌ Backend registration error:",e),new Error(e)}console.log("🔐 Backend registration successful:",s.data);const a=s.data.data.user,o=s.data.data.token;return console.log("🔐 Extracted user:",a),console.log("🔐 Extracted token:",o?"[PRESENT]":"[MISSING]"),o&&localStorage.setItem("token",o),a&&localStorage.setItem("user",JSON.stringify(a)),e("SET_AUTH",{user:a,token:o}),console.log("🔐 Auth state updated in Vuex"),a}catch(s){throw console.error("❌ Registration error:",s),s}},async logout({commit:e}){try{console.log("🔐 Attempting logout with backend API");const e=await vt.logout();e.data&&e.data.success?console.log("🔐 Backend logout successful"):console.log("🔐 Backend logout completed (response may not indicate success)")}catch(t){console.error("❌ Backend logout error:",t)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),e("CLEAR_AUTH"),console.log("🔐 Auth state cleared")}},async fetchUser({commit:e}){try{console.log("🔐 Fetching current user from backend API");const t=localStorage.getItem("token");if(!t)return console.log("🔐 No token found in localStorage"),null;const s=await vt.getUser();if(!s.data||!s.data.success)throw console.error("❌ Backend fetch user error:",s.data?.message),new Error(s.data?.message||"Failed to fetch user data.");console.log("🔐 Backend user fetched:",s.data);const a=s.data.data.user;return localStorage.setItem("user",JSON.stringify(a)),e("SET_USER",a),console.log("🔐 User data updated in state"),a}catch(t){throw console.error("❌ Fetch user error:",t),t}},initializeAuthListener(){return console.log("🔐 Auth listener initialized (backend authentication)"),null}},gd={SET_AUTH(e,{user:t,token:s}){e.user=t,e.token=s,e.isAuthenticated=!0,e.userType=t&&t.google_id?"oauth":"traditional"},SET_USER(e,t){e.user=t,e.userType=t.google_id?"oauth":"traditional"},CLEAR_AUTH(e){e.user=null,e.token=null,e.isAuthenticated=!1,e.userType=null}};var md={namespaced:!0,state:cd,getters:dd,actions:ud,mutations:gd};class pd{async processImage(e){try{const t=new FormData;t.append("image",e);const s=await vt.ocr.processImage(t);return s.data}catch(t){throw console.error("OCR processing error:",t),new Error("Failed to process image. Please try again.")}}isImage(e){return e&&e.type.startsWith("image/")}async processCameraImage(e){try{const t=new File([e],"camera-image.jpg",{type:"image/jpeg"});return await this.processImage(t)}catch(t){throw console.error("Camera OCR processing error:",t),new Error("Failed to process camera image. Please try again.")}}async hasCamera(){try{const e=await navigator.mediaDevices.enumerateDevices();return e.some((e=>"videoinput"===e.kind))}catch(e){return console.error("Camera detection error:",e),!1}}async takePhoto(){return new Promise(((e,t)=>{(async()=>{try{if(!await this.hasCamera())throw new Error("No camera detected on this device.");const t=document.createElement("video");t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.setAttribute("muted","");const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t.srcObject=s,t.onloadedmetadata=()=>{t.play();const a=document.createElement("canvas");a.width=t.videoWidth,a.height=t.videoHeight;const o=a.getContext("2d");o.drawImage(t,0,0,a.width,a.height),s.getTracks().forEach((e=>e.stop())),a.toBlob((t=>{e(t)}),"image/jpeg",.95)}}catch(s){console.error("Camera access error:",s),t(new Error("Failed to access camera. Please check permissions."))}})()}))}}var bd=new pd;class fd{async generateSummary(e,t={length:"medium"}){try{const s=await vt.gpt.generateSummary(e,t);return s.data}catch(s){throw console.error("Summary generation error:",s),new Error("Failed to generate summary. Please try again.")}}async generateQuiz(e,t={difficulty:"medium",questionCount:5}){try{const s=await vt.gpt.generateQuiz(e,t);return s.data}catch(s){throw console.error("Quiz generation error:",s),new Error("Failed to generate quiz. Please try again.")}}async extractKeywords(e){try{const t=await vt.gpt.extractKeywords(e);return t.data}catch(t){throw console.error("Keyword extraction error:",t),new Error("Failed to extract keywords. Please try again.")}}async isAppropriateContent(e){const t=["inappropriate","offensive","harmful","illegal","explicit"],s=e.toLowerCase();return!t.some((e=>s.includes(e)))}}var yd=new fd;const hd={notes:[],currentNote:null,isLoading:!1,error:null,tempImageData:null},xd={getNotes:e=>e.notes,getCurrentNote:e=>e.currentNote,getRecentNotes:e=>e.notes.slice(0,5),isLoading:e=>e.isLoading,getError:e=>e.error,getTempImageData:e=>e.tempImageData},vd={async fetchNotes({commit:e}){try{e("SET_LOADING",!0);const t=await vt.getNotes();return e("SET_NOTES",t.data.data),t.data.data}catch(t){console.error("Fetch notes error:",t);const s=t.response?.data?.error||t.response?.data?.message||"Failed to fetch notes.";throw e("SET_ERROR",s),t}finally{e("SET_LOADING",!1)}},async fetchNote({commit:e},t){try{e("SET_LOADING",!0);const s=await vt.getNote(t);return e("SET_CURRENT_NOTE",s.data.data),s.data.data}catch(s){console.error("Fetch note error:",s);const t=s.response?.data?.error||s.response?.data?.message||"Failed to fetch note details.";throw e("SET_ERROR",t),s}finally{e("SET_LOADING",!1)}},async createNote({commit:e},t){try{e("SET_LOADING",!0);const s=await vt.createNote(t),a=s.data.data||s.data;return e("ADD_NOTE",a),a}catch(s){console.error("Create note error:",s);const t=s.response?.data?.error||s.response?.data?.message||"Failed to create note.";throw e("SET_ERROR",t),s}finally{e("SET_LOADING",!1)}},async updateNote({commit:e},{id:t,noteData:s}){try{e("SET_LOADING",!0);const a=await vt.updateNote(t,s),o=a.data.data||a.data;return e("UPDATE_NOTE",o),o}catch(a){console.error("Update note error:",a);const t=a.response?.data?.error||a.response?.data?.message||"Failed to update note.";throw e("SET_ERROR",t),a}finally{e("SET_LOADING",!1)}},async deleteNote({commit:e},t){try{e("SET_LOADING",!0),await vt.deleteNote(t),e("REMOVE_NOTE",t)}catch(s){console.error("Delete note error:",s);const t=s.response?.data?.error||s.response?.data?.message||"Failed to delete note.";throw e("SET_ERROR",t),s}finally{e("SET_LOADING",!1)}},async processImage({commit:e},t){try{e("SET_LOADING",!0);const s=await bd.processImage(t);return e("SET_TEMP_IMAGE_DATA",{originalText:s.text,imagePath:s.image_path}),s}catch(s){throw console.error("Process image error:",s),e("SET_ERROR","Failed to process image."),s}finally{e("SET_LOADING",!1)}},async generateSummary({state:e,commit:t},s={length:"medium"}){try{if(!e.currentNote&&!e.tempImageData)throw new Error("No note data available for summarization.");t("SET_LOADING",!0);const a=e.currentNote?e.currentNote.originalText:e.tempImageData.originalText,o=await yd.generateSummary(a,s);if(e.currentNote){const s={...e.currentNote,summary:o.summary};t("SET_CURRENT_NOTE",s)}return o}catch(a){throw console.error("Generate summary error:",a),t("SET_ERROR","Failed to generate summary."),a}finally{t("SET_LOADING",!1)}},async extractKeywords({state:e,commit:t}){try{if(!e.currentNote&&!e.tempImageData)throw new Error("No note data available for keyword extraction.");t("SET_LOADING",!0);const s=e.currentNote?e.currentNote.originalText:e.tempImageData.originalText,a=await yd.extractKeywords(s);if(e.currentNote){const s={...e.currentNote,keywords:a.keywords};t("SET_CURRENT_NOTE",s)}return a}catch(s){throw console.error("Extract keywords error:",s),t("SET_ERROR","Failed to extract keywords."),s}finally{t("SET_LOADING",!1)}}},kd={SET_NOTES(e,t){e.notes=t},SET_CURRENT_NOTE(e,t){e.currentNote=t},ADD_NOTE(e,t){e.notes.unshift(t)},UPDATE_NOTE(e,t){const s=e.notes.findIndex((e=>e.id===t.id));-1!==s&&e.notes.splice(s,1,t),e.currentNote&&e.currentNote.id===t.id&&(e.currentNote=t)},REMOVE_NOTE(e,t){e.notes=e.notes.filter((e=>e.id!==t)),e.currentNote&&e.currentNote.id===t&&(e.currentNote=null)},SET_LOADING(e,t){e.isLoading=t},SET_ERROR(e,t){e.error=t},SET_TEMP_IMAGE_DATA(e,t){e.tempImageData=t},CLEAR_TEMP_IMAGE_DATA(e){e.tempImageData=null}};var wd={namespaced:!0,state:hd,getters:xd,actions:vd,mutations:kd};const Cd={stats:{totalNotes:0,notesThisWeek:0,studyHours:0,studyHoursThisWeek:0,quizAverage:0,quizzesCompleted:0},weeklyActivity:[],subjects:[],recentActivity:[],goals:[],isLoading:!1,error:null},Ld={getStats:e=>e.stats,getWeeklyActivity:e=>e.weeklyActivity,getSubjects:e=>e.subjects,getRecentActivity:e=>e.recentActivity,getGoals:e=>e.goals,isLoading:e=>e.isLoading,getError:e=>e.error},Sd={async fetchStats({commit:e}){try{e("SET_LOADING",!0);const t=await vt.progress.getStats();return e("SET_STATS",t.data),t.data}catch(t){throw console.error("Fetch stats error:",t),e("SET_ERROR","Failed to fetch progress statistics."),t}finally{e("SET_LOADING",!1)}},async fetchActivity({commit:e}){try{e("SET_LOADING",!0);const t=await vt.progress.getActivity();return e("SET_WEEKLY_ACTIVITY",t.data.weeklyActivity),e("SET_SUBJECTS",t.data.subjects),e("SET_RECENT_ACTIVITY",t.data.recentActivity),e("SET_GOALS",t.data.goals),t.data}catch(t){throw console.error("Fetch activity error:",t),e("SET_ERROR","Failed to fetch activity data."),t}finally{e("SET_LOADING",!1)}},async updateProgress({commit:e},t){try{e("SET_LOADING",!0);const s=await vt.progress.updateProgress(t);return"quiz"===t.type?e("UPDATE_QUIZ_STATS",t):"study"===t.type&&e("UPDATE_STUDY_HOURS",t),s.data}catch(s){throw console.error("Update progress error:",s),e("SET_ERROR","Failed to update progress."),s}finally{e("SET_LOADING",!1)}},async addGoal({commit:e},t){try{e("SET_LOADING",!0);const s={id:Date.now(),...t,progress:0};return e("ADD_GOAL",s),s}catch(s){throw console.error("Add goal error:",s),e("SET_ERROR","Failed to add goal."),s}finally{e("SET_LOADING",!1)}},async updateGoal({commit:e},{id:t,progress:s}){try{e("SET_LOADING",!0),e("UPDATE_GOAL_PROGRESS",{id:t,progress:s})}catch(a){throw console.error("Update goal error:",a),e("SET_ERROR","Failed to update goal."),a}finally{e("SET_LOADING",!1)}},async deleteGoal({commit:e},t){try{e("SET_LOADING",!0),e("REMOVE_GOAL",t)}catch(s){throw console.error("Delete goal error:",s),e("SET_ERROR","Failed to delete goal."),s}finally{e("SET_LOADING",!1)}}},Td={SET_STATS(e,t){e.stats=t},SET_WEEKLY_ACTIVITY(e,t){e.weeklyActivity=t},SET_SUBJECTS(e,t){e.subjects=t},SET_RECENT_ACTIVITY(e,t){e.recentActivity=t},SET_GOALS(e,t){e.goals=t},UPDATE_QUIZ_STATS(e,{score:t}){e.stats.quizzesCompleted++;const s=e.stats.quizAverage*(e.stats.quizzesCompleted-1);e.stats.quizAverage=Math.round((s+t)/e.stats.quizzesCompleted)},UPDATE_STUDY_HOURS(e,{hours:t}){e.stats.studyHours+=t,e.stats.studyHoursThisWeek+=t},ADD_GOAL(e,t){e.goals.push(t)},UPDATE_GOAL_PROGRESS(e,{id:t,progress:s}){const a=e.goals.find((e=>e.id===t));a&&(a.progress=s)},REMOVE_GOAL(e,t){e.goals=e.goals.filter((e=>e.id!==t))},SET_LOADING(e,t){e.isLoading=t},SET_ERROR(e,t){e.error=t}};var Ed={namespaced:!0,state:Cd,getters:Ld,actions:Sd,mutations:Td};s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);const Nd={isOnline:navigator.onLine,lastSync:null,connectionStatus:"connecting",loadingStates:new Map,errors:new Map,subscriptions:new Set,optimisticUpdates:[],theme:"light",fontSize:16,sidebarVisible:!1},_d={isLoading:e=>t=>e.loadingStates.get(t)||!1,getError:e=>t=>e.errors.get(t),hasError:e=>t=>e.errors.has(t),getConnectionStatus:e=>e.connectionStatus,isConnected:e=>e.isOnline&&"connected"===e.connectionStatus,getLastSync:e=>e.lastSync,getTheme:e=>e.theme,getFontSize:e=>e.fontSize,getSidebarVisible:e=>e.sidebarVisible,getCurrentTheme:e=>"system"===e.theme&&"undefined"!==typeof window?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e.theme,getThemeState:e=>({theme:e.theme,fontSize:e.fontSize,currentTheme:"system"===e.theme&&"undefined"!==typeof window?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e.theme}),getThemeClasses:e=>{const t=!("undefined"===typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches,s="dark"===e.theme||"system"===e.theme&&t;return s?{main:"bg-gray-900 text-white",header:"bg-gray-800 border-b border-gray-700 text-white",sidebar:"bg-gray-800 border-r border-gray-700 text-white",mainContent:"bg-gray-900",card:"bg-gray-800 border border-gray-700 shadow-lg",text:"text-white",secondaryText:"text-gray-200",tertiaryText:"text-gray-400",input:"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500",button:"bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",buttonPrimary:"bg-blue-600 hover:bg-blue-700 text-white border border-blue-600",buttonSecondary:"bg-gray-600 hover:bg-gray-500 text-white border border-gray-600",link:"text-blue-400 hover:text-blue-300",border:"border-gray-700",hover:"hover:bg-gray-700",focus:"focus:bg-gray-600 focus:border-blue-500"}:{main:"bg-white text-gray-900",header:"bg-white border-b border-gray-200 shadow-sm text-gray-900",sidebar:"bg-gray-50 border-r border-gray-200 text-gray-900",mainContent:"bg-white",card:"bg-white border border-gray-200 shadow-sm hover:shadow-md transition-shadow hover:bg-gray-50",text:"text-gray-900",secondaryText:"text-gray-700",tertiaryText:"text-gray-500",input:"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 shadow-sm",button:"bg-gray-100 hover:bg-gray-200 text-gray-900 border border-gray-300 hover:border-gray-400",buttonPrimary:"bg-blue-600 hover:bg-blue-700 text-white border border-blue-600 shadow-sm",buttonSecondary:"bg-gray-600 hover:bg-gray-700 text-white border border-gray-600 shadow-sm",link:"text-blue-600 hover:text-blue-700",border:"border-gray-200",hover:"hover:bg-gray-50",focus:"focus:bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20"}},getFontSizeClasses:e=>{const t=e.fontSize;console.log("🔤 getFontSizeClasses called with size:",t);const s={heading:t>=20?"text-2xl":t>=18?"text-xl":t>=16?"text-lg":"text-base",body:t>=18?"text-lg":t>=16?"text-base":t>=14?"text-sm":"text-xs",label:t>=16?"text-sm":"text-xs",small:"text-xs"};return console.log("🔤 Computed font size classes:",s),s}},Ad={SET_ONLINE_STATUS(e,t){e.isOnline=t,e.connectionStatus=t?"connected":"offline"},SET_CONNECTION_STATUS(e,t){e.connectionStatus=t},SET_LOADING(e,{key:t,loading:s}){s?e.loadingStates.set(t,!0):e.loadingStates.delete(t)},SET_ERROR(e,{key:t,error:s}){s?e.errors.set(t,{message:s.message||s,timestamp:new Date,details:s}):e.errors.delete(t)},CLEAR_ERROR(e,t){e.errors.delete(t)},CLEAR_ALL_ERRORS(e){e.errors.clear()},SET_LAST_SYNC(e,t){e.lastSync=t},ADD_SUBSCRIPTION(e,t){e.subscriptions.add(t)},REMOVE_SUBSCRIPTION(e,t){e.subscriptions.delete(t)},ADD_OPTIMISTIC_UPDATE(e,t){e.optimisticUpdates.push({...t,timestamp:new Date,id:Date.now()})},REMOVE_OPTIMISTIC_UPDATE(e,t){e.optimisticUpdates=e.optimisticUpdates.filter((e=>e.id!==t))},CLEAR_OPTIMISTIC_UPDATES(e){e.optimisticUpdates=[]},SET_THEME(e,t){e.theme=t},SET_FONT_SIZE(e,t){e.fontSize=t},SET_SIDEBAR_VISIBLE(e,t){e.sidebarVisible=t}},zd={setOnlineStatus({commit:e},t){e("SET_ONLINE_STATUS",t)},setConnectionStatus({commit:e},t){e("SET_CONNECTION_STATUS",t)},setLoading({commit:e},t){e("SET_LOADING",t)},setError({commit:e},t){e("SET_ERROR",t)},clearError({commit:e},t){e("CLEAR_ERROR",t)},clearAllErrors({commit:e}){e("CLEAR_ALL_ERRORS")},updateLastSync({commit:e}){e("SET_LAST_SYNC",new Date)},addSubscription({commit:e},t){e("ADD_SUBSCRIPTION",t)},removeSubscription({commit:e},t){e("REMOVE_SUBSCRIPTION",t)},addOptimisticUpdate({commit:e},t){e("ADD_OPTIMISTIC_UPDATE",t)},removeOptimisticUpdate({commit:e},t){e("REMOVE_OPTIMISTIC_UPDATE",t)},clearOptimisticUpdates({commit:e}){e("CLEAR_OPTIMISTIC_UPDATES")},debugTheme({state:e,getters:t}){return console.log("🎨 === THEME DEBUG INFO ==="),console.log("🎨 Current theme state:",e.theme),console.log("🎨 Current theme (computed):",t.getCurrentTheme),console.log("🎨 Font size:",e.fontSize),console.log("🎨 Sidebar visible:",e.sidebarVisible),console.log("🎨 Theme classes:",t.getThemeClasses),console.log("🎨 Font size classes:",t.getFontSizeClasses),"undefined"!==typeof document&&(console.log("🎨 Document root classes:",document.documentElement.className),console.log("🎨 Body classes:",document.body.className)),console.log("🎨 === END THEME DEBUG ==="),{theme:e.theme,currentTheme:t.getCurrentTheme,fontSize:e.fontSize,sidebarVisible:e.sidebarVisible,themeClasses:t.getThemeClasses}},setTheme({commit:e,dispatch:t},s){console.log("🎨 setTheme called with:",s),e("SET_THEME",s),t("applyTheme",s),t("saveThemeSettings"),console.log("🎨 Theme set to:",s)},setFontSize({commit:e,dispatch:t},s){console.log("🔤 setFontSize called with:",s,"Type:",typeof s),console.log("🔤 Previous font size:",Nd.fontSize),"number"!==typeof s||s<12||s>24?console.error("🔤 Invalid font size:",s,"Must be number between 12-24"):(e("SET_FONT_SIZE",s),console.log("🔤 Font size committed to:",s),t("saveThemeSettings"),console.log("🔤 Font size change completed"))},setSidebarVisible({commit:e,dispatch:t},s){e("SET_SIDEBAR_VISIBLE",s),t("saveThemeSettings")},toggleSidebar({commit:e,dispatch:t,state:s}){const a=!s.sidebarVisible;e("SET_SIDEBAR_VISIBLE",a),t("saveThemeSettings")},applyTheme(e){if("undefined"===typeof window||"undefined"===typeof document)return;const t=document.documentElement,s=document.body;if(t.classList.remove("theme-dark","theme-light","theme-system"),s.classList.remove("theme-dark","theme-light","theme-system"),"dark"===e)t.classList.add("theme-dark"),s.classList.add("theme-dark"),console.log("🎨 Applied dark theme");else if("light"===e)t.classList.add("theme-light"),s.classList.add("theme-light"),console.log("🎨 Applied light theme");else if("system"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches,a=e?"theme-dark":"theme-light";t.classList.add("theme-system",a),s.classList.add("theme-system",a),console.log("🎨 Applied system theme:",a)}document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""},saveThemeSettings({state:e}){console.log("🎨 saveThemeSettings: Saving theme settings to localStorage");const t={theme:e.theme,fontSize:e.fontSize,sidebarVisible:e.sidebarVisible};console.log("🎨 saveThemeSettings: Settings to save:",t);try{localStorage.setItem("smartscribe_theme_settings",JSON.stringify(t)),console.log("🎨 saveThemeSettings: Settings saved to localStorage successfully"),console.log("🔤 Font size saved:",e.fontSize)}catch(s){console.error("🎨 saveThemeSettings: Error saving to localStorage:",s)}},loadThemeSettings({commit:e,dispatch:t}){console.log("🎨 loadThemeSettings: Loading theme settings from localStorage");const s=localStorage.getItem("smartscribe_theme_settings");if(console.log("🎨 loadThemeSettings: Raw localStorage data:",s),s)try{const a=JSON.parse(s);console.log("🎨 loadThemeSettings: Parsed settings:",a),a.theme&&(console.log("🎨 loadThemeSettings: Setting theme to:",a.theme),e("SET_THEME",a.theme)),a.fontSize?(console.log("🎨 loadThemeSettings: Setting font size to:",a.fontSize),console.log("🔤 Loading font size from localStorage:",a.fontSize,"Type:",typeof a.fontSize),e("SET_FONT_SIZE",a.fontSize),console.log("🔤 Font size loaded and committed")):console.log("🔤 No font size found in saved settings, using default"),"boolean"===typeof a.sidebarVisible&&(console.log("🎨 loadThemeSettings: Setting sidebar visible to:",a.sidebarVisible),e("SET_SIDEBAR_VISIBLE",a.sidebarVisible));const o=a.theme||"light";console.log("🎨 loadThemeSettings: Applying theme:",o),t("applyTheme",o)}catch(a){console.error("🎨 loadThemeSettings: Error loading theme settings:",a)}else console.log("🎨 loadThemeSettings: No saved settings found, applying default theme"),t("applyTheme","light")},initialize({dispatch:e}){"undefined"!==typeof window&&(window.addEventListener("online",(()=>{e("setOnlineStatus",!0),e("setConnectionStatus","connected")})),window.addEventListener("offline",(()=>{e("setOnlineStatus",!1),e("setConnectionStatus","offline")})),e("setOnlineStatus",navigator.onLine),e("loadThemeSettings"))},cleanup({state:e,dispatch:t}){e.subscriptions.forEach((e=>{"function"===typeof e.cleanup&&e.cleanup()})),t("clearAllErrors"),t("clearOptimisticUpdates")}};var Id={namespaced:!0,state:Nd,getters:_d,mutations:Ad,actions:zd},Fd=(0,n.y$)({modules:{auth:md,notes:wd,progress:Ed,app:Id}}),Rd=s(7107),Pd=s(1273),Dd=s(6188),Qd=s(7875),Ud=s(7897);Rd.Yv.add(Dd.v02,Dd.LBj,Dd.gK3,Dd.dB,Dd.z$e,Dd.rwq,Dd.MT7,Dd.o1d,Dd.hSh,Dd.OtC,Dd.jPR,Dd.GRI,Dd.nET,Dd.wRm,Dd.QLR,Dd.MjD,Dd.vaG,Dd.yy,Dd.uAg,Dd.e74,Dd.ijD,Dd.UBk,Dd.DX_,Dd.SGM,Dd.a$,Dd.h8M,Dd.pvD,Dd.z1G,Dd.tUE,Dd.nWR,Qd.HQ1,Qd.aUl,Qd.QV6,Qd.Vz1,Qd.Kjv,Qd.FjH,Qd.qKs,Dd.lRx,Dd.pS3,Dd.k6j,Dd.X46,Dd.Jt$,Dd.JmV,Dd.dmS,Dd.ReK,Dd.ecg,Dd.yLS,Dd.y_8,Dd.DW4,Dd.rhE,Dd.KMJ,Dd.ckx,Dd.kNw,Dd.s0Q,Dd.Uec,Dd.iW_,Dd.isI,Dd.yek,Dd.rIc,Ud.GEE,Dd.okg,Dd.Q9Y,Dd.Wzs,Dd.XkK,Dd.e68,Dd.$Fj,Dd.zpE);const Od=document.getElementById("app");Od&&Od.__vue_app__&&Od.__vue_app__.unmount();const Gd=(0,a.Ef)(u);Gd.use(Fd),Gd.use(id),Gd.component("font-awesome-icon",Pd.gc),window.$router=id;try{Fd.dispatch("app/initialize").catch((()=>{}))}catch(Md){}window.addEventListener("load",(()=>{document.body.classList.add("loaded")})),setTimeout((()=>{document.body.classList.add("loaded")}),100),Gd.mount("#app");const $d=localStorage.getItem("token");$d&&ht($d)&&Fd.commit("auth/CLEAR_AUTH");const qd=async()=>{try{console.log("🔐 Initializing Supabase auth listener"),await Fd.dispatch("auth/initializeAuthListener"),console.log("🔐 Supabase auth listener initialized successfully")}catch(Md){console.error("❌ Failed to initialize Supabase auth listener:",Md)}};qd()}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,r){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||l>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(n=!1,r<l&&(l=r));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,l=a[0],n=a[1],i=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(i)var d=i(s)}for(t&&t(a);c<l.length;c++)r=l[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunksmartscribe_newnew"]=self["webpackChunksmartscribe_newnew"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(3364)}));a=s.O(a)})();